<!DOCTYPE html>
<html lang="zh-CN">
<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/clicklove.js"></script>
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"julintongxue.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"valine","storage":true,"lazyload":false,"nav":null,"activeClass":"valine"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"manual","top_n_per_article":1,"unescape":false,"preload":true},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="自己对技术的小小见解，如果有误，请轻点喷，作者会腾出时间修改错误！！！(写了&quot;搁浅&quot;两字的就是个空文档,望注意)">
<meta property="og:type" content="website">
<meta property="og:title" content="orangeの博客">
<meta property="og:url" content="https://julintongxue.github.io/page/26/index.html">
<meta property="og:site_name" content="orangeの博客">
<meta property="og:description" content="自己对技术的小小见解，如果有误，请轻点喷，作者会腾出时间修改错误！！！(写了&quot;搁浅&quot;两字的就是个空文档,望注意)">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="涩橙子">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://julintongxue.github.io/page/26/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>orangeの博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">orangeの博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">17</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">83</span></a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">45</span></a>

  </li>
        <li class="menu-item menu-item-schedule">

    <a href="/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>日程表</a>

  </li>
        <li class="menu-item menu-item-追番">

    <a href="/bangumis/" rel="section"><i class="fa fa-heartbeat fa-fw"></i>追番</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    

  <a href="https://github.com/julintongxue" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://julintongxue.github.io/2022/07/17/raspberry/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.jpg">
      <meta itemprop="name" content="涩橙子">
      <meta itemprop="description" content="自己对技术的小小见解，如果有误，请轻点喷，作者会腾出时间修改错误！！！(写了"搁浅"两字的就是个空文档,望注意)">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="orangeの博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/07/17/raspberry/" class="post-title-link" itemprop="url">raspberry(搁浅)</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-07-17 18:49:23" itemprop="dateCreated datePublished" datetime="2022-07-17T18:49:23+08:00">2022-07-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-04-10 08:30:01" itemprop="dateModified" datetime="2023-04-10T08:30:01+08:00">2023-04-10</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%A8%B1%E4%B9%90%E5%8D%95%E7%89%87%E6%9C%BA/" itemprop="url" rel="index"><span itemprop="name">娱乐单片机</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2022/07/17/raspberry/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/07/17/raspberry/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>558</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>[toc]</p>
<h1 id="raspberry-搁浅"><a href="#raspberry-搁浅" class="headerlink" title="raspberry(搁浅)"></a>raspberry(搁浅)</h1><h2 id="基础入门"><a href="#基础入门" class="headerlink" title="基础入门"></a>基础入门</h2><h3 id="1"><a href="#1" class="headerlink" title="1."></a>1.</h3><h3 id="2-远程连接"><a href="#2-远程连接" class="headerlink" title="2.远程连接"></a>2.远程连接</h3><h4 id="window端远程连接"><a href="#window端远程连接" class="headerlink" title="window端远程连接"></a>window端远程连接</h4><p>要使用window的远程连接<code>mstsc</code>的话需要树莓派安装了<code>xrdp</code>这个软件；当然如果你觉得自带的不香的话也可以用树莓派自带的<code>vnc</code>，这得需要你去官网下一个<code>vncviewer</code>  这个客户端</p>
<p><strong>raspberry设置</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install xrdp</span><br></pre></td></tr></table></figure>

<h4 id="linux端远程连接"><a href="#linux端远程连接" class="headerlink" title="linux端远程连接"></a>linux端远程连接</h4><p>将树莓派打开<code>vnc</code>功能，然后就可以通过vnc远程连接了</p>
<p><strong>raspberry设置</strong></p>
<p>因为我使用的系统是manjaro那么我就推荐arch的软件咯</p>
<p><strong>manjaro设置</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yay -S realvnc-vnc-viewer</span><br></pre></td></tr></table></figure>



<h2 id="虚拟篇"><a href="#虚拟篇" class="headerlink" title="虚拟篇"></a>虚拟篇</h2><h3 id="exsi虚拟化"><a href="#exsi虚拟化" class="headerlink" title="exsi虚拟化"></a>exsi虚拟化</h3><h4 id="一-树莓派更新"><a href="#一-树莓派更新" class="headerlink" title="一.树莓派更新"></a>一.树莓派更新</h4><h4 id="二-前期步骤"><a href="#二-前期步骤" class="headerlink" title="二.前期步骤"></a>二.前期步骤</h4><ul>
<li><p><a target="_blank" rel="noopener" href="https://flings.vmware.com/esxi-arm-edition">exsi官方下载地址</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://bit.ly/2HpIaG6">最新的 Raspberry Pi 固件</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://bit.ly/3jota8D">UEFI 树莓派固件</a></p>
</li>
</ul>
<p>下载到以上的文件之后，先解压<code>firmware-master.zip</code>这个文件，弹出文件是否替换，单击<code>全部选否</code>，解压完成之后进入<code>boot</code>文件目录，拷贝里面的全部内容到你格式化好的tf卡中，并且删除掉这几个<code>kernel*</code>的文件。</p>
<p><img src="/2022/07/17/raspberry/image-20220719185945121-1658231139940.png" alt="image-20220719185945121"></p>
<p><img src="/2022/07/17/raspberry/image-20220719191049021-1658231139941.png" alt="image-20220719191049021"></p>
<p><img src="/2022/07/17/raspberry/image-20220719191232782-1658231139941.png" alt="image-20220719191232782"></p>
<p>接下来解压<code>RPi4_UEFI_Firmware_v1.20</code>压缩包，把里面的所有的内容拷贝到tf卡里面，弹出是否要替换文件的时候选择<code>替换目标中的文件</code></p>
<p><img src="/2022/07/17/raspberry/image-20220719192054052-1658231139941.png" alt="image-20220719192054052"></p>
<p>在<code>config.txt</code>文件中添加<code>gpu_mem=16</code></p>
<p><img src="/2022/07/17/raspberry/image-20220719192730271-1658231139941.png" alt="image-20220719192730271"></p>
<h4 id="三-exsi-install"><a href="#三-exsi-install" class="headerlink" title="三.exsi install"></a>三.exsi install</h4>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://julintongxue.github.io/2022/07/17/Manjaro-%E7%94%9F%E5%AD%98%E6%89%8B%E5%86%8C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.jpg">
      <meta itemprop="name" content="涩橙子">
      <meta itemprop="description" content="自己对技术的小小见解，如果有误，请轻点喷，作者会腾出时间修改错误！！！(写了"搁浅"两字的就是个空文档,望注意)">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="orangeの博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/07/17/Manjaro-%E7%94%9F%E5%AD%98%E6%89%8B%E5%86%8C/" class="post-title-link" itemprop="url">Manjaro-生存手册</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-07-17 18:46:02" itemprop="dateCreated datePublished" datetime="2022-07-17T18:46:02+08:00">2022-07-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-04-29 20:49:00" itemprop="dateModified" datetime="2024-04-29T20:49:00+08:00">2024-04-29</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux%E7%B3%BB%E7%BB%9F/" itemprop="url" rel="index"><span itemprop="name">Linux系统</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2022/07/17/Manjaro-%E7%94%9F%E5%AD%98%E6%89%8B%E5%86%8C/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/07/17/Manjaro-%E7%94%9F%E5%AD%98%E6%89%8B%E5%86%8C/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>11k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>10 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>[toc]</p>
<h3 id="下载镜像"><a href="#下载镜像" class="headerlink" title="下载镜像"></a><a target="_blank" rel="noopener" href="https://manjaro.org/download/">下载镜像</a></h3><h4 id="选择镜像"><a href="#选择镜像" class="headerlink" title="选择镜像"></a>选择镜像</h4><h5 id="1-XFCE"><a href="#1-XFCE" class="headerlink" title="1.XFCE"></a>1.XFCE</h5><p><strong>Xfce 是一个用于类 UNIX 操作系统的轻量级桌面环境。它的目标是快速和低系统资源，同时仍然具有视觉吸引力和用户友好性。Xfce 体现了传统的 UNIX 模块化和可重用性哲学。它由许多组件组成，这些组件提供了现代桌面环境所期望的全部功能。它们是单独包装的，您可以在可用的软件包中进行选择，以创建最佳的个人工作环境。</strong></p>
<p><img src="/2022/07/17/Manjaro-%E7%94%9F%E5%AD%98%E6%89%8B%E5%86%8C/XFCE.png" alt="XFCE"></p>
<h5 id="2-KDE-Plasma"><a href="#2-KDE-Plasma" class="headerlink" title="2.KDE Plasma"></a>2.KDE Plasma</h5><p><strong>KDE Plasma 适合那些想要用户友好和可定制桌面的人。它是一个功能丰富且用途广泛的桌面环境，提供多种不同风格的菜单来访问应用程序。一个出色的内置界面，可以轻松访问和安装来自互联网的新主题、小部件等，也值得一提。默认情况下，KDE Plasma 很简单，它是一个干净的工作区域，供实际使用，不会妨碍您，因此用户可以创建工作流程，从而更有效地完成任务。</strong></p>
<p><img src="/2022/07/17/Manjaro-%E7%94%9F%E5%AD%98%E6%89%8B%E5%86%8C/KDEPlasma.png" alt="KDEPlasma"></p>
<h5 id="3-GNOME"><a href="#3-GNOME" class="headerlink" title="3.GNOME"></a>3.GNOME</h5><p><strong>对于想要一个非常现代和简单的桌面的人</strong></p>
<p><strong>简单来说，这就是像ubuntu那样的桌面，算是极简主义者的天堂了。</strong></p>
<p><img src="/2022/07/17/Manjaro-%E7%94%9F%E5%AD%98%E6%89%8B%E5%86%8C/GNOME.jpg" alt="GNOME"></p>
<h3 id="制造启动U盘"><a href="#制造启动U盘" class="headerlink" title="制造启动U盘"></a><a target="_blank" rel="noopener" href="https://www.balena.io/etcher/">制造启动U盘</a></h3><h4 id="下载工具"><a href="#下载工具" class="headerlink" title="下载工具"></a>下载工具</h4><p>这里我们去<code>balenaEtcher</code>的官网下载一个便携式的u盘刻录工具，萌新前期可以通过这个工具把我们需要装的系统刻录进u盘中。(如果觉得一次只能刻录一个镜像而感到苦恼的话，也可以去<a target="_blank" rel="noopener" href="https://www.ventoy.net/cn/index.html">ventoy官网</a>下载ventoy这款无敌的工具，能够兼容多个系统镜像，真正让你的u盘不再唯一)</p>
<p>刻录好u盘之后我们可以开始进行我们的系统安装了！！！</p>
<h3 id="1-单系统-manjaro"><a href="#1-单系统-manjaro" class="headerlink" title="1.单系统(manjaro)"></a>1.单系统(manjaro)</h3><h3 id="2-双系统-window10-manjaro"><a href="#2-双系统-window10-manjaro" class="headerlink" title="2.双系统(window10 + manjaro)"></a>2.双系统(window10 + manjaro)</h3><h3 id="一-与window10-efi-共存方案"><a href="#一-与window10-efi-共存方案" class="headerlink" title="一.与window10 efi 共存方案"></a>一.与window10 efi 共存方案</h3><h3 id="二-单独一个-manjaro-efi-方案"><a href="#二-单独一个-manjaro-efi-方案" class="headerlink" title="二.单独一个 manjaro efi 方案"></a>二.单独一个 manjaro efi 方案</h3><h3 id="三-如何删除双系统下的manjaro系统"><a href="#三-如何删除双系统下的manjaro系统" class="headerlink" title="三.如何删除双系统下的manjaro系统"></a>三.如何删除双系统下的manjaro系统</h3><h4 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h4><p><strong>直接在window系统上面格式化manjaro的磁盘是不能完全删除manjaro的，这样做会触发efi检测不到manjaro硬盘而进入grub模式！！！</strong></p>
<h4 id="1-EFI根除教程"><a href="#1-EFI根除教程" class="headerlink" title="1.EFI根除教程"></a>1.EFI根除教程</h4><p><strong>1.删除EFI首先在cmd里面把装系统的那个分区显现出来，并且赋予盘符号。</strong></p>
<ul>
<li><p><strong>1.用diskpart来对磁盘进行操作</strong></p>
<p><img src="/2022/07/17/Manjaro-%E7%94%9F%E5%AD%98%E6%89%8B%E5%86%8C/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE(52).png"></p>
</li>
<li><p><strong>然后给diskpart授权开启</strong></p>
<p><img src="/2022/07/17/Manjaro-%E7%94%9F%E5%AD%98%E6%89%8B%E5%86%8C/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE(53).png"></p>
</li>
<li><p><strong>2.查看磁盘命令</strong></p>
<p><img src="/2022/07/17/Manjaro-%E7%94%9F%E5%AD%98%E6%89%8B%E5%86%8C/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE(54).png"></p>
</li>
<li><p><strong>3.选中目标磁盘0用select disk 0命令</strong></p>
<p><img src="/2022/07/17/Manjaro-%E7%94%9F%E5%AD%98%E6%89%8B%E5%86%8C/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE(55).png"></p>
</li>
<li><p>4.列出该磁盘下的所有分区信息用<strong>list partition</strong>命令</p>
<p><img src="/2022/07/17/Manjaro-%E7%94%9F%E5%AD%98%E6%89%8B%E5%86%8C/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE(56).png"></p>
</li>
<li><p><strong>5.选择我们的EFI系统分区用select partition 1命令（在这一步也可以删掉选中盘的所有内容（命令是delete partition override）（执行这条命令相当于把那个分区抹去了））</strong></p>
<p><img src="/2022/07/17/Manjaro-%E7%94%9F%E5%AD%98%E6%89%8B%E5%86%8C/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE(57).png"></p>
</li>
<li><p><strong>6.用命令给这个EFI分区赋予盘符之后，它就会像一个磁盘出现在电脑里面，命令是assign letter&#x3D;p（这里p是盘符号，你也可以按照自己喜欢来打其他字母，只要不重复就好。）</strong></p>
<p><img src="/2022/07/17/Manjaro-%E7%94%9F%E5%AD%98%E6%89%8B%E5%86%8C/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE(49).png"></p>
</li>
<li><p><strong>7.然后你就神奇的发现多了一个p盘分区（这个叫SYSTEM的磁盘分区就是那个EFI）</strong></p>
<p><img src="/2022/07/17/Manjaro-%E7%94%9F%E5%AD%98%E6%89%8B%E5%86%8C/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE(58).png"></p>
</li>
<li><p>8.这个时候你可以使用<strong>新建文本文档</strong>在里面打开这个p盘里面<strong>删掉EFI里面的系统启动文件</strong>或者用<strong>Total Commander 64 bit</strong>这个东西来删除里面的<strong>删掉EFI里面的系统启动文件</strong>（<strong>千万别把整个EFI干掉，那就是一把梭，莽！！！</strong>）<br><img src="/2022/07/17/Manjaro-%E7%94%9F%E5%AD%98%E6%89%8B%E5%86%8C/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE(59).png"><br><img src="/2022/07/17/Manjaro-%E7%94%9F%E5%AD%98%E6%89%8B%E5%86%8C/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE(48).png"><br><img src="/2022/07/17/Manjaro-%E7%94%9F%E5%AD%98%E6%89%8B%E5%86%8C/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE(60).png"></p>
</li>
<li><p><strong>然后移除盘符p用命令remove letter&#x3D;p</strong></p>
<p><img src="/2022/07/17/Manjaro-%E7%94%9F%E5%AD%98%E6%89%8B%E5%86%8C/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE(61).png"></p>
<p><img src="/2022/07/17/Manjaro-%E7%94%9F%E5%AD%98%E6%89%8B%E5%86%8C/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE(62).png"></p>
</li>
</ul>
<h4 id="2-删除卷"><a href="#2-删除卷" class="headerlink" title="2.删除卷"></a>2.删除卷</h4><p><strong>右键<code>此电脑</code>—&gt;单击<code>管理</code>—&gt;单击<code>磁盘管理</code>—&gt;找到你分配给<code>manjaro</code>的磁盘，直接右击<code>删除卷</code>，然后重新添加新的分区就行了。</strong></p>
<h4 id="3-manjaro系统入门操作-过不了就躺板板吧，别学了"><a href="#3-manjaro系统入门操作-过不了就躺板板吧，别学了" class="headerlink" title="3.manjaro系统入门操作(过不了就躺板板吧，别学了)"></a>3.manjaro系统入门操作(过不了就躺板板吧，别学了)</h4><h3 id="换源"><a href="#换源" class="headerlink" title="换源"></a>换源</h3><h4 id="1-换国内软件源"><a href="#1-换国内软件源" class="headerlink" title="1.换国内软件源"></a>1.换国内软件源</h4><p>安装完成manjaro的第一步就是给manjaro换上国内源，使接下来能安装软件等其他操作。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman-mirrors -i -c China -m rank <span class="comment">#在弹出来的面板选择一道两个时间短的源</span></span><br></pre></td></tr></table></figure>

<p>下面这个跟上面那一步操作类似，它是直接把源放入到文件里面一步到位(注意：这个源要放文件内容最前面)，有上面命令的操作可以跳过导入源到mirrorlist这一步。</p>
<p>首先把这几个源加入到这个文件里面：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /etc/pacman.d/mirrorlist    <span class="comment">#因为没有软件源，我没办法下载vim,所以这里我用的编辑器是vi,你们可以使用nano</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## Country : China</span></span><br><span class="line">Server = https://mirrors.huaweicloud.com/manjaro/stable/<span class="variable">$repo</span>/<span class="variable">$arch</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Country : China</span></span><br><span class="line">Server = https://mirrors.ustc.edu.cn/manjaro/stable/<span class="variable">$repo</span>/<span class="variable">$arch</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Country : China</span></span><br><span class="line">Server = https://mirrors.sjtug.sjtu.edu.cn/manjaro/stable/<span class="variable">$repo</span>/<span class="variable">$arch</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Country : China</span></span><br><span class="line">Server = https://mirrors.tuna.tsinghua.edu.cn/manjaro/stable/<span class="variable">$repo</span>/<span class="variable">$arch</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Country : China</span></span><br><span class="line">Server = https://mirrors.tuna.tsinghua.edu.cn/manjaro/stable/<span class="variable">$repo</span>/<span class="variable">$arch</span></span><br></pre></td></tr></table></figure>

<h4 id="2-添加cn软件源-完成这步，就可以正常下载东西了"><a href="#2-添加cn软件源-完成这步，就可以正常下载东西了" class="headerlink" title="2.添加cn软件源(完成这步，就可以正常下载东西了)"></a>2.添加cn软件源(完成这步，就可以正常下载东西了)</h4><p>这里我使用的是中科大的软件源：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /etc/pacman.conf</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#中科大源</span></span><br><span class="line">[archlinuxcn]</span><br><span class="line">SigLevel = Optional TrustedOnly</span><br><span class="line">Server = https://mirrors.ustc.edu.cn/archlinuxcn/<span class="variable">$arch</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pacman -Syyu                     <span class="comment">#更新整个系统</span></span><br><span class="line">pacman -S archlinuxcn-keyring    <span class="comment">#安装密钥环密钥</span></span><br></pre></td></tr></table></figure>

<h5 id="注意：如果更新的时候出现manjaro-pacman：“GPGME错误：无数据”问题"><a href="#注意：如果更新的时候出现manjaro-pacman：“GPGME错误：无数据”问题" class="headerlink" title="注意：如果更新的时候出现manjaro  pacman：“GPGME错误：无数据”问题"></a>注意：如果更新的时候出现manjaro  pacman：“GPGME错误：无数据”问题</h5><p>如下所示：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">pacman -Syyu</span><br><span class="line">错误：GPGME error: 无数据</span><br><span class="line">错误：GPGME error: 无数据</span><br><span class="line">错误：GPGME error: 无数据</span><br><span class="line">错误：GPGME error: 无数据</span><br><span class="line">错误：GPGME error: 无数据</span><br><span class="line">:: 正在同步软件包数据库...</span><br><span class="line"> core 已经是最新版本        0.0   B  0.00B/s 00:00 [----------------------]   0%</span><br><span class="line"> extra 已经是最新版本       0.0   B  0.00B/s 00:00 [----------------------]   0%</span><br><span class="line"> community 已经是最新版本   0.0   B  0.00B/s 00:00 [----------------------]   0%</span><br><span class="line"> multilib-testing 已经是最新版本  B  0.00B/s 00:00 [----------------------]   0%</span><br><span class="line"> multilib 已经是最新版本    0.0   B  0.00B/s 00:00 [----------------------]   0%</span><br><span class="line">错误：数据库 <span class="string">&#x27;core&#x27;</span> 无效 (无效或已损坏的数据库 (PGP 签名))</span><br><span class="line">错误：数据库 <span class="string">&#x27;extra&#x27;</span> 无效 (无效或已损坏的数据库 (PGP 签名))</span><br><span class="line">错误：数据库 <span class="string">&#x27;community&#x27;</span> 无效 (无效或已损坏的数据库 (PGP 签名))</span><br><span class="line">错误：数据库 <span class="string">&#x27;multilib-testing&#x27;</span> 无效 (无效或已损坏的数据库 (PGP 签名))</span><br><span class="line">错误：数据库 <span class="string">&#x27;multilib&#x27;</span> 无效 (无效或已损坏的数据库 (PGP 签名))</span><br></pre></td></tr></table></figure>

<p>只需要执行这条命令就可以正常启动</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">rm</span> -R /var/lib/pacman/sync</span><br></pre></td></tr></table></figure>

<h3 id="常用工具"><a href="#常用工具" class="headerlink" title="常用工具"></a>常用工具</h3><h4 id="1-vim编辑工具"><a href="#1-vim编辑工具" class="headerlink" title="1.vim编辑工具"></a>1.vim编辑工具</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S vim         <span class="comment"># vim编辑器永远的神</span></span><br></pre></td></tr></table></figure>

<h4 id="2-时间同步-非常重要，影响科学上网的vmess协议"><a href="#2-时间同步-非常重要，影响科学上网的vmess协议" class="headerlink" title="2.时间同步(非常重要，影响科学上网的vmess协议)"></a>2.时间同步(非常重要，影响科学上网的vmess协议)</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#硬件时间and系统时间</span></span><br><span class="line"><span class="comment">#这2个时间不是同步的！如果有一天发现系统的时间不对了，可以分别看看这2个时间。硬件时间写在BIOS里，系统时间就是电脑显示的时间了。</span></span><br><span class="line"><span class="comment">#这个显示的时硬件时间。</span></span><br><span class="line">sudo hwclock -r                                                                               </span><br><span class="line">[sudo] <span class="variable">$home</span> 的密码：</span><br><span class="line">2022-01-21 17:28:32.107794+08:00</span><br><span class="line"></span><br><span class="line"><span class="comment">#在使用ntpdate同步网络时间后可以将时间写入到BIOS：</span></span><br><span class="line"><span class="comment">#同步网络时间：</span></span><br><span class="line">sudo ntpdate time.windows.com</span><br><span class="line">21 Jan 17:30:46 ntpdate[1898]: adjust time server 20.189.79.72 offset -0.276329 sec</span><br><span class="line"></span><br><span class="line"><span class="comment">#写入BIOS：</span></span><br><span class="line">sudo  hwclock -w <span class="comment">#写入BISO</span></span><br><span class="line"><span class="comment">#再看看现在的时间</span></span><br><span class="line">sudo  hwclock -r</span><br><span class="line">2014年12月31日 星期三 20时26分03秒  -0.979207 seconds</span><br></pre></td></tr></table></figure>

<h4 id="3-安装yay"><a href="#3-安装yay" class="headerlink" title="3.安装yay"></a>3.安装yay</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S yay <span class="comment">#yay可以安装archlinux wiki上面的AUR软件包，给archlinux点赞</span></span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://aur.archlinux.org/packages/">Archlinux庞大的AUR软件包地址，需要软件包直接进去搜索</a></p>
<h4 id="4-安装一个非常重要的基础库base-devel"><a href="#4-安装一个非常重要的基础库base-devel" class="headerlink" title="4.安装一个非常重要的基础库base-devel"></a>4.安装一个非常重要的基础库base-devel</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S base-devel</span><br><span class="line">#:: 在组 base-devel 中有 24 成员：</span><br><span class="line">#:: 软件仓库 core</span><br><span class="line">   1) autoconf  2) automake  3) binutils  4) bison  5) fakeroot  6) file  7) findutils  8) flex  9) gawk</span><br><span class="line">   10) gcc  11) gettext  12) grep  13) groff  14) gzip  15) libtool  16) m4  17) make  18) pacman  19) patch</span><br><span class="line">   20) pkgconf  21) sed  22) sudo  23) texinfo  24) which</span><br><span class="line">#这个基础包必须安装，否则我们在使用yay安装AUR软件的时候经常会遇到安装不上的问题。</span><br></pre></td></tr></table></figure>

<h4 id="5-浏览器"><a href="#5-浏览器" class="headerlink" title="5.浏览器"></a>5.浏览器</h4><h5 id="谷歌浏览器"><a href="#谷歌浏览器" class="headerlink" title="谷歌浏览器"></a>谷歌浏览器</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yay -S google-chrome</span><br></pre></td></tr></table></figure>

<h5 id="Chromium"><a href="#Chromium" class="headerlink" title="Chromium"></a>Chromium</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S chromium</span><br></pre></td></tr></table></figure>

<h5 id="火狐浏览器"><a href="#火狐浏览器" class="headerlink" title="火狐浏览器"></a>火狐浏览器</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S firefox</span><br></pre></td></tr></table></figure>

<p><strong>中文汉化</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S firefox-i18n-zh-cn</span><br></pre></td></tr></table></figure>

<h4 id="6-办公套件WPS"><a href="#6-办公套件WPS" class="headerlink" title="6.办公套件WPS"></a>6.办公套件WPS</h4><p><strong>虽然安装manjaro的时候让你选择了办公套件，但是全英文的真是一言难尽。还是用回国产吧！</strong></p>
<p><strong>那就直接<code>AUR</code>库安装wps咯</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yay -S wps-office-mui-zh-cn wps-office-mime-cn wps-office-cn wps-office-fonts ttf-ms-fonts  ttf-wps-fonts</span><br></pre></td></tr></table></figure>

<p><strong><code>ttf-wps-fonts</code>、<code>wps-office-fonts</code>和<code>ttf-ms-fonts</code>是安装字体的，可选安装的，我这就懒了，直接一把梭呗！</strong></p>
<h4 id="7-安装Jetbra全家桶-以Pycharm为例子"><a href="#7-安装Jetbra全家桶-以Pycharm为例子" class="headerlink" title="7.安装Jetbra全家桶(以Pycharm为例子)"></a>7.安装Jetbra全家桶(以Pycharm为例子)</h4><a href="/2023/11/19/Manjaro-install-Pycharm-Professional/" title="Manjaro_install_Pycharm_Professional">Manjaro_install_Pycharm_Professional</a>

<h4 id="8-安装obs"><a href="#8-安装obs" class="headerlink" title="8.安装obs"></a>8.安装obs</h4><p><strong>使用命令下面命令安装</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yay -S obs-studio</span><br></pre></td></tr></table></figure>

<p><strong>你启动obs的时候可以看到启动然后马上闪退</strong></p>
<p><strong>这里只需要把<code>libva-vdpau-driver</code>这个包删了就行了</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -R libva-vdpau-driver</span><br></pre></td></tr></table></figure>

<p><strong>然后，就能正常使用obs了</strong></p>
<p><img src="/2022/07/17/Manjaro-%E7%94%9F%E5%AD%98%E6%89%8B%E5%86%8C/Screenshot_20231122_150148.png" alt="Screenshot_20231122_150148"></p>
<p><strong>但是。。。我手贱没将它加入忽略更新里面,敲了一次<code>sudo pacman -Syyu</code>这个obs就挂了</strong></p>
<p><strong>好吧！试一下编译安装</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yay -S obs-studio-rc</span><br></pre></td></tr></table></figure>

<p><strong>这个倒是没问题了，所以不确定的包，尽量别更新，趁早丢忽略更新里头。</strong></p>
<p><strong>好好查查文档，想玩好arch就得看官方文档，上游更新之后，系统只要滚一下就是最新的了，所以很多问题都没有披露就被你“趁热”吃上了。</strong></p>
<p><a target="_blank" rel="noopener" href="https://obsproject.com/download#linux">obs官网</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/obsproject/obs-studio">obs-studio-github</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/obsproject/obs-studio/wiki/install-instructions#linux">obs-studio-github-install</a></p>
<h3 id="安装输入法"><a href="#安装输入法" class="headerlink" title="安装输入法"></a>安装输入法</h3><p><a target="_blank" rel="noopener" href="https://wiki.archlinux.org/index.php/Fcitx5_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">Fcitx5 官方文档</a><br>中文及日文输入法均体验良好。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S fcitx5-im <span class="comment">#基础包组</span></span><br><span class="line">sudo pacman -S fcitx5-chinese-addons <span class="comment">#官方中文输入引擎</span></span><br><span class="line">sudo pacman -S fcitx5-anthy <span class="comment">#日文输入引擎</span></span><br><span class="line">yay -S fcitx5-pinyin-moegirl <span class="comment">#萌娘百科词库 由于中国大陆政府对github封锁，你可能在此卡住。如卡住，可根据后文设置好代理后再安装</span></span><br><span class="line">sudo pacman -S fcitx5-pinyin-zhwiki <span class="comment">#中文维基百科词库</span></span><br><span class="line">sudo pacman -S fcitx5-material-color <span class="comment">#主题</span></span><br></pre></td></tr></table></figure>

<p>设置环境变量 编辑文件 <code>sudo vim /etc/environment</code> 加入以下内容。konsole 以及 dolphin 都需要这些环境变量，倒是 chrome 和 firefox 都不需要就可以输入中文</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">GTK_IM_MODULE=fcitx</span><br><span class="line">QT_IM_MODULE=fcitx</span><br><span class="line">XMODIFIERS=@im=fcitx</span><br><span class="line">SDL_IM_MODULE=fcitx</span><br></pre></td></tr></table></figure>

<p>打开 <em>系统设置</em> &gt; <em>区域设置</em> &gt; _输入法_，先点击<code>运行Fcitx</code>即可，拼音为默认添加项。如你还需要更多输入法如五笔，则再点击<code>添加输入法</code>，找到简体中文下的五笔 ，点击添加即可加入五笔输入法。(建议，无论什么输入法都留一个英文的输入法在首位置)。</p>
<p>接下来点击 <em>拼音</em> 右侧的配置按钮，点选<code>云拼音</code>和<code>在程序中显示预编辑文本</code> 最后应用。</p>
<p>回到输入法设置，点击<code>配置附加组件</code>，找到 <em>经典用户界面</em> 在主题里选择一个你喜欢的颜色 最后应用。</p>
<p>注销，重新登陆，就可以发现已经可以在各个软件中输入中文了</p>
<h3 id="聊天工具"><a href="#聊天工具" class="headerlink" title="聊天工具"></a>聊天工具</h3><p>我们日常使用的聊天工具无非就是微信,QQ,Telegram</p>
<p>这个时候，我们可以去<a target="_blank" rel="noopener" href="https://aur.archlinux.org/packages/">Archlinux庞大的AUR软件</a>里面搜索</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#微信(已经是孤儿包不维护了)</span></span><br><span class="line">yay -S deepin-wine-wechat </span><br><span class="line"><span class="comment">#QQ(已经是孤儿包不维护了)</span></span><br><span class="line">yay -S deepin-wine-qq</span><br><span class="line"><span class="comment">#Telegram</span></span><br><span class="line">sudo pacman  -S telegram-desktop</span><br></pre></td></tr></table></figure>

<h3 id="科学上网-没有经验的直接跳过"><a href="#科学上网-没有经验的直接跳过" class="headerlink" title="科学上网(没有经验的直接跳过)"></a>科学上网(没有经验的直接跳过)</h3><h4 id="服务器端-Server端"><a href="#服务器端-Server端" class="headerlink" title="服务器端(Server端)"></a>服务器端(Server端)</h4><h5 id="1-科学上网服务器-外网服务器一台"><a href="#1-科学上网服务器-外网服务器一台" class="headerlink" title="1.科学上网服务器(外网服务器一台)"></a>1.科学上网服务器(外网服务器一台)</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 系统是centos7,更新软件</span></span><br><span class="line">yum update -y &amp;&amp; yum upgrade &amp;&amp; yum install curl -y &amp;&amp; yum -y install wget</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 脚本</span></span><br><span class="line">wget -P /root -N --no-check-certificate <span class="string">&quot;https://raw.githubusercontent.com/mack-a/v2ray-agent/master/install.sh&quot;</span> &amp;&amp; <span class="built_in">chmod</span> 700 /root/install.sh &amp;&amp; /root/install.sh</span><br></pre></td></tr></table></figure>

<h5 id="2-开启BBR加速"><a href="#2-开启BBR加速" class="headerlink" title="2.开启BBR加速"></a>2.开启BBR加速</h5><p><strong>选<code>2</code>然后选<code>19</code>懂？？？</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget --no-check-certificate -O tcpx.sh https://raw.githubusercontent.com/ylx2016/Linux-NetSpeed/master/tcpx.sh &amp;&amp; <span class="built_in">chmod</span> +x tcpx.sh &amp;&amp; ./tcpx.sh</span><br><span class="line"><span class="built_in">uname</span> -r</span><br><span class="line">lsmod | grep bbr</span><br></pre></td></tr></table></figure>

<h5 id="不喜欢上面的一键脚本可以试一下X-UI"><a href="#不喜欢上面的一键脚本可以试一下X-UI" class="headerlink" title="不喜欢上面的一键脚本可以试一下X-UI"></a>不喜欢上面的一键脚本可以试一下X-UI</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -Ls https://raw.githubusercontent.com/vaxilu/x-ui/master/install.sh)</span><br></pre></td></tr></table></figure>

<h5 id="docker-xui"><a href="#docker-xui" class="headerlink" title="docker(xui)"></a>docker(xui)</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> x-ui &amp;&amp; <span class="built_in">cd</span> x-ui</span><br><span class="line">docker run -it --network=host \</span><br><span class="line">    -v <span class="variable">$PWD</span>/db/:/etc/x-ui/ \</span><br><span class="line">    -v <span class="variable">$PWD</span>/cert/:/root/cert/ \</span><br><span class="line">    --name x-ui --restart=unless-stopped \</span><br><span class="line">    enwaiax/x-ui</span><br></pre></td></tr></table></figure>

<h4 id="客户端-Client端"><a href="#客户端-Client端" class="headerlink" title="客户端(Client端)"></a>客户端(Client端)</h4><p><a target="_blank" rel="noopener" href="https://clashforwindows.app/download/">https://clashforwindows.app/download/</a></p>
<p>目前 Clash for Windows 最新版本为 <strong>v0.20.39</strong>，可直接点击下表下载最新版 Clash for Windows。<strong>原厂备份，绝无修改，😂笑死根本不会改。</strong></p>
<table>
<thead>
<tr>
<th align="left">文件名</th>
<th>说明</th>
<th>下载</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Clash.for.Windows-0.20.39-arm64-linux.tar.gz</td>
<td>Linux ARM 64 位 版本 压缩包</td>
<td><a target="_blank" rel="noopener" href="https://clashforwindows.app/apps/Clash.for.Windows-0.20.39-arm64-linux.tar.gz">下载</a></td>
</tr>
<tr>
<td align="left"><strong>⭐Clash.for.Windows-0.20.39-win.7z</strong></td>
<td>Windows 64 位 版本 压缩包</td>
<td><a target="_blank" rel="noopener" href="https://clashforwindows.app/apps/Clash.for.Windows-0.20.39-win.7z">下载</a></td>
</tr>
<tr>
<td align="left">Clash.for.Windows-0.20.39-x64-linux.tar.gz</td>
<td>Linux 64 位 版本 压缩包</td>
<td><a target="_blank" rel="noopener" href="https://clashforwindows.app/apps/Clash.for.Windows-0.20.39-x64-linux.tar.gz">下载</a></td>
</tr>
<tr>
<td align="left">Clash.for.Windows-0.20.39.dmg</td>
<td>Mac 64 位 版本</td>
<td><a target="_blank" rel="noopener" href="https://clashforwindows.app/apps/Clash.for.Windows-0.20.39.dmg">下载</a></td>
</tr>
<tr>
<td align="left">Clash.for.Windows.Setup.0.20.39.arm64.exe</td>
<td>Windows ARM 64 位 版本</td>
<td><a target="_blank" rel="noopener" href="https://clashforwindows.app/apps/Clash.for.Windows.Setup.0.20.39.arm64.exe">下载</a></td>
</tr>
<tr>
<td align="left"><strong>⭐Clash.for.Windows.Setup.0.20.39.exe</strong></td>
<td>Windows 64 位 版本</td>
<td><a target="_blank" rel="noopener" href="https://clashforwindows.app/apps/Clash.for.Windows.Setup.0.20.39.exe">下载</a></td>
</tr>
<tr>
<td align="left">Clash.for.Windows.Setup.0.20.39.ia32.exe</td>
<td>Windows 英特尔 32 位 版本</td>
<td><a target="_blank" rel="noopener" href="https://clashforwindows.app/apps/Clash.for.Windows.Setup.0.20.39.ia32.exe">下载</a></td>
</tr>
</tbody></table>
<h3 id="美化系统"><a href="#美化系统" class="headerlink" title="美化系统"></a>美化系统</h3><h4 id="装个像Mac一样的dock栏"><a href="#装个像Mac一样的dock栏" class="headerlink" title="装个像Mac一样的dock栏"></a>装个像Mac一样的dock栏</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S latte-dock</span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/17/Manjaro-%E7%94%9F%E5%AD%98%E6%89%8B%E5%86%8C/Screenshot_20231116_172202.png" alt="Screenshot_20231116_172202"></p>
<p><strong>点一下<code>Latte</code>下面就会弹出这样的<code>dock</code>(你想多了，没这么好看，你得微调)</strong></p>
<p><img src="/2022/07/17/Manjaro-%E7%94%9F%E5%AD%98%E6%89%8B%E5%86%8C/Screenshot_20231116_171950.png" alt="Screenshot_20231116_171950"></p>
<h4 id="设置桌面动效"><a href="#设置桌面动效" class="headerlink" title="设置桌面动效"></a>设置桌面动效</h4><h3 id="娱乐篇"><a href="#娱乐篇" class="headerlink" title="娱乐篇"></a>娱乐篇</h3><p><strong>哈哈嗨！说了是娱乐嘛！那肯定得打游戏优先咯。那不得先玩玩fps游戏？</strong></p>
<a href="/2023/11/21/Arch-can-actually-play-games/" title="Arch_can_actually_play_games">Arch_can_actually_play_games</a>

<h3 id="虚拟化"><a href="#虚拟化" class="headerlink" title="虚拟化"></a>虚拟化</h3><h4 id="1-KVM"><a href="#1-KVM" class="headerlink" title="1.KVM"></a>1.KVM</h4><h5 id="环境检查"><a href="#环境检查" class="headerlink" title="环境检查"></a>环境检查</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 检查硬件是否支持虚拟化</span></span><br><span class="line">LC_ALL=C lscpu | grep Virtualization</span><br><span class="line"><span class="comment"># 检查内核是否已经包含了支持虚拟化所必须的模块</span></span><br><span class="line">zgrep CONFIG_KVM /proc/config.gz</span><br><span class="line"><span class="comment"># 确定模块是否已经加载</span></span><br><span class="line">lsmod | grep kvm</span><br><span class="line"><span class="comment"># 这里输出中需要包含 virtio</span></span><br><span class="line">lsmod | grep virtio</span><br><span class="line"><span class="comment"># 没有 virtio 时执行</span></span><br><span class="line">sudo modprobe virtio</span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/17/Manjaro-%E7%94%9F%E5%AD%98%E6%89%8B%E5%86%8C/Screenshot_20231116_163347-1700124808962.png" alt="Screenshot_20231116_163347"><img src="/2022/07/17/Manjaro-%E7%94%9F%E5%AD%98%E6%89%8B%E5%86%8C/Screenshot_20231116_163419.png" alt="Screenshot_20231116_163419"><img src="/2022/07/17/Manjaro-%E7%94%9F%E5%AD%98%E6%89%8B%E5%86%8C/Screenshot_20231116_163438.png" alt="Screenshot_20231116_163438"></p>
<h5 id="安装KVM"><a href="#安装KVM" class="headerlink" title="安装KVM"></a>安装KVM</h5><p><strong>执行下列命令安装必要软件</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo  pacman -S qemu libvirt ovmf virt-manager virt-viewer dnsmasq vde2 bridge-utils openbsd-netcat</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>qemu QEMU 软件，提供 qemu-img 等命令</strong></li>
<li><strong>libvirt 提供管理虚拟机、存储、网络的功能</strong></li>
<li><strong>virt-manager, 图形化的管理界面</strong></li>
<li><strong>virt-viewer是虚拟机查看器，它是一个显示虚拟化客户机的图形界面的工具</strong></li>
<li><strong>dnsmasq DHCP DNS 服务，用于 default NAT 网络</strong></li>
<li><strong>bridge-utils 桥接网络管理，用于桥接网络</strong></li>
<li><strong>openbsd-netcat 用于通过 SSH 管理</strong></li>
</ul>
<h5 id="重置虚拟机配置"><a href="#重置虚拟机配置" class="headerlink" title="重置虚拟机配置"></a>重置虚拟机配置</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yay -S --noconfirm --needed libguestfs</span><br></pre></td></tr></table></figure>

<h5 id="启动服务"><a href="#启动服务" class="headerlink" title="启动服务"></a>启动服务</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动虚拟机管理后台服务</span></span><br><span class="line">sudo systemctl start libvirtd</span><br><span class="line"><span class="comment"># 启动 default NAT 网络</span></span><br><span class="line">sudo virsh net-start default</span><br></pre></td></tr></table></figure>

<h5 id="设置开机启动"><a href="#设置开机启动" class="headerlink" title="设置开机启动"></a>设置开机启动</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl <span class="built_in">enable</span> libvirtd.service</span><br><span class="line">sudo systemctl start libvirtd.service</span><br></pre></td></tr></table></figure>

<h5 id="添加权限组"><a href="#添加权限组" class="headerlink" title="添加权限组"></a>添加权限组</h5><p><strong>修改<code>libvirtd.conf</code>文件</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/libvirt/libvirtd.conf</span><br><span class="line"><span class="comment"># 将UNIX域套接字组所有权设置为libvirt（第85行）：</span></span><br><span class="line">unix_sock_group = <span class="string">&quot;libvirt&quot;</span></span><br><span class="line"><span class="comment"># 设置R/W套接字的UNIX套接字权限（第108行）：</span></span><br><span class="line">unix_sock_rw_perms = <span class="string">&quot;0770&quot;</span></span><br></pre></td></tr></table></figure>

<p><strong>保存退出，执行下面命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#将你的用户帐户添加到libvirt组：</span></span><br><span class="line">sudo usermod -a -G libvirt $(<span class="built_in">whoami</span>)</span><br><span class="line"><span class="comment"># newgrp 命令使当前普通用户登入到这个群组</span></span><br><span class="line">newgrp libvirt</span><br><span class="line"><span class="comment"># 重启libvirt守护进程：</span></span><br><span class="line">sudo systemctl restart libvirtd.service</span><br></pre></td></tr></table></figure>

<h5 id="开启嵌套虚拟化"><a href="#开启嵌套虚拟化" class="headerlink" title="开启嵌套虚拟化"></a>开启嵌套虚拟化</h5><p><strong>嵌套虚拟化功能使你可以在KVM虚拟机中运行虚拟机，我的CPU是<code>intel</code>的，启用内核模块为<code>kvm_intel</code>，如果是<code>amd</code>的需要改为<code>kvm_amd</code>：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">sudo modprobe -r kvm_intel</span><br><span class="line">sudo modprobe kvm_intel nested=1</span><br><span class="line">要使此配置持久，请运行：</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;options kvm-intel nested=1&quot;</span> | sudo <span class="built_in">tee</span> /etc/modprobe.d/kvm-intel.conf</span><br><span class="line">确认嵌套虚拟化设置为是：</span><br><span class="line">systool -m kvm_intel -v | grep nested</span><br><span class="line">nested              = <span class="string">&quot;Y&quot;</span></span><br><span class="line">nested_early_check  = <span class="string">&quot;N&quot;</span></span><br><span class="line"><span class="built_in">cat</span> /sys/module/kvm_intel/parameters/nested </span><br><span class="line">Y</span><br></pre></td></tr></table></figure>

<h5 id="创建虚拟机"><a href="#创建虚拟机" class="headerlink" title="创建虚拟机"></a>创建虚拟机</h5><p><strong>直接打开<code>virt-manager</code>点点点就行了，这就不用我教了吧！</strong></p>
<p><img src="/2022/07/17/Manjaro-%E7%94%9F%E5%AD%98%E6%89%8B%E5%86%8C/Screenshot_20231116_165156.png" alt="Screenshot_20231116_165156"></p>
<p><strong>这个KVM篇章就是用上面这个虚拟机写的，命令、图片传输只能通过nas传，后续使用<code>VMwareWorkstation</code>就能通过自带的<code>tool</code>加强Linux主机和虚拟机的联系。</strong></p>
<h4 id="2-VMwareWorkstation-篇"><a href="#2-VMwareWorkstation-篇" class="headerlink" title="2.VMwareWorkstation 篇"></a>2.VMwareWorkstation 篇</h4><p><a target="_blank" rel="noopener" href="https://aur.archlinux.org/packages?O=0&SeB=nd&K=vmware-workstation&outdated=&SB=p&SO=d&PP=50&submit=Go">vmware-workstation</a></p>
<p><img src="/2022/07/17/Manjaro-%E7%94%9F%E5%AD%98%E6%89%8B%E5%86%8C/Screenshot_20231125_164005.png" alt="Screenshot_20231125_164005"></p>
<h4 id="3-VirtualBox篇"><a href="#3-VirtualBox篇" class="headerlink" title="3.VirtualBox篇"></a>3.VirtualBox篇</h4><h4 id="4-docker篇"><a href="#4-docker篇" class="headerlink" title="4.docker篇"></a>4.docker篇</h4><h5 id="一-安装docker"><a href="#一-安装docker" class="headerlink" title="一.安装docker"></a>一.安装docker</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S docker</span><br></pre></td></tr></table></figure>

<h5 id="二-docker基础服务命令"><a href="#二-docker基础服务命令" class="headerlink" title="二.docker基础服务命令"></a>二.docker基础服务命令</h5><p><strong>启动docker</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start docker</span><br></pre></td></tr></table></figure>

<p><strong>开机启动docker</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> docker</span><br></pre></td></tr></table></figure>

<p><strong>关掉开机启动docker</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemclt <span class="built_in">disable</span> docker</span><br></pre></td></tr></table></figure>

<p><strong>显示docker的版本信息</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker version</span><br></pre></td></tr></table></figure>


<h5 id="三-配置镜像加速和docker代理"><a href="#三-配置镜像加速和docker代理" class="headerlink" title="三.配置镜像加速和docker代理"></a>三.配置镜像加速和docker代理</h5><p><strong>镜像加速</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/docker/daemon.json</span><br></pre></td></tr></table></figure>

<p><strong>加入这个中科大的源</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;registry-mirrors&quot;</span>: [<span class="string">&quot;https://docker.mirrors.ustc.edu.cn&quot;</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>重新加载配置</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl daemon-reload</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure>

<h5 id="四-docker命令"><a href="#四-docker命令" class="headerlink" title="四.docker命令"></a>四.docker命令</h5><p><strong>查看docker安装的镜像</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure>

<p><strong>搜索镜像</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker search 目标镜像</span><br></pre></td></tr></table></figure>

<p><strong>下载目标镜像</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull 目标镜像</span><br></pre></td></tr></table></figure>

<p><strong>下载指定版本的目标镜像</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull 目标镜像:版本</span><br></pre></td></tr></table></figure>

<p><strong>卸载目标镜像</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi -f 容器ID 容器ID 容器ID 容器ID</span><br></pre></td></tr></table></figure>

<p><strong>运行容器</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">docker run [可选参数] image</span><br><span class="line"><span class="comment"># 参数说明</span></span><br><span class="line">--name=<span class="string">&quot;Name&quot;</span>    Name是你给容器起的名字，来区分容器</span><br><span class="line">-d               后台方式运行</span><br><span class="line">-it              使用交互方式运行，加入容器看内容</span><br><span class="line">-p               指定容器的端口 -p 8080：8080</span><br><span class="line">	-p IP:主机端口：容器端口</span><br><span class="line">	-p 主机端口：容器端口</span><br><span class="line">	-p 容器端口</span><br><span class="line">-P（大P） 随机指定端口</span><br></pre></td></tr></table></figure>

<p><strong>查看正在运行的容器</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker ps</span><br><span class="line">-a <span class="comment">#列出当前正在运行的容器+带出历史运行过的容器</span></span><br><span class="line">-q <span class="comment">#列出容器id</span></span><br></pre></td></tr></table></figure>

<p><strong>退出容器</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">exit</span>  <span class="comment">#直接容器停止并且退出</span></span><br><span class="line">ctrl + p + q   <span class="comment">#容器不停止退出</span></span><br></pre></td></tr></table></figure>

<p><strong>删除容器</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">rm</span> 容器<span class="built_in">id</span>      <span class="comment">#删除指定的容器，不能删除正在运行发容器 </span></span><br><span class="line">docker <span class="built_in">rm</span> -f $(docker ps -aq)      <span class="comment">#删除所有容器</span></span><br><span class="line">docker ps -aq | xargs docker <span class="built_in">rm</span>    <span class="comment">#删除所有容器</span></span><br></pre></td></tr></table></figure>

<p><strong>启动和停止容器的操作</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker start 容器<span class="built_in">id</span>   <span class="comment">#启动容器</span></span><br><span class="line">docker restart 容器<span class="built_in">id</span> <span class="comment">#重启容器</span></span><br><span class="line">docker stop 容器<span class="built_in">id</span>    <span class="comment">#停止当前正在运行的容器</span></span><br><span class="line">docker <span class="built_in">kill</span> 容器<span class="built_in">id</span>    <span class="comment">#强制停止当前容器</span></span><br></pre></td></tr></table></figure>

<h5 id="五-常用其他命令"><a href="#五-常用其他命令" class="headerlink" title="五.常用其他命令"></a>五.常用其他命令</h5><p><strong>后台启动容器</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker run -d 镜像名</span><br><span class="line"><span class="comment"># 问题docker ps ，发现centos 停止了</span></span><br><span class="line"><span class="comment">#常见的坑，docker容器使用后台运行，就必须要有一个前台进程，docker发现没有应用，就会自动停止</span></span><br><span class="line"><span class="comment">#nginx，容器启动后发现自己没有提供服务，就会立刻停止，就是没有程序了</span></span><br></pre></td></tr></table></figure>

<p><strong>查看日志目录</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker logs -tf --<span class="built_in">tail</span> 10 容器<span class="built_in">id</span>      <span class="comment">#看十条容器日志</span></span><br><span class="line">-tf <span class="comment">#显示日志</span></span><br><span class="line">--<span class="built_in">tail</span> number <span class="comment">#要显示日志条数</span></span><br></pre></td></tr></table></figure>

<p><strong>查看容器中进程信息</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker top 容器<span class="built_in">id</span></span><br></pre></td></tr></table></figure>

<p><strong>查看容器的原数据</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect 容器<span class="built_in">id</span></span><br></pre></td></tr></table></figure>

<p><strong>备份：导出容器数据</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">export</span> 容器<span class="built_in">id</span> &gt; xx.tar</span><br></pre></td></tr></table></figure>

<p><strong>备份：导入备份数据</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> xx.tar | docker import - 镜像用户/镜像名:镜像版本号</span><br></pre></td></tr></table></figure>

<p><strong>打包容器成为镜像</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker commit -m=<span class="string">&quot;提交的描述信息&quot;</span> -a=<span class="string">&quot;作者&quot;</span> 容器<span class="built_in">id</span> 要创建的目标镜像名:[标签名]</span><br></pre></td></tr></table></figure>

<p><strong>进入当前正在运行的容器</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">方式一：进去容器后开启一个新的终端，可以在里面操作（常用）</span><br><span class="line">docker <span class="built_in">exec</span> -it 容器<span class="built_in">id</span> /bin/bash</span><br><span class="line">方式二:进入正在运行的终端，不会启动新的进程</span><br><span class="line">docker attach 容器<span class="built_in">id</span> </span><br></pre></td></tr></table></figure>

<p><strong>拷贝容器里面的数据到主机</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">cp</span> 容器<span class="built_in">id</span>:/home/* /home</span><br><span class="line"><span class="comment"># 把容器的home目录下的全部文件拷贝到我主机的home目录</span></span><br></pre></td></tr></table></figure>

<h5 id="部署Mariadb"><a href="#部署Mariadb" class="headerlink" title="部署Mariadb"></a>部署Mariadb</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sudo docker run --restart=always --name mariadb01 \ </span><br><span class="line">-p 3306:3306 \ </span><br><span class="line">-e MYSQL_ROOT_PASSWORD=123456 \ </span><br><span class="line">-v /home/orange/docker/mariadb/mysql.conf.d/mysql.cnf:/etc/mysql/mysql.conf.d/mysql.cnf \ </span><br><span class="line">-v /home/orange/docker/mariadb/data:/var/lib/mysql \</span><br><span class="line">-d mariadb</span><br><span class="line"><span class="comment">#-e环境配置</span></span><br></pre></td></tr></table></figure>

<h5 id="部署Nginx"><a href="#部署Nginx" class="headerlink" title="部署Nginx"></a>部署Nginx</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name nginx01 -p 8080:80 -v /home/orange/docker/nginx/html:/usr/share/nginx/html:ro -d amd64/nginx</span><br></pre></td></tr></table></figure>

<h5 id="六-docker-compose"><a href="#六-docker-compose" class="headerlink" title="六.docker-compose"></a>六.docker-compose</h5><h6 id="WordPress"><a href="#WordPress" class="headerlink" title="WordPress"></a>WordPress</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">version: <span class="string">&#x27;1.18.0&#x27;</span></span><br><span class="line"></span><br><span class="line">services:</span><br><span class="line"></span><br><span class="line">  wordpress:</span><br><span class="line">    image: wordpress</span><br><span class="line">    restart: always</span><br><span class="line">    ports:</span><br><span class="line">      - 80:80</span><br><span class="line">      - 443:443</span><br><span class="line">    environment:</span><br><span class="line">      WORDPRESS_DB_HOST: db</span><br><span class="line">      WORDPRESS_DB_USER: orange</span><br><span class="line">      WORDPRESS_DB_PASSWORD: NNLCV9GG</span><br><span class="line">      WORDPRESS_DB_NAME: WordPress</span><br><span class="line">    volumes:</span><br><span class="line">      - wordpress:/var/www/html</span><br><span class="line"></span><br><span class="line">  db:</span><br><span class="line">    image: mariadb:latest  <span class="comment"># 更改为使用MariaDB镜像</span></span><br><span class="line">    restart: always</span><br><span class="line">    environment:</span><br><span class="line">      MYSQL_DATABASE: WordPress</span><br><span class="line">      MYSQL_USER: orange</span><br><span class="line">      MYSQL_PASSWORD: NNLCV9GG</span><br><span class="line">      MYSQL_ROOT_PASSWORD: NNLCV9GG</span><br><span class="line">    volumes:</span><br><span class="line">      - db:/var/lib/mysql</span><br><span class="line"></span><br><span class="line">volumes:</span><br><span class="line">  wordpress:</span><br><span class="line">  db:</span><br></pre></td></tr></table></figure>



<h4 id="5-wine-最牛的"><a href="#5-wine-最牛的" class="headerlink" title="5.wine(最牛的)"></a>5.wine(最牛的)</h4>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://julintongxue.github.io/2022/07/17/HCIA/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.jpg">
      <meta itemprop="name" content="涩橙子">
      <meta itemprop="description" content="自己对技术的小小见解，如果有误，请轻点喷，作者会腾出时间修改错误！！！(写了"搁浅"两字的就是个空文档,望注意)">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="orangeの博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/07/17/HCIA/" class="post-title-link" itemprop="url">HCIA</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-07-17 16:52:12" itemprop="dateCreated datePublished" datetime="2022-07-17T16:52:12+08:00">2022-07-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-10-15 23:05:44" itemprop="dateModified" datetime="2023-10-15T23:05:44+08:00">2023-10-15</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2/" itemprop="url" rel="index"><span itemprop="name">路由交换</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2022/07/17/HCIA/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/07/17/HCIA/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>22k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>20 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="HCIA"><a href="#HCIA" class="headerlink" title="HCIA"></a>HCIA</h1><p>[toc]</p>
<h2 id="子网计算"><a href="#子网计算" class="headerlink" title="子网计算"></a>子网计算</h2><p><img src="/2022/07/17/HCIA/image-20230214194022895.png" alt="image-20230214194022895"></p>
<p><img src="/2022/07/17/HCIA/image-20230214194423029.png" alt="image-20230214194423029"></p>
<h3 id="习题"><a href="#习题" class="headerlink" title="习题"></a>习题</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">4个部门 4个子网</span><br><span class="line">每个部门最多到50台主机 每个子网至少容纳50个主机地址</span><br><span class="line">借两位  主机数=62台</span><br><span class="line">192.168.100.0/24-&gt;26</span><br><span class="line"></span><br><span class="line">0        1~62        63</span><br><span class="line">64       65~126      127</span><br><span class="line">128      129~190     192</span><br><span class="line">192      193~254     255</span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/17/HCIA/image-20230215000603724.png" alt="image-20230215000603724"></p>
<p>块（Block） &#x3D; 2^主机数位&#x3D;256-感兴趣掩码数</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">如果生产部主机100台，销售部有50台，财务部有25台，客服部有12台，应该如何划分子网呢？</span><br><span class="line"></span><br><span class="line">生产部100台，至少保留7位主机位，最多借1位</span><br><span class="line"></span><br><span class="line">块=128</span><br><span class="line">生产部可以在下面两个子网二选一，假设选了子网1，那么子网1就不能参与下面其他部门的分割，只能使用子网2去分割。</span><br><span class="line"></span><br><span class="line">子网1：192.168.100.0/25</span><br><span class="line">子网2：192.168.100.128/25</span><br><span class="line"></span><br><span class="line">销售部50台，至少保留6位主机位，最多借两位</span><br><span class="line">块=64</span><br><span class="line"></span><br><span class="line">子网3：192.168.100.128/26</span><br><span class="line">子网4：192.168.100.192/26</span><br><span class="line"></span><br><span class="line">销售部25台，客服部有12台，至少保留5位主机位，最多借三位</span><br><span class="line">块=32</span><br><span class="line"></span><br><span class="line">子网5：192.168.100.192/27   销售部</span><br><span class="line">子网6：192.168.100.224/27   客服部</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>第1问：61.179.150.39&#x2F;28 子网号为多少，广播号为多少，可用IP地址范围是多少？</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">块=16</span><br><span class="line"></span><br><span class="line">？ X 块 = B &lt; 39</span><br><span class="line">? = 2 B = 32</span><br><span class="line">子网号32</span><br><span class="line">广播号47</span><br><span class="line">可用ip地址范围33 ~ 46</span><br></pre></td></tr></table></figure>

<p><strong>第2问:19.224.17.0&#x2F;17 可不可以配置在路由器的接口上?如果可以，是为什么，不可以又是为什么?</strong> </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">块=128</span><br><span class="line"></span><br><span class="line">子网地址19.224.0.0/17</span><br><span class="line">19.2240.0~19.224.127.255</span><br><span class="line">可以</span><br></pre></td></tr></table></figure>

<p><strong>第3问:37.95.221.16&#x2F;5 和 41.222.221.16&#x2F;5 两个地址在不在同一个网段，能不能ping通?为什么?</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">块=8</span><br><span class="line">32.0.0.0/5 40.0.0.0/5 很明显不是同一个网段，ping不通</span><br></pre></td></tr></table></figure>

<p><strong>第4问:给出第3问的IP地址 37.95.221.16的子网号和广播号</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">块=128</span><br><span class="line"></span><br><span class="line">子网号32.0.0.0/5</span><br><span class="line">广播号39.255.255.255/5</span><br><span class="line">可以</span><br></pre></td></tr></table></figure>



<h2 id="回环网卡设置过程"><a href="#回环网卡设置过程" class="headerlink" title="回环网卡设置过程"></a>回环网卡设置过程</h2><h3 id="一-安装过程"><a href="#一-安装过程" class="headerlink" title="一.安装过程"></a>一.安装过程</h3><p><strong>1.找到”开始”选项，鼠标右击找到”设备管理器”,然后随便在空白处单击鼠标一下。</strong></p>
<p><img src="/2022/07/17/HCIA/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE(4).png" alt="屏幕截图(4)"></p>
<p><strong>2.鼠标单击菜单栏选项的”操作”选项，然后单击”添加过时硬件”，然后在”弹窗”选项单击”下一步”;在”你想向导做什么”选项里面选择”安装我手动从列表选择的硬件(高级)”，然后单击”下一步”;在”常见硬件类型”选择中选择”网络适配器”,然后单击”下一步”;然后在”厂商”选项中选择”Microsoft”,然后在”型号”选项中选择”Microsoft KM-TEST 环回适配器”，然后单击”下一步“，然后在单击一次”下一步”，系统就会按照选项按照网卡，等待”完成”选项出来后，单击”完成”选项即可完成配置。</strong></p>
<p><img src="/2022/07/17/HCIA/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE(5).png" alt="屏幕截图(5)"></p>
<p><img src="/2022/07/17/HCIA/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE(6).png" alt="屏幕截图(6)"></p>
<p><img src="/2022/07/17/HCIA/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE(7).png" alt="屏幕截图(7)"></p>
<p><img src="/2022/07/17/HCIA/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE(10).png" alt="屏幕截图(10)"></p>
<h3 id="二-检查过程"><a href="#二-检查过程" class="headerlink" title="二.检查过程"></a>二.检查过程</h3><p><strong>1.然后可以在”更改适配器选项中”找到”以太网”这张回环网卡</strong></p>
<p><img src="/2022/07/17/HCIA/image-20220118203530057.png" alt="image-20220118203530057"></p>
<p><strong>1.当然你也可以给这张网卡”重命名”,比如左上角那张”loop”网卡就是我上一次实验的回环网卡，接下来我会用”loop”网卡做实验（顺带说一句，回环网卡安装好后是必须要重启才能生效）</strong></p>
<h3 id="三-ensp配置回环实验"><a href="#三-ensp配置回环实验" class="headerlink" title="三.ensp配置回环实验"></a>三.ensp配置回环实验</h3><p><strong>1.接下来我用这个拓扑来做一次</strong></p>
<p><img src="/2022/07/17/HCIA/image-20220118235018574-1658238267503.png" alt="image-20220118235018574"></p>
<p><strong>2.首先，我们单拖一个云”Cloud”出来。然后”右击”鼠标选择”设置”。没开始配置前的设置是这样的，如下图:</strong></p>
<p><img src="/2022/07/17/HCIA/image-20220118205140449-1658238267503.png" alt="image-20220118205140449"></p>
<p><strong>3.我们首先在端口创建那里找到绑定信息”UDP”，然后单击右边的”增加”选项。然后，配置表就出现一行配置，如下图:</strong></p>
<p><img src="/2022/07/17/HCIA/image-20220118205410999-1658238267504.png" alt="image-20220118205410999"></p>
<p><strong>4.然后我们在端口创建那里找到绑定信息”loop”（我们创建的回环网卡，这里的回环网卡我更改了设备名，所以叫loop），然后单击右边的”增加”选项。然后，配置表就出现第二行配置，如下图:</strong></p>
<p><img src="/2022/07/17/HCIA/image-20220118205550165-1658238267504.png" alt="image-20220118205550165"></p>
<p><img src="/2022/07/17/HCIA/image-20220118205753084-1658238267504.png" alt="image-20220118205753084"></p>
<p><strong>5.然后我们看下方的”端口映射设置”，在”出”或者”入”端口设置里面选择一方的端口编号设置成为”2”,然后再勾选下方的”双向通道”，然后单击”增加”即可完成配置。</strong></p>
<p><img src="/2022/07/17/HCIA/image-20220118210211711-1658238267504.png" alt="image-20220118210211711"></p>
<p><strong>6.设置回环网卡ip为”1.0.0.2”,打开”网络设配器选项”找到目标网卡改就行了</strong></p>
<p><img src="/2022/07/17/HCIA/image-20220118210811144-1658238267504.png" alt="image-20220118210811144"></p>
<p><strong>7.给路由器刷入命令(记得开启路由器)</strong></p>
<p><img src="/2022/07/17/HCIA/image-20220118211028820-1658238267504.png" alt="image-20220118211028820"></p>
<p><strong>8.xshell测试路由器ip”1.0.0.1”是否可以ping通</strong></p>
<p><img src="/2022/07/17/HCIA/image-20220118210928564-1658238267504.png" alt="image-20220118210928564"></p>
<p>9.把服务命令刷入路由器，然后用xshell连接上去。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">sys</span><br><span class="line">sys AR1</span><br><span class="line">int g0/0/0</span><br><span class="line">ip add 1.0.0.1 24</span><br><span class="line">q</span><br><span class="line">telnet server <span class="built_in">enable</span></span><br><span class="line">user-interface vty 0 4</span><br><span class="line">authentication-mode aaa</span><br><span class="line">q</span><br><span class="line">aaa</span><br><span class="line">local-user julintongxue password cipher 123.com</span><br><span class="line">local-user julintongxue privilege level 15</span><br><span class="line">local-user julintongxue service-type telnet</span><br><span class="line">display this</span><br></pre></td></tr></table></figure>

<p><img src="/2022/07/17/HCIA/image-20220118235856933-1658238267504.png" alt="image-20220118235856933"></p>
<p><img src="/2022/07/17/HCIA/image-20220118235920804-1658238267504.png" alt="image-20220118235920804"></p>
<table>
<thead>
<tr>
<th>认证 模式</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>AAA</td>
<td>登录时需要用户名和密码</td>
</tr>
<tr>
<td>Password</td>
<td>登录时只需要密码</td>
</tr>
</tbody></table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dis telnet server status</span><br><span class="line">dis telnet server <span class="built_in">enable</span></span><br></pre></td></tr></table></figure>


<table>
<thead>
<tr>
<th>命令</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>user-interface vty 0 4</td>
<td>进入vty配置模式</td>
</tr>
<tr>
<td>+ authentication-mode password&#x2F;aaa</td>
<td>配置认证模式</td>
</tr>
<tr>
<td>+ set authentication password cipher huawei</td>
<td>配置认证密码huawei</td>
</tr>
<tr>
<td>+ user privilege level 15</td>
<td>配置用户级别为15</td>
</tr>
<tr>
<td>user-interface maximum-vty 15</td>
<td>配置最大vty会话数量</td>
</tr>
<tr>
<td>aaa</td>
<td>进入aaa配置模式</td>
</tr>
<tr>
<td>+ local-user julintongxue password cipher huawei</td>
<td>创建julintongxue用户和huawei密码</td>
</tr>
<tr>
<td>+ local-user julintongxue privilege level 15</td>
<td>创建用户级别</td>
</tr>
<tr>
<td>+ local-user julintongxue service-type telnet</td>
<td>创建用户可用服务</td>
</tr>
</tbody></table>
<h2 id="学习"><a href="#学习" class="headerlink" title="学习"></a>学习</h2><h3 id="ospf综合实验"><a href="#ospf综合实验" class="headerlink" title="ospf综合实验"></a>ospf综合实验</h3><p><img src="/2022/07/17/HCIA/image-20230608003146657.png" alt="image-20230608003146657"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">sys </span><br><span class="line">sys AR1</span><br><span class="line">int g0/0/0</span><br><span class="line">ip add 192.168.0.1 24</span><br><span class="line">ospf 1 router-id 1.1.1.1</span><br><span class="line">area 0</span><br><span class="line">net 192.168.0.0 0.0.0.255</span><br><span class="line">int g0/0/0</span><br><span class="line">ospf dr-pri 200</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sys </span><br><span class="line">sys AR2</span><br><span class="line">int g0/0/0</span><br><span class="line">ip add 192.168.0.2 24</span><br><span class="line">ospf 1 router-id 2.2.2.2</span><br><span class="line">area 0</span><br><span class="line">net 192.168.0.0 0.0.0.255</span><br><span class="line">int g0/0/0</span><br><span class="line">ospf dr-pri 100</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sys </span><br><span class="line">sys AR3</span><br><span class="line">int g0/0/0</span><br><span class="line">ip add 192.168.0.3 24</span><br><span class="line">int s4/0/0</span><br><span class="line">ip add 34.0.0.3 8</span><br><span class="line">ospf authentication-mode md5 1 cipher julintongxue@gmail.com</span><br><span class="line">ospf 1 router-id 3.3.3.3</span><br><span class="line">area 0</span><br><span class="line">net 192.168.0.0 0.0.0.255</span><br><span class="line">net 34.0.0.0 0.255.255.255</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sys </span><br><span class="line">sys AR6</span><br><span class="line">int g0/0/0</span><br><span class="line">ip add 192.168.0.6 24</span><br><span class="line">ospf 1 router-id 6.6.6.6</span><br><span class="line">area 0</span><br><span class="line">net 192.168.0.0 0.0.0.255</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sys </span><br><span class="line">sys AR4</span><br><span class="line">int g0/0/1</span><br><span class="line">ip add 48.0.0.4 8</span><br><span class="line">ip route-static 0.0.0.0 0 48.0.0.8</span><br><span class="line">int s4/0/0</span><br><span class="line">ip add 34.0.0.4 8</span><br><span class="line">ospf authentication-mode md5 1 cipher julintongxue@gmail.com</span><br><span class="line">int lo 4</span><br><span class="line">ip add 4.4.4.4 32</span><br><span class="line">ospf 1 router-id 4.4.4.4</span><br><span class="line">default-route-advertise</span><br><span class="line">area 0</span><br><span class="line">net 4.4.4.4 0.0.0.0</span><br><span class="line">net 34.0.0.0 0.255.255.255</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sys </span><br><span class="line">sys AR5</span><br><span class="line">int g0/0/0</span><br><span class="line">ip add 48.0.0.8 8</span><br><span class="line">ip route-static 0.0.0.0 0 48.0.0.4</span><br><span class="line">int lo 5</span><br><span class="line">ip add 8.8.8.8 32</span><br></pre></td></tr></table></figure>

<h3 id="VLAN“基础实验”"><a href="#VLAN“基础实验”" class="headerlink" title="VLAN“基础实验”"></a>VLAN“基础实验”</h3><p><img src="/2022/07/17/HCIA/image-20230613001021890.png" alt="image-20230613001021890"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">sys</span><br><span class="line">sys SW1</span><br><span class="line">vlan batch 10 20 100 200</span><br><span class="line">int g0/0/3</span><br><span class="line">p l t</span><br><span class="line">p t a v 10 20 100 200</span><br><span class="line">int g0/0/1</span><br><span class="line">p l h</span><br><span class="line">p h un v 10 100</span><br><span class="line">p h p v 10</span><br><span class="line">int g0/0/2</span><br><span class="line">p l h</span><br><span class="line">p h un v 20 200</span><br><span class="line">p h p v 20</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sys</span><br><span class="line">sys SW2</span><br><span class="line">vlan batch 10 20 100 200</span><br><span class="line">int g0/0/1</span><br><span class="line">p l t</span><br><span class="line">p t a v 10 20 100 200</span><br><span class="line">int g0/0/2</span><br><span class="line">p l t</span><br><span class="line">p t a v 10 20 100 200</span><br><span class="line">int g0/0/3</span><br><span class="line">p l h</span><br><span class="line">p h un v 10 100</span><br><span class="line">p h p v 100</span><br><span class="line">int g0/0/4</span><br><span class="line">p l h</span><br><span class="line">p h un v 20 200</span><br><span class="line">p h p v 200</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sys</span><br><span class="line">sys SW3</span><br><span class="line">vlan batch 10 20 100 200</span><br><span class="line">int g0/0/4</span><br><span class="line">p l t</span><br><span class="line">p t a v 10 20 100 200</span><br><span class="line">int g0/0/1</span><br><span class="line">p l h</span><br><span class="line">p h un v 10 100</span><br><span class="line">p h p v 10</span><br><span class="line">int g0/0/2</span><br><span class="line">p l h</span><br><span class="line">p h un v 20 200</span><br><span class="line">p h p v 20</span><br></pre></td></tr></table></figure>

<h3 id="网络安全与管理综合实训"><a href="#网络安全与管理综合实训" class="headerlink" title="网络安全与管理综合实训"></a>网络安全与管理综合实训</h3><h4 id="ACl"><a href="#ACl" class="headerlink" title="ACl"></a>ACl</h4><p><a href="topo/%E5%AE%9E%E9%AA%8C1%EF%BC%9AACl.rar">实验1：ACl</a></p>
<p><img src="/2022/07/17/HCIA/Snipaste_2023-09-07_16-44-36.png" alt="Snipaste_2023-09-07_16-44-36"></p>
<ul>
<li><strong>完成基础配置，让X园区的所有主机都可以访问ISP，完成NAT的配置</strong></li>
<li><strong>要求是AR1和AR2都可以远程R3(SSHv2)，但是R1的SSH网管流量在进入ISP是要求被过滤掉</strong></li>
<li><strong>要求X园区的PC1不能访问PC2</strong></li>
<li><strong>要求X园区的HTTP Client1不能访问ISP的HTTP Server1</strong></li>
<li><strong>要求X园区的PC1不能访问ISP的PC3，但是可以访问PC4</strong></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">sys </span><br><span class="line">sys SW1</span><br><span class="line">acl 2000</span><br><span class="line">rule 5 deny <span class="built_in">source</span> 192.168.1.0 0.0.0.255</span><br><span class="line">int e0/0/2</span><br><span class="line">traffic-filter outbound acl 2000</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sys</span><br><span class="line">sys AR1</span><br><span class="line">int g0/0/0</span><br><span class="line">ip add 192.168.1.254 24</span><br><span class="line">int g0/0/1</span><br><span class="line">ip add 100.1.12.1 24</span><br><span class="line">acl 2000</span><br><span class="line">rule permit <span class="built_in">source</span> 192.168.1.0 0.0.0.255</span><br><span class="line">int g0/0/1</span><br><span class="line">nat outbound 2000</span><br><span class="line">ospf 1</span><br><span class="line">area 1</span><br><span class="line">network 100.1.12.0 0.0.0.255</span><br><span class="line">ssh client first-time <span class="built_in">enable</span></span><br><span class="line">acl 3000</span><br><span class="line">rule deny tcp <span class="built_in">source</span> 192.168.1.3 0 destination 10.10.10.10 0 destination-port eq 80</span><br><span class="line">rule deny icmp <span class="built_in">source</span> 192.168.1.1 0 destination 8.8.8.8 0</span><br><span class="line">int g0/0/0</span><br><span class="line">traffic-filter inbound acl 3000</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sys</span><br><span class="line">sys AR2</span><br><span class="line">int g0/0/0</span><br><span class="line">ip add 100.1.12.254 24</span><br><span class="line">int g0/0/1</span><br><span class="line">ip add 100.1.23.1 24</span><br><span class="line">ospf 1</span><br><span class="line">area 1</span><br><span class="line">network 100.1.23.0 0.0.0.255</span><br><span class="line">network 100.1.12.0 0.0.0.255</span><br><span class="line">ssh client first-time <span class="built_in">enable</span></span><br><span class="line">acl 3000</span><br><span class="line">rule deny tcp <span class="built_in">source</span> 100.1.12.1 0 destination 100.1.23.254 0 destination-port eq 22</span><br><span class="line">int g0/0/0</span><br><span class="line">traffic-filter inbound acl 3000</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sys</span><br><span class="line">sys AR3</span><br><span class="line">int g0/0/0</span><br><span class="line">ip add 100.1.23.254 24</span><br><span class="line">int g0/0/1</span><br><span class="line">ip add 8.8.8.254 24</span><br><span class="line">int g0/0/2</span><br><span class="line">ip add 9.9.9.254 24</span><br><span class="line">int g1/0/0</span><br><span class="line">ip add 10.10.10.254 24</span><br><span class="line">ospf 1</span><br><span class="line">area 1</span><br><span class="line">network 8.8.8.0 0.0.0.255</span><br><span class="line">network 9.9.9.0 0.0.0.255</span><br><span class="line">network 10.10.10.0 0.0.0.255</span><br><span class="line">network 100.1.23.0 0.0.0.255</span><br><span class="line">stelnet server <span class="built_in">enable</span></span><br><span class="line">user-interface vty 0 4</span><br><span class="line">authentication-mode aaa</span><br><span class="line">protocol inbound ssh</span><br><span class="line">aaa</span><br><span class="line">local-user orange password cipher huawei@123 privilege level 3</span><br><span class="line">local-user orange service-type ssh</span><br><span class="line">rsa local-key-pair create</span><br><span class="line">ssh user orange authentication-type password</span><br></pre></td></tr></table></figure>

<h4 id="Basic-NAT"><a href="#Basic-NAT" class="headerlink" title="Basic NAT"></a>Basic NAT</h4><p><a href="topo/%E5%AE%9E%E9%AA%8C2%EF%BC%9ABasic_NAT.rar">实验2：Basic_NAT</a></p>
<p><img src="/2022/07/17/HCIA/image-20230913012019405.png" alt="image-20230913012019405"></p>
<p><strong>完成Basic NAT的配置(Easy IP、 地址池 NAT、NAT Server 、静态 NAT&#x2F;NAPT)</strong></p>
<ul>
<li><strong>PC2访问ISP的8.8.8.8采用G0&#x2F;0&#x2F;2 通过静态NAT实现</strong></li>
<li><strong>PC3访问ISP的9.9.9.9采用G2&#x2F;0&#x2F;0 通过NAPT实现</strong></li>
<li><strong>HTTP Client2访问ISP HTTP Server1采用EASYIP实现</strong></li>
<li><strong>ISP HTTP Client1访问内网Server2的HTTP服务，通过NAT Server实现</strong></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">NAPT地址池：</span><br><span class="line">101.1.1.11-101.1.1.22</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sys</span><br><span class="line">sys AR1</span><br><span class="line">int g0/0/0</span><br><span class="line">ip add 192.168.2.254 24</span><br><span class="line">int g0/0/1</span><br><span class="line">ip add 192.168.1.254 24</span><br><span class="line">int g2/0/1</span><br><span class="line">ip add 102.1.1.1 24</span><br><span class="line">int g0/0/2</span><br><span class="line">ip add 100.1.1.1 24</span><br><span class="line">nat static <span class="built_in">enable</span></span><br><span class="line">nat static global 100.1.1.2 inside 192.168.1.1</span><br><span class="line">int g2/0/0</span><br><span class="line">ip add 101.1.1.1 24</span><br><span class="line">ip route-static 0.0.0.0 0 100.1.1.254</span><br><span class="line">ip route-static 9.9.9.9 32 101.1.1.254</span><br><span class="line">ip route-static 10.10.10.10 32 102.1.1.254</span><br><span class="line">nat address-group 1 101.1.1.11 101.1.1.22</span><br><span class="line">acl 2000</span><br><span class="line">rule permit <span class="built_in">source</span> 192.168.1.2 0.0.0.255 </span><br><span class="line">int g2/0/0</span><br><span class="line">nat outbound 2000 address-group 1</span><br><span class="line">acl 2001</span><br><span class="line">rule permit <span class="built_in">source</span> 192.168.1.3 0</span><br><span class="line">int g2/0/1</span><br><span class="line">nat outbound 2001</span><br><span class="line">int g2/0/1</span><br><span class="line">nat server protocol tcp global current-interface www inside 192.168.2.100 www</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sys</span><br><span class="line">sys AR2</span><br><span class="line">int g2/0/0</span><br><span class="line">ip add 8.8.8.254 24</span><br><span class="line">int g2/0/1</span><br><span class="line">ip add 9.9.9.254 24</span><br><span class="line">int g2/0/2</span><br><span class="line">ip add 10.10.10.254 24</span><br><span class="line">int g0/0/2</span><br><span class="line">ip add 102.1.1.254 24</span><br><span class="line">int g0/0/0</span><br><span class="line">ip add 100.1.1.254 24</span><br><span class="line">int g0/0/1</span><br><span class="line">ip add 101.1.1.254 24</span><br><span class="line">ip route-static 100.1.1.2 32 100.1.1.1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sys</span><br><span class="line">sys SW1</span><br></pre></td></tr></table></figure>

<h4 id="NGFW-Basic-Configuration"><a href="#NGFW-Basic-Configuration" class="headerlink" title="NGFW Basic Configuration"></a>NGFW Basic Configuration</h4><p><a href="topo/%E5%AE%9E%E9%AA%8C3%EF%BC%9ANGFW_Basic_Configuration.rar">实验3：NGFW_Basic_Configuration</a></p>
<ul>
<li><strong>防火墙web管理方式实现</strong></li>
<li><strong>防火墙安全区域的规划配置</strong></li>
<li><strong>默认的情况下，Trust的PC1是否能和PC2通讯？ 可以通讯</strong></li>
<li><strong>如果Trust的PC1能够PING DMZ的Server1，安全策略如何实现？</strong></li>
<li><strong>如果DMZ的Server1能够PING Trust的PC1，安全策略如何实现？</strong></li>
</ul>
<p><strong>小云朵连接了回环网卡</strong></p>
<p><strong>这是回环网卡的ip设置</strong></p>
<p><img src="/2022/07/17/HCIA/image-20231007022450233.png" alt="image-20231007022450233"></p>
<p><img src="/2022/07/17/HCIA/image-20231007021251862.png" alt="image-20231007021251862"></p>
<p><img src="/2022/07/17/HCIA/image-20231007021812598.png" alt="image-20231007021812598"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">sys</span><br><span class="line">sys FW1</span><br><span class="line">int g0/0/0</span><br><span class="line">ip add 192.168.2.1 24</span><br><span class="line">service-manage all permit</span><br><span class="line">firewall zone dmz </span><br><span class="line">add int g1/0/1</span><br><span class="line">int g1/0/1</span><br><span class="line">ip add 172.16.1.254 24</span><br><span class="line">service-manage all permit</span><br><span class="line">firewall zone untrust</span><br><span class="line">add int g1/0/3</span><br><span class="line">int g1/0/3</span><br><span class="line">ip add 100.1.1.1 24</span><br><span class="line">service-manage all permit</span><br><span class="line">firewall zone trust</span><br><span class="line">add int g1/0/2</span><br><span class="line">add int g1/0/0</span><br><span class="line">int g1/0/2</span><br><span class="line">ip add 192.168.2.254 24</span><br><span class="line">service-manage all permit</span><br><span class="line">int g1/0/0</span><br><span class="line">ip add 192.168.1.254 24</span><br><span class="line">service-manage all permit</span><br><span class="line">q</span><br><span class="line">security-policy</span><br><span class="line">rule name PC1-to-200-trust-to-dmz-icmp</span><br><span class="line">source-zone trust</span><br><span class="line">destination-zone dmz</span><br><span class="line">source-address 192.168.1.1 32</span><br><span class="line">destination-address 172.16.1.100 32</span><br><span class="line">service icmp</span><br><span class="line">action permit</span><br><span class="line">q</span><br><span class="line">rule name 200-to-PC1-dmz-to-trust-icmp</span><br><span class="line">source-zone dmz</span><br><span class="line">destination-zone trust</span><br><span class="line">source-address 172.16.1.100 32</span><br><span class="line">destination-address 192.168.1.1 32</span><br><span class="line">service icmp</span><br><span class="line">action permit</span><br><span class="line">q</span><br><span class="line">rule name PC1-to-200-trust-to-dmz-icmp</span><br><span class="line">source-zone trust </span><br><span class="line">destination-zone dmz</span><br><span class="line">source-address 192.168.1.1 32</span><br><span class="line">destination-address 172.16.1.200 32</span><br><span class="line">service icmp</span><br><span class="line">action permit </span><br><span class="line">nat address-group 1</span><br><span class="line">section 130.1.1.1</span><br><span class="line">mode pat</span><br><span class="line">nat-policy</span><br><span class="line">rule name snat-01</span><br><span class="line">source-zone trust </span><br><span class="line">destination-zone dmz</span><br><span class="line">source-address 192.168.1.1 32</span><br><span class="line">destination-address 172.16.1.200 32</span><br><span class="line">service icmp</span><br><span class="line">action source-nat address-group 1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sys</span><br><span class="line">sys AR1</span><br><span class="line">int g0/0/0</span><br><span class="line">ip add 100.1.1.254 24</span><br><span class="line">int g0/0/1</span><br><span class="line">ip add 8.8.8.254 24</span><br><span class="line">int g0/0/2</span><br><span class="line">ip add 9.9.9.254 24</span><br><span class="line">int g4/0/0</span><br><span class="line">ip add 10.10.10.254 24</span><br></pre></td></tr></table></figure>

<h4 id="NGFW-NAT-Configuration"><a href="#NGFW-NAT-Configuration" class="headerlink" title="NGFW NAT Configuration"></a>NGFW NAT Configuration</h4><p><a href="topo/%E5%AE%9E%E9%AA%8C4%EF%BC%9ANGFW_NAT_Configuration.rar">实验4：NGFW_NAT_Configuration</a></p>
<blockquote>
<p><strong>Server2 又当dnsServer也当httpServer</strong></p>
</blockquote>
<blockquote>
<p><strong>Server2配置</strong></p>
</blockquote>
<p><img src="/2022/07/17/HCIA/image-20231007122901911.png" alt="image-20231007122901911"></p>
<p><img src="/2022/07/17/HCIA/image-20231007122923090.png" alt="image-20231007122923090"></p>
<p><img src="/2022/07/17/HCIA/image-20231007122937350.png" alt="image-20231007122937350"></p>
<blockquote>
<p>Client2当客户端<img src="/2022/07/17/HCIA/image-20231007123023201.png" alt="image-20231007123023201"></p>
</blockquote>
<p><img src="/2022/07/17/HCIA/image-20231007122623070.png" alt="image-20231007122623070"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">sys</span><br><span class="line">sys FW1</span><br><span class="line">firewall zone dmz </span><br><span class="line">add int g1/0/1</span><br><span class="line">int g1/0/1</span><br><span class="line">ip add 172.16.1.254 24</span><br><span class="line">service-manage all permit</span><br><span class="line">firewall zone untrust</span><br><span class="line">add int g1/0/3</span><br><span class="line">int g1/0/3</span><br><span class="line">ip add 100.1.1.1 24</span><br><span class="line">service-manage all permit</span><br><span class="line">firewall zone trust</span><br><span class="line">add int g1/0/2</span><br><span class="line">add int g1/0/0</span><br><span class="line">int g1/0/2</span><br><span class="line">ip add 192.168.2.254 24</span><br><span class="line">service-manage all permit</span><br><span class="line">int g1/0/0</span><br><span class="line">ip add 192.168.1.254 24</span><br><span class="line">service-manage all permit</span><br><span class="line">q</span><br><span class="line">security-policy</span><br><span class="line">rule name PC1-PC3-to-PC2-trust-to-untrust</span><br><span class="line">source-zone trust</span><br><span class="line">destination-zone untrust</span><br><span class="line">source-address 192.168.1.1 32</span><br><span class="line">source-address 192.168.2.1 32</span><br><span class="line">destination-address 8.8.8.8 32</span><br><span class="line">service icmp</span><br><span class="line">action permit</span><br><span class="line">nat-policy</span><br><span class="line">rule name EASYIP</span><br><span class="line">source-zone trust </span><br><span class="line">egress-interface g1/0/3</span><br><span class="line">source-address 192.168.0.0 16</span><br><span class="line">destination-address 8.8.8.8 32</span><br><span class="line">service icmp</span><br><span class="line">action source-nat easy-ip</span><br><span class="line">q</span><br><span class="line">q</span><br><span class="line">ip route-static 0.0.0.0 0 100.1.1.254</span><br><span class="line">security-policy</span><br><span class="line">rule name C2-to-S2-to-PC2-untrust-to-trust</span><br><span class="line">source-zone untrust</span><br><span class="line">destination-zone dmz</span><br><span class="line">source-address 9.9.9.9 32</span><br><span class="line">destination-address 172.16.1.200 32</span><br><span class="line">service dns http</span><br><span class="line">action permit</span><br><span class="line">q</span><br><span class="line">q</span><br><span class="line">nat server HTTP1 protocol tcp global 100.1.1.1 8080 inside 172.16.1.200 80</span><br><span class="line">nat server DNS1 protocol udp global 100.1.1.1 53 inside 172.16.1.200 53</span><br><span class="line">dns resolve</span><br><span class="line">dns server 172.16.1.200</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sys</span><br><span class="line">sys AR1</span><br><span class="line">int g0/0/0</span><br><span class="line">ip add 100.1.1.254 24</span><br><span class="line">int g0/0/1</span><br><span class="line">ip add 8.8.8.254 24</span><br><span class="line">int g0/0/2</span><br><span class="line">ip add 9.9.9.254 24</span><br><span class="line">int g4/0/0</span><br><span class="line">ip add 10.10.10.254 24</span><br></pre></td></tr></table></figure>

<h4 id="NGFW-NAT-Server-内网服务器多台映射"><a href="#NGFW-NAT-Server-内网服务器多台映射" class="headerlink" title="NGFW NAT Server 内网服务器多台映射"></a>NGFW NAT Server 内网服务器多台映射</h4><p><a href="topo/%E5%AE%9E%E9%AA%8C5%EF%BC%9ANGFW_NAT_Server%E5%86%85%E7%BD%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%A4%9A%E5%8F%B0%E6%98%A0%E5%B0%84.rar">实验5：NGFW_NAT_Server内网服务器多台映射</a></p>
<ul>
<li><strong>实现将两台服务器都映射到公网上，提供HTTP服务</strong></li>
<li><strong>如果NAT SERVER不同服务器映射到相同的端口，可以实现吗？如果可以是什么现象？</strong></li>
</ul>
<blockquote>
<p>Client1</p>
</blockquote>
<p><img src="/2022/07/17/HCIA/image-20231007140050878.png" alt="image-20231007140050878"></p>
<p><img src="/2022/07/17/HCIA/image-20231007140111661.png" alt="image-20231007140111661"></p>
<p><img src="/2022/07/17/HCIA/image-20231007140030346.png" alt="image-20231007140030346"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">sys</span><br><span class="line">sys AR1</span><br><span class="line">int g0/0/1</span><br><span class="line">ip add 8.8.8.254 24</span><br><span class="line">int g0/0/0</span><br><span class="line">ip add 100.1.1.254 24</span><br><span class="line">ip route-static 0.0.0.0 0 100.1.1.1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sys</span><br><span class="line">sys FW1</span><br><span class="line">firewall zone dmz </span><br><span class="line">add int g1/0/0</span><br><span class="line">int g1/0/0</span><br><span class="line">ip add 172.16.1.254 24</span><br><span class="line">service-manage all permit</span><br><span class="line">firewall zone untrust</span><br><span class="line">add int g1/0/1</span><br><span class="line">int g1/0/1</span><br><span class="line">ip add 100.1.1.1 24</span><br><span class="line">service-manage all permit</span><br><span class="line">q</span><br><span class="line">ip route-static 0.0.0.0 0 100.1.1.254</span><br><span class="line">security-policy</span><br><span class="line">rule name untrust-to-dmz</span><br><span class="line">source-zone untrust</span><br><span class="line">destination-zone dmz</span><br><span class="line">source-address 8.8.8.8 mask 255.255.255.255</span><br><span class="line">destination-address 172.16.1.100 mask 255.255.255.255</span><br><span class="line">destination-address 172.16.1.200 mask 255.255.255.255</span><br><span class="line">service http</span><br><span class="line">service icmp</span><br><span class="line">action permit</span><br><span class="line">q</span><br><span class="line">nat server HTTP1 zone untrust protocol tcp global interface g1/0/1 8081 inside 172.16.1.100 80</span><br><span class="line">nat server HTTP2 zone untrust protocol tcp global interface g1/0/1 8082 inside 172.16.1.200 80</span><br></pre></td></tr></table></figure>

<h4 id="NGFW-NAT-ALG"><a href="#NGFW-NAT-ALG" class="headerlink" title="NGFW NAT ALG"></a>NGFW NAT ALG</h4><p><a href="topo/%E5%AE%9E%E9%AA%8C6%EF%BC%9ANGFW_NAT_ALG.rar">实验6：NGFW_NAT_ALG</a></p>
<p><strong>需求：使用SmartNAT实现FTP应用，分析NAT-ALG在FTP Port模式下的工作过程。</strong></p>
<p><img src="/2022/07/17/HCIA/image-20231007164916587.png" alt="image-20231007164916587"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">sys</span><br><span class="line">sys FW1</span><br><span class="line">int g1/0/0</span><br><span class="line">ip add 172.168.1.254 24</span><br><span class="line">service-manage all permit</span><br><span class="line">firewall zone dmz</span><br><span class="line">add int g1/0/0</span><br><span class="line">int g1/0/1</span><br><span class="line">ip add 100.1.1.1 24</span><br><span class="line">service-manage all permit</span><br><span class="line">firewall zone untrust</span><br><span class="line">add int g1/0/1</span><br><span class="line">ip route-static 0.0.0.0 0 100.1.1.254</span><br><span class="line">security-policy</span><br><span class="line">rule name dmz-to-untrust-ftp01</span><br><span class="line">source-zone dmz</span><br><span class="line">destination-zone untrust</span><br><span class="line">service ftp icmp</span><br><span class="line">action permit</span><br><span class="line">nat address-group 1</span><br><span class="line">mode no-pat global</span><br><span class="line">section 100.1.1.10 100.1.1.20</span><br><span class="line">smart-nopat 100.1.1.21</span><br><span class="line">route <span class="built_in">enable</span></span><br><span class="line">nat-policy</span><br><span class="line">rule name smartnat01</span><br><span class="line">source-zone dmz</span><br><span class="line">destination-zone untrust</span><br><span class="line">source-address 172.168.1.100 32</span><br><span class="line">destination-address 8.8.8.8 32</span><br><span class="line">service ftp icmp</span><br><span class="line">action source-nat address-group 1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sys</span><br><span class="line">sys AR1</span><br><span class="line">int g0/0/0</span><br><span class="line">ip add 100.1.1.254 24</span><br><span class="line">int g0/0/1</span><br><span class="line">ip add 8.8.8.254 24</span><br></pre></td></tr></table></figure>

<h4 id="NGFW-NAT双出口设计"><a href="#NGFW-NAT双出口设计" class="headerlink" title="NGFW NAT双出口设计"></a>NGFW NAT双出口设计</h4><p><a href="topo/%E5%AE%9E%E9%AA%8C7%EF%BC%9ANGFW_NAT%E5%8F%8C%E5%87%BA%E5%8F%A3%E8%AE%BE%E8%AE%A1.rar">实验7：NGFW_NAT双出口设计.rar</a></p>
<p><img src="/2022/07/17/HCIA/image-20231014140520912.png" alt="image-20231014140520912"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">sys</span><br><span class="line">sys FW1</span><br><span class="line">int g1/0/0</span><br><span class="line">ip add 10.3.0.254 24</span><br><span class="line">service-manage all permit</span><br><span class="line">firewall zone trust</span><br><span class="line">add int g1/0/0</span><br><span class="line">int g1/0/2</span><br><span class="line">ip add 1.1.1.1 24</span><br><span class="line">service-manage all permit</span><br><span class="line">firewall zone name isp1</span><br><span class="line"><span class="built_in">set</span> priority 10</span><br><span class="line">add int g1/0/2</span><br><span class="line">int g1/0/3</span><br><span class="line">ip add 2.2.2.1 24</span><br><span class="line">service-manage all permit</span><br><span class="line">firewall zone name isp2</span><br><span class="line"><span class="built_in">set</span> priority 11</span><br><span class="line">add int g1/0/3</span><br><span class="line">int g1/0/1</span><br><span class="line">ip add 10.2.0.254 24</span><br><span class="line">service-manage all permit</span><br><span class="line">firewall zone dmz</span><br><span class="line">add int g1/0/1</span><br><span class="line">ip route-static 0.0.0.0 0 1.1.1.2 pre 59</span><br><span class="line">ip route-static 0.0.0.0 0 2.2.2.2</span><br><span class="line">security-policy</span><br><span class="line">rule name trust-to-isp-icmp01</span><br><span class="line">source-zone trust</span><br><span class="line">destination-zone isp1</span><br><span class="line">destination-zone isp2</span><br><span class="line">service icmp</span><br><span class="line">action permit</span><br><span class="line">nat address-group 1</span><br><span class="line">route <span class="built_in">enable</span> </span><br><span class="line">section 1.1.1.10 1.1.1.20</span><br><span class="line">mode pat</span><br><span class="line">nat address-group 2</span><br><span class="line">route <span class="built_in">enable</span> </span><br><span class="line">section 2.2.2.10 2.2.2.20</span><br><span class="line">mode pat</span><br><span class="line">nat-policy</span><br><span class="line">rule name sourcenat01</span><br><span class="line">source-zone trust</span><br><span class="line">destination-zone isp1</span><br><span class="line">source-address 10.3.0.0 mask 255.255.255.0</span><br><span class="line">destination-address 8.8.8.0 mask 255.255.255.0</span><br><span class="line">service icmp</span><br><span class="line">action source-nat address-group 1</span><br><span class="line">rule name sourcenat02</span><br><span class="line">source-zone trust</span><br><span class="line">destination-zone isp2</span><br><span class="line">source-address 10.3.0.0 mask 255.255.255.0</span><br><span class="line">destination-address 8.8.8.0 mask 255.255.255.0</span><br><span class="line">service icmp</span><br><span class="line">action source-nat address-group 2</span><br><span class="line">nat server HTTP1 zone isp1 protocol tcp global interface GigabitEthernet1/0/2 www inside 10.2.0.1 www</span><br><span class="line">nat server HTTP2 zone isp2 protocol tcp global interface GigabitEthernet1/0/3 www inside 10.2.0.1 www</span><br><span class="line">security-policy</span><br><span class="line">rule name isp-to-dmz-http01</span><br><span class="line">source-zone isp1</span><br><span class="line">source-zone isp2</span><br><span class="line">destination-zone dmz</span><br><span class="line">service http</span><br><span class="line">action permit</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sys</span><br><span class="line">sys AR1</span><br><span class="line">int g0/0/0</span><br><span class="line">ip add 1.1.1.2 24</span><br><span class="line">int g0/0/1</span><br><span class="line">ip add 8.8.8.252 24</span><br><span class="line">vrrp vrid 1 virtual-ip 8.8.8.254</span><br><span class="line">vrrp vrid 1 priority 120</span><br><span class="line">vrrp vrid 1 track interface g0/0/0 reduced 30</span><br><span class="line">dis vrrp brief</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sys</span><br><span class="line">sys AR2</span><br><span class="line">int g0/0/0</span><br><span class="line">ip add 2.2.2.2 24</span><br><span class="line">int g0/0/1</span><br><span class="line">ip add 8.8.8.253 24</span><br><span class="line">vrrp vrid 1 virtual-ip 8.8.8.254</span><br><span class="line">dis vrrp brief</span><br></pre></td></tr></table></figure>



<h4 id="NGFW-NAT场景规避环路风险的方法"><a href="#NGFW-NAT场景规避环路风险的方法" class="headerlink" title="NGFW NAT场景规避环路风险的方法"></a>NGFW NAT场景规避环路风险的方法</h4><p><a href="topo/%E5%AE%9E%E9%AA%8C8%EF%BC%9ANGFW_NAT%E5%9C%BA%E6%99%AF%E8%A7%84%E9%81%BF%E7%8E%AF%E8%B7%AF%E9%A3%8E%E9%99%A9%E7%9A%84%E6%96%B9%E6%B3%95.rar">实验8：NGFW_NAT场景规避环路风险的方法</a></p>
<p><strong>需求：分析上述NAT环境中存在环路风险是什么原因导致，并且提供解决方案？</strong></p>
<p><img src="/2022/07/17/HCIA/image-20231007182358503.png" alt="image-20231007182358503"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># PC1 tracert 202.1.1.20会环路</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">sys</span><br><span class="line">sys AR1</span><br><span class="line">int g0/0/0</span><br><span class="line">ip add 202.1.1.2 30</span><br><span class="line">int g0/0/1</span><br><span class="line">ip add 210.1.1.1 24</span><br><span class="line">int g0/0/2</span><br><span class="line">ip add 220.1.1.1 24</span><br><span class="line">ip route-static 202.1.1.20 32 202.1.1.1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sys</span><br><span class="line">sys FW1</span><br><span class="line">int g1/0/0</span><br><span class="line">ip add 192.168.0.1 24</span><br><span class="line">service-manage all permit</span><br><span class="line">int g1/0/1</span><br><span class="line">ip add 202.1.1.1 30</span><br><span class="line">service-manage all permit</span><br><span class="line">q</span><br><span class="line">firewall zone trust</span><br><span class="line">add int g1/0/0</span><br><span class="line">q</span><br><span class="line">firewall zone untrust</span><br><span class="line">add int g1/0/1</span><br><span class="line">q</span><br><span class="line">ip route-static 0.0.0.0 0 202.1.1.2</span><br><span class="line">security-policy</span><br><span class="line">rule name trust-to-untrust</span><br><span class="line">source-zone trust</span><br><span class="line">destination-zone untrust</span><br><span class="line">service icmp http</span><br><span class="line">action permit</span><br><span class="line">nat address-group 1</span><br><span class="line">section 202.1.1.10 202.1.1.20</span><br><span class="line">route <span class="built_in">enable</span>                     <span class="comment">#这个去了就环路</span></span><br><span class="line">mode pat</span><br><span class="line">nat-policy</span><br><span class="line">rule name sourcenat01</span><br><span class="line">source-zone trust</span><br><span class="line">destination-zone untrust</span><br><span class="line">source-address 192.168.0.0 24</span><br><span class="line">service icmp http</span><br><span class="line">action source-nat address-group 1</span><br><span class="line"></span><br><span class="line"><span class="comment">#上述环路是因为在AR1里面设置了一条静态路由(ip route-static)，该路由的目的是让数据包有回去的方向，但是在Client1 ping 202.1.1.20 的时候，由于FW1本地没有该路由所以交给了缺省路由解决，缺省路由则会把数据交给AR1，而AR1在前面说到有了静态路由，又会把数据丢给FW1，彼此往复就形成环路。</span></span><br><span class="line"><span class="comment">#解决办法则是：在防火墙内设置黑洞路由，把这个会环路的路由丢黑洞里,或者route enable</span></span><br><span class="line"><span class="comment">#dis nat-policy rule all</span></span><br><span class="line"><span class="comment">#dis f s t v</span></span><br></pre></td></tr></table></figure>

<h4 id="B2B-VPN-建设"><a href="#B2B-VPN-建设" class="headerlink" title="B2B VPN 建设"></a>B2B VPN 建设</h4><p><a href="topo/%E5%AE%9E%E9%AA%8C9%EF%BC%9AB2B_VPN%E5%BB%BA%E8%AE%BE.rar">实验9：B2B_VPN建设.rar</a></p>
<p><img src="/2022/07/17/HCIA/image-20231015131620231.png" alt="image-20231015131620231"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">sys</span><br><span class="line">sys AR1</span><br><span class="line">int g0/0/0</span><br><span class="line">ip add 192.168.1.254 24</span><br><span class="line">int g0/0/1</span><br><span class="line">ip add 100.1.1.1 24</span><br><span class="line">ip route-static 0.0.0.0 0 100.1.1.2</span><br><span class="line">acl 3000</span><br><span class="line">rule deny ip <span class="built_in">source</span> 192.168.1.0 0.0.0.255 destination 192.168.2.0 0.0.0.255</span><br><span class="line">rule permit ip <span class="built_in">source</span> 192.168.1.0 0.0.0.255</span><br><span class="line">int g0/0/1</span><br><span class="line">nat outbound 3000</span><br><span class="line">acl 3001</span><br><span class="line">rule permit ip <span class="built_in">source</span> 192.168.1.0 0.0.0.255 destination 192.168.2.0 0.0.0.255</span><br><span class="line">ipsec proposal 1</span><br><span class="line">transform ah-esp</span><br><span class="line">ah authentication-algorithm sha2-256</span><br><span class="line">esp authentication-algorithm sha2-256 </span><br><span class="line">esp encryption-algorithm 3des</span><br><span class="line">encapsulation-mode tunnel</span><br><span class="line">ipsec policy 1 1 manual</span><br><span class="line">security acl 3001</span><br><span class="line">proposal 1</span><br><span class="line">tunnel <span class="built_in">local</span> 100.1.1.1</span><br><span class="line">tunnel remote 200.1.1.2</span><br><span class="line">sa spi inbound ah 123456</span><br><span class="line">sa spi inbound esp 123456</span><br><span class="line">sa string-key inbound ah simple 123456</span><br><span class="line">sa string-key inbound esp simple 123456</span><br><span class="line">sa spi outbound ah 654321</span><br><span class="line">sa spi outbound esp 654321</span><br><span class="line">sa string-key outbound ah simple 654321</span><br><span class="line">sa string-key outbound esp simple 654321</span><br><span class="line">q</span><br><span class="line">int g0/0/1</span><br><span class="line">ipsec policy 1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sys</span><br><span class="line">sys AR2-ISP</span><br><span class="line">int g0/0/0</span><br><span class="line">ip add 100.1.1.2 24</span><br><span class="line">int g0/0/1</span><br><span class="line">ip add 200.1.1.1 24</span><br><span class="line">int g0/0/2</span><br><span class="line">ip add 8.8.8.254 24</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sys</span><br><span class="line">sys AR3</span><br><span class="line">int g0/0/0</span><br><span class="line">ip add 200.1.1.2 24</span><br><span class="line">int g0/0/1</span><br><span class="line">ip add 192.168.2.254 24</span><br><span class="line">ip route-static 0.0.0.0 0 200.1.1.1</span><br><span class="line">acl 3000</span><br><span class="line">rule deny ip <span class="built_in">source</span> 192.168.2.0 0.0.0.255 destination 192.168.1.0 0.0.0.255</span><br><span class="line">rule permit ip <span class="built_in">source</span> 192.168.2.0 0.0.0.255</span><br><span class="line">int g0/0/0</span><br><span class="line">nat outbound 3000</span><br><span class="line">acl 3001</span><br><span class="line">rule permit ip <span class="built_in">source</span> 192.168.2.0 0.0.0.255 destination 192.168.1.0 0.0.0.255</span><br><span class="line">ipsec proposal 1</span><br><span class="line">transform ah-esp</span><br><span class="line">ah authentication-algorithm sha2-256</span><br><span class="line">esp authentication-algorithm sha2-256 </span><br><span class="line">esp encryption-algorithm 3des</span><br><span class="line">encapsulation-mode tunnel</span><br><span class="line">ipsec policy 1 1 manual</span><br><span class="line">security acl 3001</span><br><span class="line">proposal 1</span><br><span class="line">tunnel <span class="built_in">local</span> 200.1.1.2</span><br><span class="line">tunnel remote 100.1.1.1</span><br><span class="line">sa spi inbound ah 654321</span><br><span class="line">sa spi inbound esp 654321</span><br><span class="line">sa string-key inbound ah simple 654321</span><br><span class="line">sa string-key inbound esp simple 654321</span><br><span class="line">sa spi outbound ah 123456</span><br><span class="line">sa spi outbound esp 123456</span><br><span class="line">sa string-key outbound ah simple 123456</span><br><span class="line">sa string-key outbound esp simple 123456</span><br><span class="line">q</span><br><span class="line">int g0/0/0</span><br><span class="line">ipsec policy 1</span><br></pre></td></tr></table></figure>

<h4 id="NGFW-GRE-TUNNEL-Basic-Configuration"><a href="#NGFW-GRE-TUNNEL-Basic-Configuration" class="headerlink" title="NGFW GRE TUNNEL Basic Configuration"></a>NGFW GRE TUNNEL Basic Configuration</h4><p><a href="topo/%E5%AE%9E%E9%AA%8C10%EF%BC%9ANGFW_GRE_TUNNEL_Basic_Configuration.rar">实验10：NGFW_GRE_TUNNEL_Basic_Configuration.rar</a></p>
<p><img src="/2022/07/17/HCIA/image-20231015172320107.png" alt="image-20231015172320107"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line">sys</span><br><span class="line">sys AR1</span><br><span class="line">int g0/0/0</span><br><span class="line">ip add 100.1.1.254 24</span><br><span class="line">int g0/0/1</span><br><span class="line">ip add 200.1.1.254 24</span><br><span class="line">int g0/0/2</span><br><span class="line">ip add 8.8.8.254 24</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sys</span><br><span class="line">sys FW1</span><br><span class="line">firewall zone trust</span><br><span class="line">add int g1/0/0</span><br><span class="line">int g1/0/0</span><br><span class="line">ip add 192.168.1.254 24</span><br><span class="line">service-manage all permit</span><br><span class="line">firewall zone untrust</span><br><span class="line">add int g1/0/1</span><br><span class="line">int g1/0/1</span><br><span class="line">ip add 100.1.1.1 24</span><br><span class="line">service-manage all permit</span><br><span class="line">ip route-static 0.0.0.0 0.0.0.0 100.1.1.254</span><br><span class="line">security-policy</span><br><span class="line">rule name ISP-icmp01</span><br><span class="line">source-zone <span class="built_in">local</span></span><br><span class="line">destination-zone untrust</span><br><span class="line">service icmp</span><br><span class="line">action permit</span><br><span class="line">rule name sourcenat01</span><br><span class="line">source-zone trust</span><br><span class="line">destination-zone untrust</span><br><span class="line">service icmp</span><br><span class="line">action permit</span><br><span class="line">nat-policy</span><br><span class="line">rule name sourcenat01</span><br><span class="line">source-zone trust</span><br><span class="line">egress-interface GigabitEthernet1/0/1</span><br><span class="line">source-address 192.168.1.0 mask 255.255.255.0</span><br><span class="line">service icmp</span><br><span class="line">action source-nat easy-ip</span><br><span class="line">int tunnel0</span><br><span class="line">ip add 172.16.1.1 24</span><br><span class="line">tunnel-protocol gre</span><br><span class="line"><span class="built_in">source</span> 100.1.1.1</span><br><span class="line">destination 200.1.1.1</span><br><span class="line">firewall zone name gre</span><br><span class="line"><span class="built_in">set</span> priority 10</span><br><span class="line">add interface Tunnel0</span><br><span class="line">security-policy</span><br><span class="line">default action permit </span><br><span class="line">ospf 1</span><br><span class="line">area 0</span><br><span class="line">network 172.16.1.0 0.0.0.255</span><br><span class="line">network 192.168.1.0 0.0.0.255</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sys</span><br><span class="line">sys FW2</span><br><span class="line">firewall zone trust</span><br><span class="line">add int g1/0/0</span><br><span class="line">int g1/0/0</span><br><span class="line">ip add 192.168.2.254 24</span><br><span class="line">service-manage all permit</span><br><span class="line">firewall zone untrust</span><br><span class="line">add int g1/0/1</span><br><span class="line">int g1/0/1</span><br><span class="line">ip add 200.1.1.1 24</span><br><span class="line">service-manage all permit</span><br><span class="line">ip route-static 0.0.0.0 0.0.0.0 200.1.1.254</span><br><span class="line">security-policy</span><br><span class="line">rule name ISP-icmp01</span><br><span class="line">source-zone <span class="built_in">local</span></span><br><span class="line">destination-zone untrust</span><br><span class="line">service icmp</span><br><span class="line">action permit</span><br><span class="line">rule name sourcenat01</span><br><span class="line">source-zone trust</span><br><span class="line">destination-zone untrust</span><br><span class="line">service icmp</span><br><span class="line">action permit</span><br><span class="line">nat-policy</span><br><span class="line">rule name sourcenat01</span><br><span class="line">source-zone trust</span><br><span class="line">egress-interface GigabitEthernet1/0/1</span><br><span class="line">source-address 192.168.2.0 mask 255.255.255.0</span><br><span class="line">service icmp</span><br><span class="line">action source-nat easy-ip</span><br><span class="line">int tunnel0</span><br><span class="line">ip add 172.16.2.1 24</span><br><span class="line">tunnel-protocol gre</span><br><span class="line"><span class="built_in">source</span> 200.1.1.1</span><br><span class="line">destination 100.1.1.1</span><br><span class="line">firewall zone name gre</span><br><span class="line"><span class="built_in">set</span> priority 11</span><br><span class="line">add interface Tunnel0</span><br><span class="line">security-policy</span><br><span class="line">default action permit</span><br><span class="line">ospf 1</span><br><span class="line">area 0</span><br><span class="line">network 172.16.2.0 0.0.0.255</span><br><span class="line">network 192.168.2.0 0.0.0.255</span><br></pre></td></tr></table></figure>

<h4 id="NGFW用户管理和认证部署配置"><a href="#NGFW用户管理和认证部署配置" class="headerlink" title="NGFW用户管理和认证部署配置"></a>NGFW用户管理和认证部署配置</h4><p><img src="/2022/07/17/HCIA/image-20231015173541524.png" alt="image-20231015173541524"></p>
<h4 id="DHCP中继"><a href="#DHCP中继" class="headerlink" title="DHCP中继"></a>DHCP中继</h4><p><img src="/2022/07/17/HCIA/image-20230915221920304.png" alt="image-20230915221920304"></p>
<p><img src="/2022/07/17/HCIA/image-20230915223928106.png" alt="image-20230915223928106"></p>
<ul>
<li><strong>PC1开dhcp自动获取AR1下发的ip</strong></li>
<li><strong>下面是抓到的报文：</strong></li>
</ul>
<p><a href="AR1_g0_0_1_DHCP_Unicast.pcapng">AR1_g0_0_1_DHCP_Unicast.pcapng</a></p>
<p><a href="AR2_g0_0_0_DHCP_broadcast.pcapng">AR2_g0_0_0_DHCP_broadcast.pcapng</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">sys</span><br><span class="line">sys AR1</span><br><span class="line">dhcp <span class="built_in">enable</span></span><br><span class="line">int g0/0/0</span><br><span class="line">ip add 192.168.12.1 24</span><br><span class="line">ip pool 1</span><br><span class="line">network 192.168.1.0 mask 24</span><br><span class="line">gateway-list 192.168.1.254</span><br><span class="line">int g0/0/0</span><br><span class="line">dhcp select global </span><br><span class="line">ip route-static 192.168.1.0 24 192.168.12.2</span><br><span class="line"></span><br><span class="line">sys</span><br><span class="line">sys AR2</span><br><span class="line">dhcp <span class="built_in">enable</span></span><br><span class="line">int g0/0/1</span><br><span class="line">ip add 192.168.12.2 24</span><br><span class="line">int g0/0/0</span><br><span class="line">ip add 192.168.1.254 24</span><br><span class="line">dhcp select relay</span><br><span class="line">dhcp relay server-ip 192.168.12.1</span><br><span class="line"></span><br><span class="line">sys</span><br><span class="line">sys SW1</span><br></pre></td></tr></table></figure>



<h2 id="实验"><a href="#实验" class="headerlink" title="实验"></a>实验</h2><h3 id="交换机划分VLAN配置"><a href="#交换机划分VLAN配置" class="headerlink" title="交换机划分VLAN配置"></a>交换机划分VLAN配置</h3><h4 id="一、实验目标"><a href="#一、实验目标" class="headerlink" title="一、实验目标"></a>一、实验目标</h4><p><strong>1、理解虚拟LAN(VLAN)基本配置；</strong></p>
<p><strong>2、掌握一般交换机按端口划分VLAN的配置方法；</strong></p>
<p><strong>3、掌握Tag VLAN配置方法。</strong></p>
<h4 id="二、实验背景"><a href="#二、实验背景" class="headerlink" title="二、实验背景"></a>二、实验背景</h4><p><strong>某一公司内财务部、销售部的PC通过2台交换机实现通信；要求财务部和销售部的PC可以互通，但为了数据安全起见，销售部和财务部需要进行互相隔离，现要在交换机上做适当配置来实现这一目标。</strong></p>
<h4 id="三、技术原理"><a href="#三、技术原理" class="headerlink" title="三、技术原理"></a>三、技术原理</h4><p>​	<strong>VLAN是指在一个物理网段内。进行逻辑的划分，划分成若干个虚拟局域网，VLAN做大的特性是不受物理位置的限制，可以进行灵活的划分。VLAN具备了一个物理网段所具备的特性。相同VLAN内的主机可以相互直接通信，不同VLAN间的主机之间互相访问必须经路由设备进行转发，广播数据包只可以在本VLAN内进行广播，不能传输到其他VLAN中。</strong></p>
<p>​	<strong>Port VLAN是实现VLAN的方式之一，它利用交换机的端口进行VALN的划分，一个端口只能属于一个VLAN。</strong><br>​	<strong>Tag VLAN是基于交换机端口的另一种类型，主要用于是交换机的相同Vlan内的主机之间可以直接访问，同时对不同Vlan的主机进行隔离。Tag VLAN遵循IEEE802.1Q协议的标准，在使用配置了Tag VLAN的端口进行数据传输时，需要在数据帧内添加4个字节的802.1Q标签信息，用于标示该数据帧属于哪个VLAN,便于对端交换机接收到数据帧后进行准确的过滤。</strong></p>
<h4 id="四、实验设备"><a href="#四、实验设备" class="headerlink" title="四、实验设备"></a>四、实验设备</h4><p><strong>PC1,PC2,PC3,PC4</strong></p>
<p><strong>两台S5700交换机</strong></p>
<h4 id="五、实验的步骤和结果"><a href="#五、实验的步骤和结果" class="headerlink" title="五、实验的步骤和结果"></a>五、实验的步骤和结果</h4><p><img src="/2022/07/17/HCIA/image-20221224163323380.png" alt="image-20221224163323380"></p>
<p><strong>结果就是PC1ping通PC3，PC2ping通PC4，PC1和PC3都不能访问PC2和PC4</strong></p>
<p><img src="/2022/07/17/HCIA/image-20221224163549970.png" alt="image-20221224163549970"></p>
<p><img src="/2022/07/17/HCIA/image-20221224163612934.png" alt="image-20221224163612934"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># LSW1配置：</span><br><span class="line">sys</span><br><span class="line">sys LSW1</span><br><span class="line">vlan b 10 20</span><br><span class="line">int g0/0/2</span><br><span class="line">p l a</span><br><span class="line">p d v 10</span><br><span class="line">q</span><br><span class="line">int g0/0/3</span><br><span class="line">p l a</span><br><span class="line">p d v 20</span><br><span class="line">q</span><br><span class="line">int g0/0/1</span><br><span class="line">p l t</span><br><span class="line">p t a v 10 20 </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># LSW2配置：</span><br><span class="line">sys</span><br><span class="line">sys LSW2</span><br><span class="line">vlan b 10 20</span><br><span class="line">int g0/0/2</span><br><span class="line">p l a</span><br><span class="line">p d v 10</span><br><span class="line">q</span><br><span class="line">int g0/0/3</span><br><span class="line">p l a</span><br><span class="line">p d v 20</span><br><span class="line">q</span><br><span class="line">int g0/0/1</span><br><span class="line">p l t</span><br><span class="line">p t a v 10 20 </span><br></pre></td></tr></table></figure>

<p>PC1配置（所有的PC只需配ip和子网掩码即可）</p>
<p><img src="/2022/07/17/HCIA/image-20221224164203896.png" alt="image-20221224164203896"></p>
<h3 id="三层交换机基本配置"><a href="#三层交换机基本配置" class="headerlink" title="三层交换机基本配置"></a>三层交换机基本配置</h3><h4 id="一、实验目标-1"><a href="#一、实验目标-1" class="headerlink" title="一、实验目标"></a>一、实验目标</h4><p><strong>1、理解三层交换机的基本原理；</strong></p>
<p><strong>2、掌握三层交换机物理端口开启路由功能的配置方法。</strong></p>
<h4 id="二、实验背景-1"><a href="#二、实验背景-1" class="headerlink" title="二、实验背景"></a>二、实验背景</h4><p><strong>公司现有1台三层交换机，要求你进行测试，该交换机的三层功能是否工作正常。</strong></p>
<h4 id="三、技术原理-1"><a href="#三、技术原理-1" class="headerlink" title="三、技术原理"></a>三、技术原理</h4><p>​	<strong>三层交换机是带有三层路由功能的交换机，也就是这台交换机的端口既有三层路由功能，也具有二层交换功能。三层交换机端口默认为二层口，如果需要启用三层功能就需要在此端口输入undo portswitch命令。如果切换二层交换机可以用portswitch命令。</strong></p>
<h4 id="四、实验设备-1"><a href="#四、实验设备-1" class="headerlink" title="四、实验设备"></a>四、实验设备</h4><p><strong>PC1,PC2</strong></p>
<p><strong>一台S5700交换机</strong></p>
<h4 id="五、实验的步骤和结果-1"><a href="#五、实验的步骤和结果-1" class="headerlink" title="五、实验的步骤和结果"></a>五、实验的步骤和结果</h4><p><strong>讲一下我的设想，PC1和PC2处于不同网段，想要互访必须要经过路由，但是实验只有一个交换机，我们可以使用交换机的三层功能（即套一个路由器，这个路由器是虚拟的，这就是三层路由功能）</strong></p>
<p><img src="/2022/07/17/HCIA/image-20230104192525719.png" alt="image-20230104192525719"></p>
<p>交换机配置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">sys</span><br><span class="line">sys LSW1</span><br><span class="line">vlan batch 10 20</span><br><span class="line">int g0/0/1</span><br><span class="line"> p l a</span><br><span class="line"> p d v 10</span><br><span class="line">int vlanif10</span><br><span class="line"> ip add 192.168.1.254 24</span><br><span class="line">int g0/0/2</span><br><span class="line"> p l a</span><br><span class="line"> p d v 20</span><br><span class="line">int vlanif20</span><br><span class="line"> ip add 192.168.2.254 24</span><br></pre></td></tr></table></figure>

<p>PC配置</p>
<p><img src="/2022/07/17/HCIA/image-20230104193842862.png" alt="image-20230104193842862"></p>
<p><img src="/2022/07/17/HCIA/image-20230104193858032.png" alt="image-20230104193858032"></p>
<h3 id="利用三层交换机实现VLAN间路由（有问题。。。）"><a href="#利用三层交换机实现VLAN间路由（有问题。。。）" class="headerlink" title="利用三层交换机实现VLAN间路由（有问题。。。）"></a>利用三层交换机实现VLAN间路由（有问题。。。）</h3><h4 id="一、实验目标-2"><a href="#一、实验目标-2" class="headerlink" title="一、实验目标"></a>一、实验目标</h4><p><strong>1、掌握交换机Tag VLAN的配置；<br>2、掌握三层交换机基本配置方法；<br>3、掌握三层交换机VLAN路由的配置方法；<br>4、通过三层交换机实现VLAN间相互通信。</strong></p>
<h4 id="二、实验背景-2"><a href="#二、实验背景-2" class="headerlink" title="二、实验背景"></a>二、实验背景</h4><p><strong>某企业有两个主要部门，技术部和销售部，分处于不同的办公室，为了安全和便于管理对两个部门的主机进行了VLAN的划分，技术部和销售部分处于不同的VLAN，先由于业务的需求需要销售部和技术部的主机能够相互访问，获得相应的资源，两个部门的交换机通过一台三层交换机进行了连接。</strong></p>
<h4 id="三、技术原理-2"><a href="#三、技术原理-2" class="headerlink" title="三、技术原理"></a>三、技术原理</h4><p>​	<strong>三层交换机具备网络层的功能，实现VLAN相互访问的原理是：利用三层交换机的路由功能，通过识别数据包的IP地址，查找路由表进行选路转发，三层交换机利用直连路由可以实现不同VLAN之间的相互访问。三层交换机给接口配置IP地址。采用SVI（交换虚拟接口）的方式实现VLAN间互连。SVI是指为交换机中的VLAN创建虚拟接口，并且配置IP地址。</strong></p>
<h4 id="四、实验设备-2"><a href="#四、实验设备-2" class="headerlink" title="四、实验设备"></a>四、实验设备</h4><p><strong>PC1,PC2,PC3,PC4</strong></p>
<p><strong>两台S5700交换机</strong></p>
<h4 id="五、实验的步骤和结果-2"><a href="#五、实验的步骤和结果-2" class="headerlink" title="五、实验的步骤和结果"></a>五、实验的步骤和结果</h4><p><img src="/2022/07/17/HCIA/image-20230104211928090.png" alt="image-20230104211928090"></p>
<p><strong>交换机LSW1配置</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">sys</span><br><span class="line">sys LSW1</span><br><span class="line">vlan batch 10 20</span><br><span class="line">int g0/0/1</span><br><span class="line"> p l a</span><br><span class="line"> p d v 10</span><br><span class="line">int g0/0/2</span><br><span class="line"> p l a</span><br><span class="line"> p d v 20</span><br><span class="line">int g0/0/3</span><br><span class="line"> p l t</span><br><span class="line"> p t a v 10 20</span><br></pre></td></tr></table></figure>

<p><strong>交换机LSW2配置</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">sys</span><br><span class="line">sys LSW2</span><br><span class="line">vlan batch 10 20</span><br><span class="line">int g0/0/1</span><br><span class="line"> p l t</span><br><span class="line"> p t a v 10 20</span><br><span class="line">int g0/0/2</span><br><span class="line"> p l a</span><br><span class="line"> p d v 10</span><br><span class="line">int g0/0/3</span><br><span class="line"> p l a</span><br><span class="line"> p d v 20</span><br></pre></td></tr></table></figure>

<p><strong>PC1配置</strong></p>
<p><img src="/2022/07/17/HCIA/image-20230104212214169.png" alt="image-20230104212214169"></p>
<p><strong>PC2配置</strong></p>
<p><img src="/2022/07/17/HCIA/image-20230104212226789.png" alt="image-20230104212226789"></p>
<p><strong>PC3配置</strong></p>
<p><img src="/2022/07/17/HCIA/image-20230104212237237.png" alt="image-20230104212237237"></p>
<p><strong>PC4配置</strong></p>
<p><img src="/2022/07/17/HCIA/image-20230104212252180.png" alt="image-20230104212252180"></p>
<p><strong>我发现这实验有问题的。。。可能是我技术不好，这个更改后的配置，更改前的配置如下：</strong></p>
<p><strong>交换机LSW2配置（其他配置不变）</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">sys</span><br><span class="line">sys LSW2</span><br><span class="line">vlan batch 10 20</span><br><span class="line">int g0/0/1</span><br><span class="line"> p l t</span><br><span class="line"> p t a v 10 20</span><br><span class="line">int g0/0/2</span><br><span class="line"> p l a</span><br><span class="line"> p d v 10</span><br><span class="line">int g0/0/3</span><br><span class="line"> p l a</span><br><span class="line"> p d v 20</span><br><span class="line">int vlanif 10 </span><br><span class="line"> ip add 192.168.1.254 24</span><br><span class="line">int vlanif 20</span><br><span class="line"> ip add 192.168.2.254 24</span><br></pre></td></tr></table></figure>

<p><strong>我开启了三层功能会发现vlan全部失效，vlan10可以访问vlan20了。。。无奈之下我只能把vlanif的配置去掉，所以上面的配置ping网关全部都是失联的。。。</strong></p>
<h3 id="路由器综合路由配置"><a href="#路由器综合路由配置" class="headerlink" title="路由器综合路由配置"></a>路由器综合路由配置</h3><h4 id="一、实验目标-3"><a href="#一、实验目标-3" class="headerlink" title="一、实验目标"></a>一、实验目标</h4><p><strong>1.掌握中和路由器的配置方法；</strong></p>
<p><strong>2.掌握查看通过路由重分布学习产生的路由；</strong></p>
<p><strong>3.熟悉广域网线缆的链接方式。</strong></p>
<h4 id="二、实验背景-3"><a href="#二、实验背景-3" class="headerlink" title="二、实验背景"></a>二、实验背景</h4><p><strong>假设某公司通过一台三层交换机连到公司出口路由器 R1上，路由器 R1再和公司外的另一台路由器 R2 连接。三层交换机与 R1 间运行 RIPV2 路由协议，R1与 R2 间运行 OSPF 路由协议。现要做适当配置，实现公司内部主机与公司外部主机之间的相互通信。</strong></p>
<h4 id="三、技术原理-3"><a href="#三、技术原理-3" class="headerlink" title="三、技术原理"></a>三、技术原理</h4><p><strong>为了支持本设备能够运行多个路由协议进程，系统软件提供了路由信息从一个路由进程重分布到另一个路由进程的功能。比如你可以将 OSPF 路由域的路由重新分布后通高 RIP 路由域中，也可以将 RIP 路由域的路由重新分布后通告到OSPE 路由域中。路由的相互重分布可以在所有的 IP路由协议之间进行。要把路由从一个路由域分布到另一个路由域，并且进行控制路由重分布。</strong></p>
<h4 id="四、实验设备-3"><a href="#四、实验设备-3" class="headerlink" title="四、实验设备"></a>四、实验设备</h4><p><strong>S5700交换机一台，AR2220路由器两台，PC两台</strong></p>
<h4 id="五、实验的步骤和结果-3"><a href="#五、实验的步骤和结果-3" class="headerlink" title="五、实验的步骤和结果"></a>五、实验的步骤和结果</h4><p><img src="/2022/07/17/HCIA/image-20230104215057099.png" alt="image-20230104215057099"></p>
<p><strong>交换机LSW1配置</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">sys</span><br><span class="line">sys LSW1</span><br><span class="line">v b 10 20</span><br><span class="line">int g0/0/2</span><br><span class="line">p l a</span><br><span class="line">p d v 10</span><br><span class="line">int vlan 10</span><br><span class="line">ip add 192.168.1.1 24</span><br><span class="line">int g0/0/1</span><br><span class="line">p l a</span><br><span class="line">p d v 20</span><br><span class="line">int vlan 20</span><br><span class="line">ip add 192.168.2.1 24</span><br><span class="line">rip</span><br><span class="line">version 2</span><br><span class="line">undo summary </span><br><span class="line">network 192.168.1.0</span><br><span class="line">network 192.168.2.0</span><br></pre></td></tr></table></figure>

<p><strong>AR1配置</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">sys</span><br><span class="line">sys AR1</span><br><span class="line">int g0/0/1</span><br><span class="line">ip add 192.168.2.2 24</span><br><span class="line">int g0/0/0</span><br><span class="line">ip add 192.168.3.1 24</span><br><span class="line">rip</span><br><span class="line">version 2</span><br><span class="line">undo summary </span><br><span class="line">network 192.168.2.0</span><br><span class="line">ospf 1 router-id 1.1.1.1</span><br><span class="line">area 0</span><br><span class="line">network 192.168.3.0 0.0.0.255</span><br></pre></td></tr></table></figure>

<p><strong>AR1路由重分布配置</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">rip</span><br><span class="line">import-route ospf</span><br><span class="line">q</span><br><span class="line">ospf 1</span><br><span class="line">import-route rip</span><br></pre></td></tr></table></figure>

<p><strong>AR2配置</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">sys</span><br><span class="line">sys AR2</span><br><span class="line">int g0/0/1</span><br><span class="line">ip add 192.168.3.2 24</span><br><span class="line">int g0/0/0</span><br><span class="line">ip add 192.168.4.1 24</span><br><span class="line">ospf 1 router-id 2.2.2.2</span><br><span class="line">area 0</span><br><span class="line">network 192.168.3.0 0.0.0.255</span><br><span class="line">network 192.168.4.0 0.0.0.255</span><br></pre></td></tr></table></figure>

<p><strong>PC配置</strong></p>
<p><img src="/2022/07/17/HCIA/image-20230104215454559.png" alt="image-20230104215454559"></p>
<p><img src="/2022/07/17/HCIA/image-20230104215509179.png" alt="image-20230104215509179"></p>
<h3 id="单臂路由"><a href="#单臂路由" class="headerlink" title="单臂路由"></a>单臂路由</h3><h4 id="一、实验设备"><a href="#一、实验设备" class="headerlink" title="一、实验设备"></a>一、实验设备</h4><p><strong>PC1,PC2</strong></p>
<p><strong>一台S5700交换机和一台AR2220交换机</strong></p>
<h4 id="二、实验的步骤和结果"><a href="#二、实验的步骤和结果" class="headerlink" title="二、实验的步骤和结果"></a>二、实验的步骤和结果</h4><p><img src="/2022/07/17/HCIA/image-20230101193234867.png" alt="image-20230101193234867"></p>
<p>交换机配置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">sys</span><br><span class="line">sys LSW1</span><br><span class="line">vlan batch 10 20</span><br><span class="line">int g0/0/1</span><br><span class="line"> p l a</span><br><span class="line"> p d v 10</span><br><span class="line">int g0/0/2</span><br><span class="line"> p l a</span><br><span class="line"> p d v 20</span><br><span class="line">int g0/0/3</span><br><span class="line"> p l t</span><br><span class="line"> p t a v 10 20</span><br></pre></td></tr></table></figure>

<p>路由器配置</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">sys</span><br><span class="line">sys AR1</span><br><span class="line">int g0/0/0.10                  <span class="comment">#创建子接口</span></span><br><span class="line"> ip add 192.168.10.254 24      </span><br><span class="line"> dot1q termination vid 10      <span class="comment">#配置子接口终结的VLAN ID </span></span><br><span class="line"> arp broadcast <span class="built_in">enable</span>          <span class="comment">#开启子接口的arp广播功能</span></span><br><span class="line">int g0/0/0.20</span><br><span class="line"> ip add 192.168.20.254 24</span><br><span class="line"> dot1q termination vid 20</span><br><span class="line"> arp broadcast <span class="built_in">enable</span></span><br></pre></td></tr></table></figure>

<p>PC配置</p>
<p><img src="/2022/07/17/HCIA/image-20230101193316730.png" alt="image-20230101193316730"></p>
<p><img src="/2022/07/17/HCIA/image-20230101193332409.png" alt="image-20230101193332409"></p>
<h3 id="单臂路由转三层交换"><a href="#单臂路由转三层交换" class="headerlink" title="单臂路由转三层交换"></a>单臂路由转三层交换</h3><h4 id="一、实验设备-1"><a href="#一、实验设备-1" class="headerlink" title="一、实验设备"></a>一、实验设备</h4><p><strong>PC1,PC2</strong></p>
<p><strong>一台S5700交换机</strong></p>
<h4 id="二、实验的步骤和结果-1"><a href="#二、实验的步骤和结果-1" class="headerlink" title="二、实验的步骤和结果"></a>二、实验的步骤和结果</h4><p><img src="/2022/07/17/HCIA/image-20230101203109624.png" alt="image-20230101203109624"></p>
<p>交换机配置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">sys</span><br><span class="line">sys LSW1</span><br><span class="line">vlan batch 10 20</span><br><span class="line">int g0/0/1</span><br><span class="line"> p l a</span><br><span class="line"> p d v 10</span><br><span class="line">int g0/0/2</span><br><span class="line"> p l a</span><br><span class="line"> p d v 20</span><br><span class="line">int g0/0/3</span><br><span class="line"> p l t</span><br><span class="line"> p t a v 10 20</span><br><span class="line">int vlanif 10 </span><br><span class="line"> ip add 192.168.10.254 24</span><br><span class="line">int vlanif 20</span><br><span class="line"> ip add 192.168.20.254 24</span><br></pre></td></tr></table></figure>

<p>PC配置</p>
<p><img src="/2022/07/17/HCIA/image-20230101193316730.png" alt="image-20230101193316730"></p>
<p><img src="/2022/07/17/HCIA/image-20230101193332409.png" alt="image-20230101193332409"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/25/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/25/">25</a><span class="page-number current">26</span><a class="page-number" href="/page/27/">27</a><a class="page-number" href="/page/28/">28</a><a class="extend next" rel="next" href="/page/27/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  

  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>


  <aside class="sidebar">
    <div class="sidebar-inner">


      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>

      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="涩橙子"
      src="/images/head.jpg">
  <p class="site-author-name" itemprop="name">涩橙子</p>
  <div class="site-description" itemprop="description">自己对技术的小小见解，如果有误，请轻点喷，作者会腾出时间修改错误！！！(写了"搁浅"两字的就是个空文档,望注意)</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">83</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">17</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">45</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="/%E4%B8%8D%E7%BB%99%E4%BD%A0%EF%BC%81%EF%BC%81%EF%BC%81" title="E-Mail → 不给你！！！"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://aienh.github.io/" title="https:&#x2F;&#x2F;aienh.github.io" rel="noopener" target="_blank">ienAの博客</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://tokiame.cn/" title="https:&#x2F;&#x2F;tokiame.cn" rel="noopener" target="_blank">时雨小栈</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://songxwn.com/" title="https:&#x2F;&#x2F;songxwn.com&#x2F;" rel="noopener" target="_blank">songxwn</a>
        </li>
    </ul>
  </div>

      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
      
      <div id="music163player">
      <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=110 src="//music.163.com/outchain/player?type=0&id=8269604294&auto=1&height=90"></iframe>
      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>
  


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">涩橙子</span>
</div>
<!--
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>
-->

        








      </div>
    </footer>
  </div>

  
  
  <script color='0,0,255' opacity='0.5' zIndex='-1' count='99' src="/lib/canvas-nest/canvas-nest.min.js"></script>
  <script size="300" alpha="0.6" zIndex="-1" src="/lib/canvas-ribbon/canvas-ribbon.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/pjax/pjax.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>

  <script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '.languages',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[data-pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.dataset.pjax !== undefined) {
      script.dataset.pjax = '';
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script>




  




  
<script src="/js/local-search.js"></script>









<script data-pjax>
document.querySelectorAll('.pdfobject-container').forEach(element => {
  let url = element.dataset.target;
  let pdfOpenParams = {
    navpanes : 0,
    toolbar  : 0,
    statusbar: 0,
    pagemode : 'thumbs',
    view     : 'FitH'
  };
  let pdfOpenFragment = '#' + Object.entries(pdfOpenParams).map(([key, value]) => `${key}=${encodeURIComponent(value)}`).join('&');
  let fullURL = `/lib/pdf/web/viewer.html?file=${encodeURIComponent(url)}${pdfOpenFragment}`;

  if (NexT.utils.supportsPDFs()) {
    element.innerHTML = `<embed class="pdfobject" src="${url + pdfOpenFragment}" type="application/pdf" style="height: ${element.dataset.height};">`;
  } else {
    element.innerHTML = `<iframe src="${fullURL}" style="height: ${element.dataset.height};" frameborder="0"></iframe>`;
  }
});
</script>




    <div id="pjax">
  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : true,
      notify     : true,
      appId      : 't3KNgr4WVcpJVh17S5thqEXl-gzGzoHsz',
      appKey     : 'tvxyuYI5nZrSoGZ4ct2MSuxe',
      placeholder: "写下你的评论吧",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

    </div>

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/miku.model.json"},"display":{"position":"right","width":150,"height":300,"hOffset":-15,"vOffset":-15},"mobile":{"show":true},"react":{"opacity":0.7},"log":false});</script></body>
</html>


